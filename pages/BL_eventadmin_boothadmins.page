<apex:page Controller="BL_Eventadmin_BoothAdminsCon" sidebar="false" showHeader="false" id="Thepage" standardStylesheets="false" action="{!login}">
<apex:includeScript value="{!$Resource.AjaxLoaderJs}/AjaxLoader.js"/> 

<style type='text/css'>


.hidedivtext{font-size:14px; padding-left:6px;text-align:left;}
#B {
position: absolute;
}

#B {
top: 228px;
right:0px;
width:auto;
height:auto;
z-index:999;
display:none;
background:#FFFFFF;
border:3px solid #226b86;
padding:10px;
 border-radius:8px; -webkit-border-radius:8px; -moz-border-radius:8px;
 -webkit-box-shadow: 0 8px 6px 6px #cccccc;
       -moz-box-shadow: 0 8px 6px 6px #cccccc;
            box-shadow: 0 8px 6px 6px #cccccc;
}

#BB {
top: 0px;
left: 0px;
right: 0;
bottom: 0px;

align:left;
float:left;
// background:green;
}




.grid{ 
        width: 100%; 
        border-collapse: collapse; 
    }
    /* Zebra striping */
   .grid tr:nth-of-type(odd) { 
        background: #eee; 
    }
     .grid tr:hover{ 
        background: #f3f3f3; 
    }
   .grid th { 
        background: #CCCCCC;
       color: #414141; 
        font-weight: bold; 
        background: #eaeaea; /* Old browsers */
background: -moz-linear-gradient(top,  #eaeaea 0%, #f3f3f3 39%, #f3f3f3 58%, #eaeaea 99%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eaeaea), color-stop(39%,#f3f3f3), color-stop(58%,#f3f3f3), color-stop(99%,#eaeaea)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #eaeaea 0%,#f3f3f3 39%,#f3f3f3 58%,#eaeaea 99%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #eaeaea 0%,#f3f3f3 39%,#f3f3f3 58%,#eaeaea 99%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #eaeaea 0%,#f3f3f3 39%,#f3f3f3 58%,#eaeaea 99%); /* IE10+ */
background: linear-gradient(to bottom,  #eaeaea 0%,#f3f3f3 39%,#f3f3f3 58%,#eaeaea 99%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eaeaea', endColorstr='#eaeaea',GradientType=0 ); /* IE6-9 */
    }
    .grid td{ 
        padding:2px; 
        border-bottom:1px solid #eaeaea; 
        text-align: left;
      border-right:0px;; 
    }
    .grid th { 
        padding:2px; 
        border: 1px solid #C6C4C4; 
       
        text-align: left; 
    }
    .grid1 td{
    border-right:0px solid #F00; 
    }
 .grid tr:nth-child(odd)     { background-color:#fafafa; }
 .grid tr:nth-child(even)      { background-color:#fff; }
 
  .grid tr:hover{background-color:#eaeaea;} 
  
.glossy{background: #d8e5f5; /* Old browsers */
background: -moz-linear-gradient(top,  #d8e5f5 0%, #cfdff3 45%, #c6d9f1 48%, #b6ceee 48%, #aec9ed 48%, #bed4f0 73%, #caddf3 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#d8e5f5), color-stop(45%,#cfdff3), color-stop(48%,#c6d9f1), color-stop(48%,#b6ceee), color-stop(48%,#aec9ed), color-stop(73%,#bed4f0), color-stop(100%,#caddf3)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #d8e5f5 0%,#cfdff3 45%,#c6d9f1 48%,#b6ceee 48%,#aec9ed 48%,#bed4f0 73%,#caddf3 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #d8e5f5 0%,#cfdff3 45%,#c6d9f1 48%,#b6ceee 48%,#aec9ed 48%,#bed4f0 73%,#caddf3 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #d8e5f5 0%,#cfdff3 45%,#c6d9f1 48%,#b6ceee 48%,#aec9ed 48%,#bed4f0 73%,#caddf3 100%); /* IE10+ */
background: linear-gradient(to bottom,  #d8e5f5 0%,#cfdff3 45%,#c6d9f1 48%,#b6ceee 48%,#aec9ed 48%,#bed4f0 73%,#caddf3 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d8e5f5', endColorstr='#caddf3',GradientType=0 ); /* IE6-9 */
 border-top:1px solid #91b5db; border-right:1px solid #91b5db; border-left:1px solid #91b5db;
}
.gridbottom{border-bottom:1px solid #91b5db; border-right:1px solid #91b5db; border-left:1px solid #91b5db;background-color:#d6e3f2; padding:3px;}
.trwhite{ background-color: #FFFFFF; }
.trwhite:hover { background-color: #FFFFFF; }
</style>
<head>
<title>Boothleads</title>
</head>
 <!----- Including Style Sheets ------>
<c:AjaxLoader LoaderImage="{!$Resource.AjaxLoaderImage}"/>
<style>
select, option{min-width:90px; max-width:170px}
.eventtable{border-right:1px solid #cccccc;text-align:left;background-color:#f3f3f3;height:10px;width:30%;padding-left:25px;border-bottom:3px solid #FFFFFF;padding-left:10px;}
.eventselect{border-right:1px solid #cccccc;text-align:left;background-color:#b4dff9;height:10px;width:30%;padding-left:25px;border-bottom:3px solid #FFFFFF;padding-left:10px;}
.eventhover{ background-color:#cccccc;}
</style>
<apex:includeScript value="{!$Resource.PhoneSetup}"/> 
 <apex:outputPanel >
  <script>
  // alert('No Booth Admins added for selected Event');
  </script>
  </apex:outputPanel>
  <apex:outputPanel rendered="{!DisplayNoEventMessage}">
  <script>
   alert('No Booth Admins added for selected Event');
  </script>
  </apex:outputPanel>
  
  
 <script language="JavaScript">

   
   function validateAddBoothFields()
   {    
   
      
      
       var lvFnId = document.getElementById('{!$Component.Thepage:Exhibitorform:FirstName}').value;           
       var lvLnId = document.getElementById('{!$Component.Thepage:Exhibitorform:LastName}').value;
       var Email = document.getElementById('{!$Component.Thepage:Exhibitorform:emailId}').value;
       var lvCnId = document.getElementById('{!$Component.Thepage:Exhibitorform:OrgName}').value;   
      var AddZip = document.getElementById('{!$Component.Thepage:Exhibitorform:AZip}').value; 
      var table = document.getElementById('{!$Component.Thepage:Exhibitorform:tbl}').value;
       
       
         lvFnId = lvFnId.trim();
         lvLnId = lvLnId.trim();
         Email = Email.trim(); 
         lvCnId = lvCnId.trim();
         AddZip = AddZip.trim();
         table = table.trim();
     
     
     if(table == ""   )
    {
        alert("Please enter Booth Number");
      
        return false;
    }  
    
       if(lvFnId == ""   )
    {
        alert("Please enter First Name");
      
        return false;
    }  
       
     if(lvLnId == ""   )
    {
        alert("Please enter Last Name");
        
        return false;
    }     
       
       
    if(Email == ""){
    alert("Please enter EmailId");
       
        return false;
    
    }
     
        
     if(lvCnId == ""){
    alert("Please enter Organization Name");
       
        return false;
    
    }
     if(AddZip != "")
             {
             if(validateZipCode(AddZip)== false){
                alert("Please enter a valid ZIP Code ");                
                return false;
                }
            }
 
   if(Email != "" )
        {
           var boo = validateEmail(Email );
           
           return boo;
        }
        
   }    
   
    function validateEmail(var1)
    {
        var x= var1;       
        var atpos=x.indexOf("@");
        var dotpos=x.lastIndexOf(".");
          if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
          {
              alert("Please enter a valid Email Id");
              return false;
          }
          else return true;
    }
    
     function callingChangeEventFunction(x){
        ChangeEventFunction(x);
    }
    
    
   function ValidateBoothadminForm()
    {
          
           
           var FirstName = document.getElementById('{!$Component.Thepage:BoothAdminform:BAFN}').value;
           var LastName = document.getElementById('{!$Component.Thepage:BoothAdminform:BALastName}').value;
           var BAEmail = document.getElementById('{!$Component.Thepage:BoothAdminform:BAemailId}').value;
           
           var BAZipCode = document.getElementById('{!$Component.Thepage:BoothAdminform:BAZip}').value;
             var batbl = document.getElementById('{!$Component.Thepage:BoothAdminform:BATBL}').value;    
         
         FirstName = FirstName.trim();
         LastName = LastName.trim();
         BAEmail = BAEmail.trim();
        batbl = batbl .trim();
         BAZipCode  = BAZipCode.trim(); 
            
          if(batbl == ""   )
        {
            
            alert("Please enter Booth Number");
            
            return false;
        } 
                   
        if(FirstName == ""   )
        {
            
            alert("Please enter First Name");
            
            return false;
        } 
        
        if(LastName == ""   )
        {
            alert("Please enter Last Name");
           
            return false;
        }   
        
        if(BAEmail == ""   )
        {
            alert("Please enter Email Id");
            
            return false;
        }
        
        
        if(BAZipCode != "")
             {
             if(validateZipCode(BAZipCode )== false){
                alert("Please enter a valid ZIP Code ");                
                return false;
                }
            }
        
        if(BAEmail !="" )
        {
           var boo = validateEmail(BAEmail);
           
           return boo;
        }
     
    }
    
      function EditValidateForm()
   {    
   
      
       var EditFirstName = document.getElementById('{!$Component.Thepage:EditExhibitor:FirstNameEdit}').value;
       var EditLastName = document.getElementById('{!$Component.Thepage:EditExhibitor:LastNameEdit}').value;
       var EditOrgname = document.getElementById('{!$Component.Thepage:EditExhibitor:EditOrgName}').value; 
       var EditZipCode = document.getElementById('{!$Component.Thepage:EditExhibitor:EditZip}').value;
       var Edittable = document.getElementById('{!$Component.Thepage:EditExhibitor:EditBAtable}').value;      
        
         EditFirstName = EditFirstName.trim();
         EditLastName = EditLastName.trim();
         EditOrgname = EditOrgname.trim(); 
         Edittable = Edittable.trim();
                     
         if(Edittable == ""   )
    {
        alert("Please enter Booth Number");
      
        return false;
    }        
     
       if(EditFirstName == ""   )
    {
        alert("Please enter First Name");
      
        return false;
    }  
       
     if(EditLastName == ""   )
    {
        alert("Please enter Last Name");
        
        return false;
    }     
       
      
   
     if(EditOrgname == ""){
    alert("Please enter Organization name");
       
        return false;
    
    }
    
    
    
    if(EditZipCode != "")
             {
             if(validateZipCode(EditZipCode)== false){
                alert("Please enter a valid Zip Code");
                //EditZip.focus();
                return false;
                }
            }
    
   } 
   
      function callingChangeEventFunction(x){
        ChangeEventFunction(x);
    }
             
     function validateZipCode(elementname){
         var zipCodePattern = /^\d{5}$|^\d{5}-\d{4}$/;
        return zipCodePattern.test(elementname);
    } 
   
  </script>





<apex:stylesheet value="{!URLFOR($Resource.FormultiEvent,"css/screen.css")}"/> 
<apex:stylesheet value="{!URLFOR($Resource.FormultiEvent,"css/datePicker.css")}"/><!-----End --->
<div id="page-top-outer">    

<!-- Start: page-top -->
<div id="page-top">

    <!-- start logo -->
    <div id="logo">

    </div>
    <!-- end logo -->
    
    <!--  start top-search -->
    <div id="top-search">
        <table border="0" cellpadding="0" cellspacing="0">
        <tr>
        <td>        
        <font  Class="welcome">Welcome :</font>
                   <font class="username">{!$User.Firstname}&nbsp;{!$User.Lastname} </font></td>        
        </tr>
        <tr><td>
        <apex:outputLink value="https://boothleads.secure.force.com/MatchMaking/apex/MatchLeads_Eventspage" rendered="{!if(OR(($User.Username =='jclarke@gnemsdc.org'),($User.Username =='nwmillennium@optonline.net'),($User.Username =='demo.ea@globalnest.com'),($User.Username =='mcmillen@hartford.edu')),TRUE,FALSE)}" ><span  class="username"> Switch To MatchLeads</span>
        </apex:outputLink>
        </td></tr>
        </table>
    </div>
    <!--  end top-search -->
    <div class="clear"></div>

</div>
<!-- End: page-top -->

</div>
<!-- End: page-top-outer -->
    
<div class="clear">&nbsp;</div>
 
<!--  start nav-outer-repeat................................................................................................. START -->
<div class="nav-outer-repeat"> 
<!--  start nav-outer -->
<div class="nav-outer"> 

<!-- Start Nav Right-->
<div id="nav-right">          
        <!----LOGOUT ACTION -->
        <div class="nav">
        <div class="table">
        <apex:form >
        <div class="nav-divider">&nbsp;</div>
        <!--<apex:commandLink action="{!ProfileSettings}" style="text-style:bold; color:#FFFFFF; padding:10px 15px 0 0;" value="Profile"/>-->
        <apex:outputLink value="/apex/BL_Eventadmin_Profile?id={!selectEvent}" id="ProfileLink" style="text-style:bold; color:#FFFFFF; padding:10px 15px 0 0;">Profile</apex:outputLink>
        <div class="nav-divider">&nbsp;</div>
        <apex:commandLink action="{!$Site.Prefix}/secur/logout.jsp" rendered="{!NOT(ISPICKVAL($User.UserType,'Guest'))}" style="text-style:bold; color:#FFFFFF; padding:10px 15px 0 0;">{!$Label.site.logout}</apex:commandLink>
        <div class="nav-divider">&nbsp;</div>
       <!-- <apex:outputLink target="_new" value="/apex/Boothleads_Help_Booths" style="text-style:bold; color:#FFFFFF; padding:10px 15px 0 0;" >Help</apex:outputLink>-->
        </apex:form>
        </div></div>           
        <!----LOGOUT ACTION END--->
        <div class="clear">&nbsp; </div>        
        </div>
        <!-- end nav-right -->
        
        <!--  start nav -->
        <div class="nav">
        <div class="table">
  
         <!--<div class="nav-divider">&nbsp;</div>-->
          <ul class="select"><li><apex:outputLink value="/apex/BL_EA_Dashboard?id={!selectEvent}" id="Dashboard" ><b>Dashboard</b> </apex:outputLink></li></ul>
          <div class="nav-divider">&nbsp;</div>                    
          <ul class="select"><li>
          <apex:outputLink value="/apex/BL_EventAdmin_Events?id={!selectEvent}" id="Events"><b>Events</b></apex:outputLink></li></ul>
         
         <ul class="current"><li>
         <div class="nav-divider">&nbsp;</div>
         <apex:outputLink value="/apex/BL_Eventadmin_BoothAdmins?id={!selectEvent}" id="Booths"><b>Booths</b></apex:outputLink></li></ul>
          <div class="nav-divider">&nbsp;</div>
         <ul class="select"><li><apex:outputLink value="/apex/BL_Eventadmin_Attendees?id={!selectEvent}" id="Attendees"><b>Attendees</b> </apex:outputLink></li></ul>
         <div class="nav-divider">&nbsp;</div>
        
        <ul class="select"><li><apex:outputLink value="/apex/BL_EA_Reports?id={!selectEvent}" id="Reports"><b>Reports</b> </apex:outputLink>
        
        
        
        </li></ul>
        
        
   
        
        
        
        
        <div class="clear"></div>
        </div>
        <div class="clear"></div>
        </div>
        <!--  start nav -->
        

</div>
<div class="clear"></div>
<!--  start nav-outer -->
</div>
<!--  start nav-outer-repeat................................................... END -->
<div class="clear"></div>
<!-- start content-outer ........................................................................................................................START -->
<div id="content-outer">
 
<!-- start content -->
<div id="content">
    <!--  start page-heading -->
    
    <div id="page-heading">
    <apex:form id="Form1">
                 <table width="98%" border="0" cellpadding="0" cellspacing="0" style="margin:0px auto;">
                   
                      <td width="60%"> 
                        
                        <apex:outputLabel ><font size="2" color="Black">Events</font></apex:outputLabel>
                        
                          <apex:selectList size="1" multiselect="false" value="{!selectEvent}">
                          <apex:selectOptions value="{!eventslistforselect}"/>
                          
                         <apex:actionSupport event="onchange" status="AjaxLoader" reRender="ListOfBooths,ListofBoothAdmins,ButtonsForm,SelectedEventName,NoRecords,Attendees,Reports,Events,Dashboard,Booths,ProfileLink" action="{!commonMethod}"/>                       
                           </apex:selectList>&nbsp;&nbsp;
                           <!--<apex:outputtext value="{!DisplayNoEvent}" rendered="{!DisplayNoEventMessage }" style="color:#FF0000;Font-size:1.875em;font-style:italic;font-family:Times New Roman;"/> -->                     
                      
                            <div style="float:right; width:400px;">
                        
   <apex:outputPanel id="ButtonsForm"> 
<table align="right"><tr><td >
       
        <apex:outputLink value="/BL_matchmakingApprove?id={!selectEvent}" target="_blank" styleClass="awesome" style="text-decoration:none;">Match Making Approvals </apex:outputLink>  &nbsp; 

           <apex:commandButton value="Export Booth Admins"  styleClass="awesome" rendered="{!ExportBoothAdmins}" action="{!exportBoothadmins}"/> &nbsp;&nbsp;
      <!--<apex:commandButton value="Import Booths"  styleClass="awesome" />--> &nbsp;&nbsp;
        <apex:outputLink value="/FloorMap?eventid={!selectEvent}" target="_blank" styleClass="awesome" style="text-decoration:none;" rendered="{!HideFloorMapButton }">Floor Map</apex:outputLink> &nbsp;

       <apex:commandButton value="Add Booth"  styleClass="awesome" title="Add Booth" action="{!AddBooth}" rendered="{!HideBoothBtn}"/>&nbsp;&nbsp;
       <apex:commandButton value="Add Booth Admin" styleClass="awesome" title="Add Booth Admin"  action="{!AddBoothAdmin}" rendered="{!HideBoothAdminBtn}"/></td>
        
          </tr></table></apex:outputPanel>  
                    </div>                   
                           </td>
                           
             
        </table>           
   </apex:form></div> 
     
    
   
    <table border="0" width="100%" cellpadding="0" cellspacing="0" id="content-table">
    <tr>
        <th rowspan="3" class="sized">        
        <img src="{!URLFOR($Resource.QRCode_CSS,"css/images/shared/side_shadowleft.jpg")}" width="20" height="300" alt="" /></th>
        <th class="topleft"></th>
        <td align="right" valign="middle" id="tbl-border-top">&nbsp;</td>
        <th class="topright"></th>
        <th rowspan="3" class="sized">
        <img src="{!URLFOR($Resource.QRCode_CSS,"css/images/shared/side_shadowright.jpg")}" width="20" height="300" alt="" /></th>
    </tr>
    <tr>
        <td id="tbl-border-left"></td>
        <td>
        <!--  start content-table-inner ...................................................................... START -->
        <div id="content-table-inner">        
        <!--  start table-content  -->
        <div id="table-content">
          <table width="100%" >
  <tr>
      <td width="20%" style="background-color:#54b5f1; height:30px; color:#FFFFFF; Font-size:15px;padding-left:15px;border-right:3px solid #FFFFFF; font-weight:bold;"> Booths</td>
      <td width="80%" style="background-color:#54b5f1; height:30px; color:#FFFFFF; Font-size:15px;padding-left:15px; font-weight:bold;"> 
      <apex:outputText id="SelectedEventName" value="Booth Admins {!SelectedEventName} {!selectedBoothName }"></apex:outputText>
      
      </td>
     
  </tr>
  <tr>
      <td valign="top"> <div style="overflow:scroll; border:1px solid #CCCCCC;height:356px;">  <apex:form id="BoothForm">
      <apex:actionFunction action="{!ListOfBoothAdmins}" name="ChangeEventFunction" reRender="BoothForm,ListofBoothAdmins">
             <apex:param name="BoothName" value="" assignTo="{!BoothSelected}"/>
          </apex:actionFunction>    
        <apex:dataTable value="{!Booths}" var="UPdatedList"  style="width:100%;" border="0" styleClass="attendee" id="ListOfBooths">    
      <apex:column styleClass="{!IF( UPdatedList.id == selectedBooth , 'eventselect',  'eventtable' )}" onclick="callingChangeEventFunction('{!UPdatedList.id}');"  >
                <apex:commandLink value="{!UPdatedList.BT_Name__c}" style="font-weight:bold;text-decoration:none;font-size:12px;Padding-Left:15px; display:block; padding: 8px 0px 5px 8px;" reRender="ListofBoothAdmins,ButtonsForm,SelectedEventName,NoRecords"  status="AjaxLoader" action="{!ListOfBoothAdmins}">
                <apex:param value="{!UPdatedList.Id}"  name="BoothName"/>
                </apex:commandLink>    
            </apex:column>      
        </apex:datatable>
      </apex:form></div>
      </td>
 <td valign="top">
 
 
 <apex:form id="GridForm">
 
 <!--===============================================================START GRID==================================== --> 
 <apex:outputPanel id="ListofBoothAdmins">
 <script>

/*! tableSorter 2.8+ widgets - updated 11/9/2013
 *
 * Column Styles
 * Column Filters
 * Column Resizing
 * Sticky Header
 * UI Theme (generalized)
 * Save Sort
 * [ "columns", "filter", "resizable", "stickyHeaders", "uitheme", "saveSort" ]
 */
/*jshint browser:true, jquery:true, unused:false, loopfunc:true */
/*global jQuery: false, localStorage: false, navigator: false */
;(function($){
"use strict";
var ts = $.tablesorter = $.tablesorter || {};

ts.themes = {
    "bootstrap" : {
        table      : 'table table-bordered table-striped',
        caption    : 'caption',
        header     : 'bootstrap-header', // give the header a gradient background
        footerRow  : '',
        footerCells: '',
        icons      : '', // add "icon-white" to make them white; this icon class is added to the <i> in the header
        sortNone   : 'bootstrap-icon-unsorted',
        sortAsc    : 'icon-chevron-up glyphicon glyphicon-chevron-up',
        sortDesc   : 'icon-chevron-down glyphicon glyphicon-chevron-down',
        active     : '', // applied when column is sorted
        hover      : '', // use custom css here - bootstrap class may not override it
        filterRow  : '', // filter row class
        even       : '', // even row zebra striping
        odd        : ''  // odd row zebra striping
    },
    "jui" : {
        table      : 'ui-widget ui-widget-content ui-corner-all', // table classes
        caption    : 'ui-widget-content ui-corner-all',
        header     : 'ui-widget-header ui-corner-all ui-state-default', // header classes
        footerRow  : '',
        footerCells: '',
        icons      : 'ui-icon', // icon class added to the <i> in the header
        sortNone   : 'ui-icon-carat-2-n-s',
        sortAsc    : 'ui-icon-carat-1-n',
        sortDesc   : 'ui-icon-carat-1-s',
        active     : 'ui-state-active', // applied when column is sorted
        hover      : 'ui-state-hover',  // hover class
        filterRow  : '',
        even       : 'ui-widget-content', // even row zebra striping
        odd        : 'ui-state-default'   // odd row zebra striping
    }
};

// *** Store data in local storage, with a cookie fallback ***
/* IE7 needs JSON library for JSON.stringify - (http://caniuse.com/#search=json)
   if you need it, then include https://github.com/douglascrockford/JSON-js

   $.parseJSON is not available is jQuery versions older than 1.4.1, using older
   versions will only allow storing information for one page at a time

   // *** Save data (JSON format only) ***
   // val must be valid JSON... use http://jsonlint.com/ to ensure it is valid
   var val = { "mywidget" : "data1" }; // valid JSON uses double quotes
   // $.tablesorter.storage(table, key, val);
   $.tablesorter.storage(table, 'tablesorter-mywidget', val);

   // *** Get data: $.tablesorter.storage(table, key); ***
   v = $.tablesorter.storage(table, 'tablesorter-mywidget');
   // val may be empty, so also check for your data
   val = (v && v.hasOwnProperty('mywidget')) ? v.mywidget : '';
   alert(val); // "data1" if saved, or "" if not
*/
ts.storage = function(table, key, val, options){
    var d, k, ls = false, v = {},
    c = table.config,
    id = options && options.id || $(table).attr(options && options.group || 'data-table-group') || table.id || $('.tablesorter').index( $(table) ),
    url = options && options.url || $(table).attr(options && options.page || 'data-table-page') || c && c.fixedUrl || window.location.pathname;
    // https://gist.github.com/paulirish/5558557
    if ("localStorage" in window) {
        try {
            window.localStorage.setItem('_tmptest', 'temp');
            ls = true;
            window.localStorage.removeItem('_tmptest');
        } catch(e) {}
    }
    // *** get val ***
    if ($.parseJSON){
        if (ls){
            v = $.parseJSON(localStorage[key] || '{}');
        } else {
            k = document.cookie.split(/[;\s|=]/); // cookie
            d = $.inArray(key, k) + 1; // add one to get from the key to the value
            v = (d !== 0) ? $.parseJSON(k[d] || '{}') : {};
        }
    }
    // allow val to be an empty string to
    if ((val || val === '') && window.JSON && JSON.hasOwnProperty('stringify')){
        // add unique identifiers = url pathname > table ID/index on page > data
        if (!v[url]) {
            v[url] = {};
        }
        v[url][id] = val;
        // *** set val ***
        if (ls){
            localStorage[key] = JSON.stringify(v);
        } else {
            d = new Date();
            d.setTime(d.getTime() + (31536e+6)); // 365 days
            document.cookie = key + '=' + (JSON.stringify(v)).replace(/\"/g,'\"') + '; expires=' + d.toGMTString() + '; path=/';
        }
    } else {
        return v && v[url] ? v[url][id] : {};
    }
};

// Add a resize event to table headers
// **************************
ts.addHeaderResizeEvent = function(table, disable, options){
    var defaults = {
        timer : 250
    },
    o = $.extend({}, defaults, options),
    c = table.config,
    wo = c.widgetOptions,
    headers,
    checkSizes = function(){
        wo.resize_flag = true;
        headers = [];
        c.$headers.each(function(){
            var d = $.data(this, 'savedSizes') || [0,0], // fixes #394
                w = this.offsetWidth,
                h = this.offsetHeight;
            if (w !== d[0] || h !== d[1]) {
                $.data(this, 'savedSizes', [ w, h ]);
                headers.push(this);
            }
        });
        if (headers.length) { c.$table.trigger('resize', [ headers ]); }
        wo.resize_flag = false;
    };
    c.$headers.each(function(){
        $.data(this, 'savedSizes', [ this.offsetWidth, this.offsetHeight ]);
    });
    clearInterval(wo.resize_timer);
    if (disable) {
        wo.resize_flag = false;
        return false;
    }
    wo.resize_timer = setInterval(function(){
        if (wo.resize_flag) { return; }
        checkSizes();
    }, o.timer);
};

// Widget: General UI theme
// "uitheme" option in "widgetOptions"
// **************************
ts.addWidget({
    id: "uitheme",
    priority: 10,
    options: {
        uitheme : 'jui'
    },
    format: function(table, c, wo){
        var time, klass, $el, $tar,
            t = ts.themes,
            $t = c.$table,
            theme = c.theme !== 'default' ? c.theme : wo.uitheme || 'jui',
            o = t[ t[theme] ? theme : t[wo.uitheme] ? wo.uitheme : 'jui'],
            $h = c.$headers,
            sh = 'tr.' + (wo.stickyHeaders || 'tablesorter-stickyHeader'),
            rmv = o.sortNone + ' ' + o.sortDesc + ' ' + o.sortAsc;
        if (c.debug) { time = new Date(); }
        // initialization code - run once
        if (!$t.hasClass('tablesorter-' + theme) || c.theme === theme || !table.hasInitialized){
            // update zebra stripes
            if (o.even !== '') { wo.zebra[0] += ' ' + o.even; }
            if (o.odd !== '') { wo.zebra[1] += ' ' + o.odd; }
            // add caption style
            $t.find('caption').addClass(o.caption);
            // add table/footer class names
            t = $t
                // remove other selected themes; use widgetOptions.theme_remove
                .removeClass( c.theme === '' ? '' : 'tablesorter-' + c.theme )
                .addClass('tablesorter-' + theme + ' ' + o.table) // add theme widget class name
                .find('tfoot');
            if (t.length) {
                t
                .find('tr').addClass(o.footerRow)
                .children('th, td').addClass(o.footerCells);
            }
            // update header classes
            $h
                .addClass(o.header)
                .filter(':not(.sorter-false)')
                .bind('mouseenter.tsuitheme mouseleave.tsuitheme', function(e){
                    // toggleClass with switch added in jQuery 1.3
                    $(this)[ e.type === 'mouseenter' ? 'addClass' : 'removeClass' ](o.hover);
                });
            if (!$h.find('.tablesorter-wrapper').length) {
                // Firefox needs this inner div to position the icon/resizer correctly
                $h.wrapInner('<div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%"></div>');
            }
            if (c.cssIcon){
                // if c.cssIcon is '', then no <i> is added to the header
                $h.find('.' + ts.css.icon).addClass(o.icons);
            }
            if ($t.hasClass('hasFilters')){
                $h.find('.tablesorter-filter-row').addClass(o.filterRow);
            }
        }
        $.each($h, function(i){
            $el = $(this);
            $tar = (ts.css.icon) ? $el.find('.' + ts.css.icon) : $el;
            if (this.sortDisabled){
                // no sort arrows for disabled columns!
                $el.removeClass(rmv);
                $tar.removeClass(rmv + ' tablesorter-icon ' + o.icons);
            } else {
                t = ($t.hasClass('hasStickyHeaders')) ? $t.find(sh).find('th').eq(i).add($el) : $el;
                klass = ($el.hasClass(ts.css.sortAsc)) ? o.sortAsc : ($el.hasClass(ts.css.sortDesc)) ? o.sortDesc : $el.hasClass(ts.css.header) ? o.sortNone : '';
                $el[klass === o.sortNone ? 'removeClass' : 'addClass'](o.active);
                $tar.removeClass(rmv).addClass(klass);
            }
        });
        if (c.debug){
            ts.benchmark("Applying " + theme + " theme", time);
        }
    },
    remove: function(table, c, wo){
        var $t = c.$table,
            theme = typeof wo.uitheme === 'object' ? 'jui' : wo.uitheme || 'jui',
            o = typeof wo.uitheme === 'object' ? wo.uitheme : ts.themes[ ts.themes.hasOwnProperty(theme) ? theme : 'jui'],
            $h = $t.children('thead').children(),
            rmv = o.sortNone + ' ' + o.sortDesc + ' ' + o.sortAsc;
        $t
            .removeClass('tablesorter-' + theme + ' ' + o.table)
            .find(ts.css.header).removeClass(o.header);
        $h
            .unbind('mouseenter.tsuitheme mouseleave.tsuitheme') // remove hover
            .removeClass(o.hover + ' ' + rmv + ' ' + o.active)
            .find('.tablesorter-filter-row').removeClass(o.filterRow);
        $h.find('.tablesorter-icon').removeClass(o.icons);
    }
});

// Widget: Column styles
// "columns", "columns_thead" (true) and
// "columns_tfoot" (true) options in "widgetOptions"
// **************************
ts.addWidget({
    id: "columns",
    priority: 30,
    options : {
        columns : [ "primary", "secondary", "tertiary" ]
    },
    format: function(table, c, wo){
        var $tb, $tr, $td, $t, time, last, rmv, i, k, l,
        $tbl = c.$table,
        b = c.$tbodies,
        list = c.sortList,
        len = list.length,
        // keep backwards compatibility, for now
        css = (c.widgetColumns && c.widgetColumns.hasOwnProperty('css')) ? c.widgetColumns.css || css :
            (wo && wo.hasOwnProperty('columns')) ? wo.columns || css : css;
        last = css.length-1;
        rmv = css.join(' ');
        if (c.debug){
            time = new Date();
        }
        // check if there is a sort (on initialization there may not be one)
        for (k = 0; k < b.length; k++ ){
            $tb = ts.processTbody(table, b.eq(k), true); // detach tbody
            $tr = $tb.children('tr');
            l = $tr.length;
            // loop through the visible rows
            $tr.each(function(){
                $t = $(this);
                if (this.style.display !== 'none'){
                    // remove all columns class names
                    $td = $t.children().removeClass(rmv);
                    // add appropriate column class names
                    if (list && list[0]){
                        // primary sort column class
                        $td.eq(list[0][0]).addClass(css[0]);
                        if (len > 1){
                            for (i = 1; i < len; i++){
                                // secondary, tertiary, etc sort column classes
                                $td.eq(list[i][0]).addClass( css[i] || css[last] );
                            }
                        }
                    }
                }
            });
            ts.processTbody(table, $tb, false);
        }
        // add classes to thead and tfoot
        $tr = wo.columns_thead !== false ? ['thead tr'] : [];
        if (wo.columns_tfoot !== false) {
            $tr.push('tfoot tr');
        }
        if ($tr.length) {
            $t = $tbl.find($tr.join(',')).children().removeClass(rmv);
            if (len){
                for (i = 0; i < len; i++){
                    // add primary. secondary, tertiary, etc sort column classes
                    $t.filter('[data-column="' + list[i][0] + '"]').addClass(css[i] || css[last]);
                }
            }
        }
        if (c.debug){
            ts.benchmark("Applying Columns widget", time);
        }
    },
    remove: function(table, c, wo){
        var k, $tb,
            b = c.$tbodies,
            rmv = (wo.columns || [ "primary", "secondary", "tertiary" ]).join(' ');
        c.$headers.removeClass(rmv);
        c.$table.children('tfoot').children('tr').children('th, td').removeClass(rmv);
        for (k = 0; k < b.length; k++ ){
            $tb = ts.processTbody(table, b.eq(k), true); // remove tbody
            $tb.children('tr').each(function(){
                $(this).children().removeClass(rmv);
            });
            ts.processTbody(table, $tb, false); // restore tbody
        }
    }
});

// Widget: filter
// **************************
ts.addWidget({
    id: "filter",
    priority: 50,
    options : {
        filter_anyMatch      : false, // if true overrides default find rows behaviours and if any column matches query it returns that row
        filter_childRows     : false, // if true, filter includes child row content in the search
        filter_columnFilters : true,  // if true, a filter will be added to the top of each table column
        filter_cssFilter     : '',    // css class name added to the filter row & each input in the row (tablesorter-filter is ALWAYS added)
        filter_filteredRow   : 'filtered', // class added to filtered rows; needed by pager plugin
        filter_formatter     : null,  // add custom filter elements to the filter row
        filter_functions     : null,  // add custom filter functions using this option
        filter_hideFilters   : false, // collapse filter row when mouse leaves the area
        filter_ignoreCase    : true,  // if true, make all searches case-insensitive
        filter_liveSearch    : true,  // if true, search column content while the user types (with a delay)
        filter_onlyAvail     : 'filter-onlyAvail', // a header with a select dropdown & this class name will only show available (visible) options within the drop down
        filter_reset         : null,  // jQuery selector string of an element used to reset the filters
        filter_searchDelay   : 300,   // typing delay in milliseconds before starting a search
        filter_startsWith    : false, // if true, filter start from the beginning of the cell contents
        filter_useParsedData : false, // filter all data using parsed content
        filter_serversideFiltering : false, // if true, server-side filtering should be performed because client-side filtering will be disabled, but the ui and events will still be used.
        filter_defaultAttrib : 'data-value' // data attribute in the header cell that contains the default filter value
    },
    format: function(table, c, wo) {
        if (!c.$table.hasClass('hasFilters')) {
            if (c.parsers || !c.parsers && wo.filter_serversideFiltering) {
                ts.filter.init(table, c, wo);
            }
        }
    },
    remove: function(table, c, wo) {
        var tbodyIndex, $tbody,
            $table = c.$table,
            $tbodies = c.$tbodies;
        $table
            .removeClass('hasFilters')
            // add .tsfilter namespace to all BUT search
            .unbind('addRows updateCell update updateComplete appendCache search filterStart filterEnd '.split(' ').join('.tsfilter '))
            .find('.tablesorter-filter-row').remove();
        for (tbodyIndex = 0; tbodyIndex < $tbodies.length; tbodyIndex++ ) {
            $tbody = ts.processTbody(table, $tbodies.eq(tbodyIndex), true); // remove tbody
            $tbody.children().removeClass(wo.filter_filteredRow).show();
            ts.processTbody(table, $tbody, false); // restore tbody
        }
        if (wo.filter_reset) {
            $(document).undelegate(wo.filter_reset, 'click.tsfilter');
        }
    }
});

ts.filter = {

    // regex used in filter "check" functions - not for general use and not documented
    regex: {
        regex     : /^\/((?:\\\/|[^\/])+)\/([mig]{0,3})?$/, // regex to test for regex
        child     : /tablesorter-childRow/, // child row class name; this gets updated in the script
        filtered  : /filtered/, // filtered (hidden) row class name; updated in the script
        type      : /undefined|number/, // check type
        exact     : /(^[\"|\'|=]+)|([\"|\'|=]+$)/g, // exact match (allow '==')
        nondigit  : /[^\w,. \-()]/g, // replace non-digits (from digit & currency parser)
        operators : /[<>=]/g // replace operators
    },
        // function( filter, iFilter, exact, iExact, cached, index, table, wo, parsed )
        // filter = array of filter input values; iFilter = same array, except lowercase
        // exact = table cell text (or parsed data if column parser enabled)
        // iExact = same as exact, except lowercase
        // cached = table cell text from cache, so it has been parsed
        // index = column index; table = table element (DOM)
        // wo = widget options (table.config.widgetOptions)
        // parsed = array (by column) of boolean values (from filter_useParsedData or "filter-parsed" class)
    types: {
        // Look for regex
        regex: function( filter, iFilter, exact, iExact ) {
            if ( ts.filter.regex.regex.test(iFilter) ) {
                var matches,
                    regex = ts.filter.regex.regex.exec(iFilter);
                try {
                    matches = new RegExp(regex[1], regex[2]).test( iExact );
                } catch (error) {
                    matches = false;
                }
                return matches;
            }
            return null;
        },
        // Look for quotes or equals to get an exact match; ignore type since iExact could be numeric
        exact: function( filter, iFilter, exact, iExact ) {
            /*jshint eqeqeq:false */
            if ( iFilter.replace(ts.filter.regex.exact, '') == iExact ) {
                return true;
            }
            return null;
        },
        // Look for a not match
        notMatch: function( filter, iFilter, exact, iExact, cached, index, table, wo ) {
            if ( /^\!/.test(iFilter) ) {
                iFilter = iFilter.replace('!', '');
                var indx = iExact.search( $.trim(iFilter) );
                return iFilter === '' ? true : !(wo.filter_startsWith ? indx === 0 : indx >= 0);
            }
            return null;
        },
        // Look for operators >, >=, < or <=
        operators: function( filter, iFilter, exact, iExact, cached, index, table, wo, parsed ) {
            if ( /^[<>]=?/.test(iFilter) ) {
                var cachedValue, result,
                    c = table.config,
                    query = ts.formatFloat( iFilter.replace(ts.filter.regex.operators, ''), table ),
                    parser = c.parsers[index],
                    savedSearch = query;
                    // parse filter value in case we're comparing numbers (dates)
                if (parsed[index] || parser.type === 'numeric') {
                    cachedValue = parser.format( '' + iFilter.replace(ts.filter.regex.operators, ''), table, c.$headers.eq(index), index );
                    query = ( typeof query === "number" && cachedValue !== '' && !isNaN(cachedValue) ) ? cachedValue : query;
                }
                // iExact may be numeric - see issue #149;
                // check if cached is defined, because sometimes j goes out of range? (numeric columns)
                cachedValue = ( parsed[index] || parser.type === 'numeric' ) && !isNaN(query) && cached ? cached :
                    isNaN(iExact) ? ts.formatFloat( iExact.replace(ts.filter.regex.nondigit, ''), table) :
                    ts.formatFloat( iExact, table );
                if ( />/.test(iFilter) ) { result = />=/.test(iFilter) ? cachedValue >= query : cachedValue > query; }
                if ( /</.test(iFilter) ) { result = /<=/.test(iFilter) ? cachedValue <= query : cachedValue < query; }
                // keep showing all rows if nothing follows the operator
                if ( !result && savedSearch === '' ) { result = true; }
                return result;
            }
            return null;
        },
        // Look for an AND or && operator (logical and)
        and : function( filter, iFilter, exact, iExact ) {
            if ( /\s+(AND|&&)\s+/g.test(filter) ) {
                var query = iFilter.split( /(?:\s+(?:and|&&)\s+)/g ),
                    result = iExact.search( $.trim(query[0]) ) >= 0,
                    indx = query.length - 1;
                while (result && indx) {
                    result = result && iExact.search( $.trim(query[indx]) ) >= 0;
                    indx--;
                }
                return result;
            }
            return null;
        },
        // Look for a range (using " to " or " - ") - see issue #166; thanks matzhu!
        range : function( filter, iFilter, exact, iExact, cached, index, table, wo, parsed ) {
            if ( /\s+(-|to)\s+/.test(iFilter) ) {
                var result,
                    c = table.config,
                    query = iFilter.split(/(?: - | to )/), // make sure the dash is for a range and not indicating a negative number
                    range1 = ts.formatFloat(query[0].replace(ts.filter.regex.nondigit, ''), table),
                    range2 = ts.formatFloat(query[1].replace(ts.filter.regex.nondigit, ''), table);
                    // parse filter value in case we're comparing numbers (dates)
                if (parsed[index] || c.parsers[index].type === 'numeric') {
                    result = c.parsers[index].format('' + query[0], table, c.$headers.eq(index), index);
                    range1 = (result !== '' && !isNaN(result)) ? result : range1;
                    result = c.parsers[index].format('' + query[1], table, c.$headers.eq(index), index);
                    range2 = (result !== '' && !isNaN(result)) ? result : range2;
                }
                result = ( parsed[index] || c.parsers[index].type === 'numeric' ) && !isNaN(range1) && !isNaN(range2) ? cached :
                    isNaN(iExact) ? ts.formatFloat( iExact.replace(ts.filter.regex.nondigit, ''), table) :
                    ts.formatFloat( iExact, table );
                if (range1 > range2) { result = range1; range1 = range2; range2 = result; } // swap
                return (result >= range1 && result <= range2) || (range1 === '' || range2 === '');
            }
            return null;
        },
        // Look for wild card: ? = single, * = multiple, or | = logical OR
        wild : function( filter, iFilter, exact, iExact, cached, index, table ) {
            if ( /[\?|\*]/.test(iFilter) || /\s+OR\s+/.test(filter) ) {
                var c = table.config,
                    query = iFilter.replace(/\s+OR\s+/gi,"|");
                // look for an exact match with the "or" unless the "filter-match" class is found
                if (!c.$headers.filter('[data-column="' + index + '"]:last').hasClass('filter-match') && /\|/.test(query)) {
                    query = '^(' + query + ')$';
                }
                return new RegExp( query.replace(/\?/g, '\\S{1}').replace(/\*/g, '\\S*') ).test(iExact);
            }
            return null;
        },
        // fuzzy text search; modified from https://github.com/mattyork/fuzzy (MIT license)
        fuzzy: function( filter, iFilter, exact, iExact ) {
            if ( /^~/.test(iFilter) ) {
                var indx,
                    patternIndx = 0,
                    len = iExact.length,
                    pattern = iFilter.slice(1);
                for (indx = 0; indx < len; indx++) {
                    if (iExact[indx] === pattern[patternIndx]) {
                        patternIndx += 1;
                    }
                }
                if (patternIndx === pattern.length) {
                    return true;
                }
                return false;
            }
            return null;
        }
    },
    init: function(table, c, wo) {
        var options, string, $header, column, filters, time;
        if (c.debug) {
            time = new Date();
        }
        c.$table.addClass('hasFilters');

        ts.filter.regex.child = new RegExp(c.cssChildRow);
        ts.filter.regex.filtered = new RegExp(wo.filter_filteredRow);

        // don't build filter row if columnFilters is false or all columns are set to "filter-false" - issue #156
        if (wo.filter_columnFilters !== false && c.$headers.filter('.filter-false').length !== c.$headers.length) {
            // build filter row
            ts.filter.buildRow(table, c, wo);
        }

        c.$table.bind('addRows updateCell update updateRows updateComplete appendCache filterReset filterEnd search '.split(' ').join('.tsfilter '), function(event, filter) {
            if ( !/(search|filterReset|filterEnd)/.test(event.type) ) {
                event.stopPropagation();
                ts.filter.buildDefault(table, true);
            }
            if (event.type === 'filterReset') {
                ts.filter.searching(table, []);
            }
            if (event.type === 'filterEnd') {
                ts.filter.buildDefault(table, true);
            } else {
                // send false argument to force a new search; otherwise if the filter hasn't changed, it will return
                filter = event.type === 'search' ? filter : event.type === 'updateComplete' ? c.$table.data('lastSearch') : '';
                ts.filter.searching(table, filter);
            }
            return false;
        });
        ts.filter.bindSearch( table, c.$table.find('input.tablesorter-filter') );

        // reset button/link
        if (wo.filter_reset) {
            $(document).delegate(wo.filter_reset, 'click.tsfilter', function() {
                ts.filter.searching(table, []);
            });
        }
        if (wo.filter_functions) {
            // column = column # (string)
            for (column in wo.filter_functions) {
                if (wo.filter_functions.hasOwnProperty(column) && typeof column === 'string') {
                    $header = c.$headers.filter('[data-column="' + column + '"]:last');
                    options = '';
                    if (wo.filter_functions[column] === true && !$header.hasClass('filter-false')) {
                        ts.filter.buildSelect(column);
                    } else if (typeof column === 'string' && !$header.hasClass('filter-false')) {
                        // add custom drop down list
                        for (string in wo.filter_functions[column]) {
                            if (typeof string === 'string') {
                                options += options === '' ?
                                    '<option value="">' + ($header.data('placeholder') || $header.attr('data-placeholder') ||  '') + '</option>' : '';
                                options += '<option value="' + string + '">' + string + '</option>';
                            }
                        }
                        c.$table.find('thead').find('select.tablesorter-filter[data-column="' + column + '"]').append(options);
                    }
                }
            }
        }
        // not really updating, but if the column has both the "filter-select" class & filter_functions set to true,
        // it would append the same options twice.
        ts.filter.buildDefault(table, true);

        c.$table.find('select.tablesorter-filter').bind('change search', function(event, filter) {
            ts.filter.checkFilters(table, filter);
        });

        if (wo.filter_hideFilters) {
            ts.filter.hideFilters(table, c, wo);
        }

        // show processing icon
        if (c.showProcessing) {
            c.$table.bind('filterStart.tsfilter filterEnd.tsfilter', function(event, columns) {
                // only add processing to certain columns to all columns
                $header = (columns) ? c.$table.find('.' + ts.css.header).filter('[data-column]').filter(function() {
                    return columns[$(this).data('column')] !== '';
                }) : '';
                ts.isProcessing(table, event.type === 'filterStart', columns ? $header : '');
            });
        }
        if (c.debug) {
            ts.benchmark("Applying Filter widget", time);
        }
        // add default values
        c.$table.bind('tablesorter-initialized pagerInitialized', function() {
            filters = ts.filter.setDefaults(table, c, wo) || [];
            if (filters.length) {
                ts.setFilters(table, filters, true);
            }
        });
        // filter widget initialized
        wo.filter_Initialized = true;
        c.$table.trigger('filterInit');
        ts.filter.checkFilters(table);
    },
    setDefaults: function(table, c, wo){
        var indx,
            filters = [],
            columns = c.columns;
        for (indx = 0; indx < columns; indx++) {
            filters[indx] = c.$headers.filter('[data-column="' + indx + '"]:last').attr(wo.filter_defaultAttrib) || filters[indx];
        }
        $(table).data('lastSearch', filters);
        return filters;
    },
    buildRow: function(table, c, wo) {
        var column, $header, buildSelect, disabled,
            // c.columns defined in computeThIndexes()
            columns = c.columns,
            buildFilter = '<tr class="tablesorter-filter-row">';
        for (column = 0; column < columns; column++) {
            buildFilter += '<td></td>';
        }
        c.$filters = $(buildFilter += '</tr>').appendTo( c.$table.find('thead').eq(0) ).find('td');
        // build each filter input
        for (column = 0; column < columns; column++) {
            disabled = false;
            // assuming last cell of a column is the main column
            $header = c.$headers.filter('[data-column="' + column + '"]:last');
            buildSelect = (wo.filter_functions && wo.filter_functions[column] && typeof wo.filter_functions[column] !== 'function') ||
                $header.hasClass('filter-select');
            // get data from jQuery data, metadata, headers option or header class name
            if (ts.getData) {
                // get data from jQuery data, metadata, headers option or header class name
                disabled = ts.getData($header[0], c.headers[column], 'filter') === 'false';
            } else {
                // only class names and header options - keep this for compatibility with tablesorter v2.0.5
                disabled = (c.headers[column] && c.headers[column].hasOwnProperty('filter') && c.headers[column].filter === false) ||
                    $header.hasClass('filter-false');
            }
            if (buildSelect) {
                buildFilter = $('<select>').appendTo( c.$filters.eq(column) );
            } else {
                if (wo.filter_formatter && $.isFunction(wo.filter_formatter[column])) {
                    buildFilter = wo.filter_formatter[column]( c.$filters.eq(column), column );
                    // no element returned, so lets go find it
                    if (buildFilter && buildFilter.length === 0) {
                        buildFilter = c.$filters.eq(column).children('input');
                    }
                    // element not in DOM, so lets attach it
                    if ( buildFilter && (buildFilter.parent().length === 0 ||
                        (buildFilter.parent().length && buildFilter.parent()[0] !== c.$filters[column])) ) {
                        c.$filters.eq(column).append(buildFilter);
                    }
                } else {
                    buildFilter = $('<input type="search">').appendTo( c.$filters.eq(column) );
                }
                if (buildFilter) {
                    buildFilter.attr('placeholder', $header.data('placeholder') || $header.attr('data-placeholder') || '');
                }
            }
            if (buildFilter) {
                buildFilter.addClass('tablesorter-filter ' + wo.filter_cssFilter).attr('data-column', column);
                if (disabled) {
                    buildFilter.addClass('disabled')[0].disabled = true; // disabled!
                }
            }
        }
    },
    bindSearch: function(table, $el) {
        table = $(table)[0];
        var external, wo = table.config.widgetOptions;
        $el.bind('keyup search', function(event, filter) {
            // emulate what webkit does.... escape clears the filter
            if (event.which === 27) {
                this.value = '';
            // liveSearch can contain a min value length; ignore arrow and meta keys, but allow backspace
            } else if ( (typeof wo.filter_liveSearch === 'number' && this.value.length < wo.filter_liveSearch && this.value !== '') ||
                ( event.type === 'keyup' && ( (event.which < 32 && event.which !== 8 && wo.filter_liveSearch === true && event.which !== 13) ||
                ( event.which >= 37 && event.which <= 40 ) || (event.which !== 13 && wo.filter_liveSearch === false) ) ) ) {
                    return;
            }
            // external searches won't have a filter parameter, so grab the value
            external = $(this).hasClass('tablesorter-filter') ? filter : [ $(this).val() ];
            ts.filter.searching(table, filter, external);
        });
    },
    checkFilters: function(table, filter) {
        var c = table.config,
            wo = c.widgetOptions,
            filterArray = $.isArray(filter),
            filters = (filterArray) ? filter : ts.getFilters(table),
            combinedFilters = (filters || []).join(''); // combined filter values
        // add filter array back into inputs
        if (filterArray) {
            ts.setFilters( table, filters );
        }
        if (wo.filter_hideFilters) {
            // show/hide filter row as needed
            c.$table.find('.tablesorter-filter-row').trigger( combinedFilters === '' ? 'mouseleave' : 'mouseenter' );
        }
        // return if the last search is the same; but filter === false when updating the search
        // see example-widget-filter.html filter toggle buttons
        if (c.lastCombinedFilter === combinedFilters && filter !== false) { return; }
        c.$table.trigger('filterStart', [filters]);
        if (c.showProcessing) {
            // give it time for the processing icon to kick in
            setTimeout(function() {
                ts.filter.findRows(table, filters, combinedFilters);
                return false;
            }, 30);
        } else {
            ts.filter.findRows(table, filters, combinedFilters);
            return false;
        }
    },
    hideFilters: function(table, c, wo) {
        var $filterRow, $filterRow2, timer;
        c.$table
            .find('.tablesorter-filter-row')
            .addClass('hideme')
            .bind('mouseenter mouseleave', function(e) {
                // save event object - http://bugs.jquery.com/ticket/12140
                var event = e;
                $filterRow = $(this);
                clearTimeout(timer);
                timer = setTimeout(function() {
                    if ( /enter|over/.test(event.type) ) {
                        $filterRow.removeClass('hideme');
                    } else {
                        // don't hide if input has focus
                        // $(':focus') needs jQuery 1.6+
                        if ( $(document.activeElement).closest('tr')[0] !== $filterRow[0] ) {
                            // don't hide row if any filter has a value
                            if (ts.getFilters(table).join('') === '') {
                                $filterRow.addClass('hideme');
                            }
                        }
                    }
                }, 200);
            })
            .find('input, select').bind('focus blur', function(e) {
                $filterRow2 = $(this).closest('tr');
                clearTimeout(timer);
                var event = e;
                timer = setTimeout(function() {
                    // don't hide row if any filter has a value
                    if (ts.getFilters(table).join('') === '') {
                        $filterRow2[ event.type === 'focus' ? 'removeClass' : 'addClass']('hideme');
                    }
                }, 200);
            });
    },
    findRows: function(table, filters, combinedFilters) {
        var cached, len, $rows, rowIndex, tbodyIndex, $tbody, $cells, columnIndex,
            childRow, childRowText, exact, iExact, iFilter, lastSearch, matches, result,
            searchFiltered, filterMatched, showRow, time,
            c = table.config,
            wo = c.widgetOptions,
            columns = c.columns,
            $tbodies = c.$tbodies,
            // anyMatch really screws up with these types of filters
            anyMatchNotAllowedTypes = [ 'range',  'operators' ],
            // parse columns after formatter, in case the class is added at that point
            parsed = c.$headers.map(function(columnIndex) {
                return (ts.getData) ? 
                    ts.getData(c.$headers.filter('[data-column="' + columnIndex + '"]:last'), c.headers[columnIndex], 'filter') === 'parsed' :
                    $(this).hasClass('filter-parsed');
            }).get();
        if (c.debug) { time = new Date(); }
        for (tbodyIndex = 0; tbodyIndex < $tbodies.length; tbodyIndex++ ) {
            if ($tbodies.eq(tbodyIndex).hasClass(ts.css.info)) { continue; } // ignore info blocks, issue #264
            $tbody = ts.processTbody(table, $tbodies.eq(tbodyIndex), true);
            $rows = $tbody.children('tr').not('.' + c.cssChildRow).not('.group-header');
            len = $rows.length;
            if (combinedFilters === '' || wo.filter_serversideFiltering) {
                $tbody.children().show().removeClass(wo.filter_filteredRow);
            } else {
                // optimize searching only through already filtered rows - see #313
                searchFiltered = true;
                lastSearch = c.lastSearch || c.$table.data('lastSearch') || [];
                $.each(filters, function(indx, val) {
                    // check for changes from beginning of filter; but ignore if there is a logical "or" in the string
                    searchFiltered = (val || '').indexOf(lastSearch[indx] || '') === 0 && searchFiltered && !/(\s+or\s+|\|)/g.test(val || '');
                });
                // can't search when all rows are hidden - this happens when looking for exact matches
                if (searchFiltered && $rows.filter(':visible').length === 0) { searchFiltered = false; }
                // loop through the rows
                for (rowIndex = 0; rowIndex < len; rowIndex++) {
                    childRow = $rows[rowIndex].className;
                    // skip child rows & already filtered rows
                    if ( ts.filter.regex.child.test(childRow) || (searchFiltered && ts.filter.regex.filtered.test(childRow)) ) { continue; }
                    showRow = true;
                    // *** nextAll/nextUntil not supported by Zepto! ***
                    childRow = $rows.eq(rowIndex).nextUntil('tr:not(.' + c.cssChildRow + ')');
                    // so, if "table.config.widgetOptions.filter_childRows" is true and there is
                    // a match anywhere in the child row, then it will make the row visible
                    // checked here so the option can be changed dynamically
                    childRowText = (childRow.length && wo.filter_childRows) ? childRow.text() : '';
                    childRowText = wo.filter_ignoreCase ? childRowText.toLocaleLowerCase() : childRowText;
                    $cells = $rows.eq(rowIndex).children('td');
                    for (columnIndex = 0; columnIndex < columns; columnIndex++) {
                        // ignore if filter is empty or disabled
                        if (filters[columnIndex] || wo.filter_anyMatch) {
                            cached = c.cache[tbodyIndex].normalized[rowIndex][columnIndex];
                            // check if column data should be from the cell or from parsed data
                            if (wo.filter_useParsedData || parsed[columnIndex]) {
                                exact = cached;
                            } else {
                            // using older or original tablesorter
                                exact = $.trim($cells.eq(columnIndex).text());
                                exact = c.sortLocaleCompare ? ts.replaceAccents(exact) : exact; // issue #405
                            }
                            iExact = !ts.filter.regex.type.test(typeof exact) && wo.filter_ignoreCase ? exact.toLocaleLowerCase() : exact;
                            result = showRow; // if showRow is true, show that row

                            if (typeof filters[columnIndex] === "undefined" || filters[columnIndex] === null) {
                                filters[columnIndex] = wo.filter_anyMatch ? combinedFilters : filters[columnIndex];
                            }

                            // replace accents - see #357
                            filters[columnIndex] = c.sortLocaleCompare ? ts.replaceAccents(filters[columnIndex]) : filters[columnIndex];
                            // val = case insensitive, filters[columnIndex] = case sensitive
                            iFilter = wo.filter_ignoreCase ? filters[columnIndex].toLocaleLowerCase() : filters[columnIndex];
                            if (wo.filter_functions && wo.filter_functions[columnIndex]) {
                                if (wo.filter_functions[columnIndex] === true) {
                                    // default selector; no "filter-select" class
                                    result = (c.$headers.filter('[data-column="' + columnIndex + '"]:last').hasClass('filter-match')) ?
                                        iExact.search(iFilter) >= 0 : filters[columnIndex] === exact;
                                } else if (typeof wo.filter_functions[columnIndex] === 'function') {
                                    // filter callback( exact cell content, parser normalized content, filter input value, column index, jQuery row object )
                                    result = wo.filter_functions[columnIndex](exact, cached, filters[columnIndex], columnIndex, $rows.eq(rowIndex));
                                } else if (typeof wo.filter_functions[columnIndex][filters[columnIndex]] === 'function') {
                                    // selector option function
                                    result = wo.filter_functions[columnIndex][filters[columnIndex]](exact, cached, filters[columnIndex], columnIndex, $rows.eq(rowIndex));
                                }
                            } else {
                                filterMatched = null;
                                // cycle through the different filters
                                // filters return a boolean or null if nothing matches
                                $.each(ts.filter.types, function(type, typeFunction) {
                                    if (!wo.filter_anyMatch || (wo.filter_anyMatch && anyMatchNotAllowedTypes.indexOf(type) < 0)) {
                                        matches = typeFunction( filters[columnIndex], iFilter, exact, iExact, cached, columnIndex, table, wo, parsed );
                                        if (matches !== null) {
                                            filterMatched = matches;
                                            return false;
                                        }
                                    }
                                });
                                if (filterMatched !== null) {
                                    result = filterMatched;
                                // Look for match, and add child row data for matching
                                } else {
                                    exact = (iExact + childRowText).indexOf(iFilter);
                                    result = ( (!wo.filter_startsWith && exact >= 0) || (wo.filter_startsWith && exact === 0) );
                                }
                            }
                            if (wo.filter_anyMatch) {
                                showRow = result;
                                if (showRow){
                                    break;
                                }
                            } else {
                                showRow = (result) ? showRow : false;
                            }
                        }
                    }
                    $rows[rowIndex].style.display = (showRow ? '' : 'none');
                    $rows.eq(rowIndex)[showRow ? 'removeClass' : 'addClass'](wo.filter_filteredRow);
                    if (childRow.length) {
                        if (c.pager && c.pager.countChildRows || wo.pager_countChildRows) {
                            childRow[showRow ? 'removeClass' : 'addClass'](wo.filter_filteredRow); // see issue #396
                        }
                        childRow.toggle(showRow);
                    }
                }
            }
            ts.processTbody(table, $tbody, false);
        }
        c.lastCombinedFilter = combinedFilters; // save last search
        c.lastSearch = filters;
        c.$table.data('lastSearch', filters);
        if (c.debug) {
            ts.benchmark("Completed filter widget search", time);
        }
        c.$table.trigger('applyWidgets'); // make sure zebra widget is applied
        c.$table.trigger('filterEnd');
    },
    buildSelect: function(table, column, updating, onlyavail) {
        column = parseInt(column, 10);
        var indx, rowIndex, tbodyIndex, len, currentValue, txt,
            c = table.config,
            wo = c.widgetOptions,
            $tbodies = c.$tbodies,
            arry = [],
            node = c.$headers.filter('[data-column="' + column + '"]:last'),
            // t.data('placeholder') won't work in jQuery older than 1.4.3
            options = '<option value="">' + ( node.data('placeholder') || node.attr('data-placeholder') || '' ) + '</option>';
        for (tbodyIndex = 0; tbodyIndex < $tbodies.length; tbodyIndex++ ) {
            len = c.cache[tbodyIndex].row.length;
            // loop through the rows
            for (rowIndex = 0; rowIndex < len; rowIndex++) {
                // check if has class filtered
                if (onlyavail && c.cache[tbodyIndex].row[rowIndex][0].className.match(wo.filter_filteredRow)) { continue; }
                // get non-normalized cell content
                if (wo.filter_useParsedData) {
                    arry.push( '' + c.cache[tbodyIndex].normalized[rowIndex][column] );
                } else {
                    node = c.cache[tbodyIndex].row[rowIndex][0].cells[column];
                    if (node) {
                        arry.push( $.trim( node.textContent || node.innerText || $(node).text() ) );
                    }
                }
            }
        }
        // get unique elements and sort the list
        // if $.tablesorter.sortText exists (not in the original tablesorter),
        // then natural sort the list otherwise use a basic sort
        arry = $.grep(arry, function(value, indx) {
            return $.inArray(value, arry) === indx;
        });
        arry = (ts.sortNatural) ? arry.sort(function(a, b) { return ts.sortNatural(a, b); }) : arry.sort(true);

        // Get curent filter value
        currentValue = c.$table.find('thead').find('select.tablesorter-filter[data-column="' + column + '"]').val();

        // build option list
        for (indx = 0; indx < arry.length; indx++) {
            txt = arry[indx].replace(/\"/g, "&quot;");
            // replace quotes - fixes #242 & ignore empty strings - see http://stackoverflow.com/q/14990971/145346
            options += arry[indx] !== '' ? '<option value="' + txt + '"' + (currentValue === txt ? ' selected="selected"' : '') +
                '>' + arry[indx] + '</option>' : '';
        }
        c.$table.find('thead').find('select.tablesorter-filter[data-column="' + column + '"]')[ updating ? 'html' : 'append' ](options);
    },
    buildDefault: function(table, updating) {
        var columnIndex, $header,
            c = table.config,
            wo = c.widgetOptions,
            columns = c.columns;
        // build default select dropdown
        for (columnIndex = 0; columnIndex < columns; columnIndex++) {
            $header = c.$headers.filter('[data-column="' + columnIndex + '"]:last');
            // look for the filter-select class; build/update it if found
            if (($header.hasClass('filter-select') || wo.filter_functions && wo.filter_functions[columnIndex] === true) &&
                !$header.hasClass('filter-false')) {
                if (!wo.filter_functions) { wo.filter_functions = {}; }
                wo.filter_functions[columnIndex] = true; // make sure this select gets processed by filter_functions
                ts.filter.buildSelect(table, columnIndex, updating, $header.hasClass(wo.filter_onlyAvail));
            }
        }
    },
    searching: function(table, filter, external) {
        if (typeof filter === 'undefined' || filter === true || external) {
            var wo = table.config.widgetOptions;
            // delay filtering
            clearTimeout(wo.searchTimer);
            wo.searchTimer = setTimeout(function() {
                ts.filter.checkFilters(table, external || filter);
            }, wo.filter_liveSearch ? wo.filter_searchDelay : 10);
        } else {
            // skip delay
            ts.filter.checkFilters(table, filter);
        }
    }
};

ts.getFilters = function(table) {
    var c = table ? $(table)[0].config : {};
    if (c && c.widgetOptions && !c.widgetOptions.filter_columnFilters) {
        // no filter row
        return $(table).data('lastSearch');
    }
    return c && c.$filters ? c.$filters.map(function(indx, el) {
        return $(el).find('.tablesorter-filter').val() || '';
    }).get() || [] : false;
};

ts.setFilters = function(table, filter, apply) {
    var $table = $(table),
        c = $table.length ? $table[0].config : {},
        valid = c && c.$filters ? c.$filters.each(function(indx, el) {
            $(el).find('.tablesorter-filter').val(filter[indx] || '');
        }).trigger('change.tsfilter') || false : false;
    if (apply) { $table.trigger('search', [filter, false]); }
    return !!valid;
};

// Widget: Sticky headers
// based on this awesome article:
// http://css-tricks.com/13465-persistent-headers/
// and https://github.com/jmosbech/StickyTableHeaders by Jonas Mosbech
// **************************
ts.addWidget({
    id: "stickyHeaders",
    priority: 60,
    options: {
        stickyHeaders : '',       // extra class name added to the sticky header row
        stickyHeaders_offset : 0, // number or jquery selector targeting the position:fixed element
        stickyHeaders_cloneId : '-sticky', // added to table ID, if it exists
        stickyHeaders_addResizeEvent : true, // trigger "resize" event on headers
        stickyHeaders_includeCaption : true, // if false and a caption exist, it won't be included in the sticky header
        stickyHeaders_zIndex : 2 // The zIndex of the stickyHeaders, allows the user to adjust this to their needs
    },
    format: function(table, c, wo){
        if (c.$table.hasClass('hasStickyHeaders')) { return; }
        var $t = c.$table,
            $win = $(window),
            header = $t.children('thead:first'),
            hdrCells = header.children('tr:not(.sticky-false)').children(),
            innr = '.tablesorter-header-inner',
            tfoot = $t.find('tfoot'),
            filterInputs = '.tablesorter-filter',
            $stickyOffset = isNaN(wo.stickyHeaders_offset) ? $(wo.stickyHeaders_offset) : '',
            stickyOffset = $stickyOffset.length ? $stickyOffset.height() || 0 : parseInt(wo.stickyHeaders_offset, 10) || 0,
            stickyzIndex = wo.stickyHeaders_zIndex ? wo.stickyHeaders_zIndex : 2,
            $stickyTable = wo.$sticky = $t.clone()
                .addClass('containsStickyHeaders')
                .css({
                    position   : 'fixed',
                    margin     : 0,
                    top        : stickyOffset,
                    visibility : 'hidden',
                    zIndex     : stickyzIndex
                }),
            stkyHdr = $stickyTable.children('thead:first').addClass('tablesorter-stickyHeader ' + wo.stickyHeaders),
            stkyCells,
            laststate = '',
            spacing = 0,
            flag = false,
            resizeHdr = function(){
                stickyOffset = $stickyOffset.length ? $stickyOffset.height() || 0 : parseInt(wo.stickyHeaders_offset, 10) || 0;
                var bwsr = navigator.userAgent;
                spacing = 0;
                // yes, I dislike browser sniffing, but it really is needed here :(
                // webkit automatically compensates for border spacing
                if ($t.css('border-collapse') !== 'collapse' && !/(webkit|msie)/i.test(bwsr)) {
                    // Firefox & Opera use the border-spacing
                    // update border-spacing here because of demos that switch themes
                    spacing = parseInt(hdrCells.eq(0).css('border-left-width'), 10) * 2;
                }
                $stickyTable.css({
                    left : header.offset().left - $win.scrollLeft() - spacing,
                    width: $t.width()
                });
                stkyCells.filter(':visible').each(function(i){
                    var $h = hdrCells.filter(':visible').eq(i);
                    $(this)
                        .css({
                            width: $h.width() - spacing,
                            height: $h.height()
                        })
                        .find(innr).width( $h.find(innr).width() );
                });
            };
        // fix clone ID, if it exists - fixes #271
        if ($stickyTable.attr('id')) { $stickyTable[0].id += wo.stickyHeaders_cloneId; }
        // clear out cloned table, except for sticky header
        // include caption & filter row (fixes #126 & #249)
        $stickyTable.find('thead:gt(0), tr.sticky-false, tbody, tfoot').remove();
        if (!wo.stickyHeaders_includeCaption) {
            $stickyTable.find('caption').remove();
        }
        // issue #172 - find td/th in sticky header
        stkyCells = stkyHdr.children().children();
        $stickyTable.css({ height:0, width:0, padding:0, margin:0, border:0 });
        // remove resizable block
        stkyCells.find('.tablesorter-resizer').remove();
        // update sticky header class names to match real header after sorting
        $t
        .addClass('hasStickyHeaders')
        .bind('sortEnd.tsSticky', function(){
            hdrCells.filter(':visible').each(function(i){
                var t = stkyCells.filter(':visible').eq(i);
                t
                    .attr('class', $(this).attr('class'))
                    // remove processing icon
                    .removeClass(ts.css.processing + ' ' + c.cssProcessing);
                if (c.cssIcon){
                    t
                    .find('.' + ts.css.icon)
                    .attr('class', $(this).find('.' + ts.css.icon).attr('class'));
                }
            });
        })
        .bind('pagerComplete.tsSticky', function(){
            resizeHdr();
        });
        // http://stackoverflow.com/questions/5312849/jquery-find-self;
        hdrCells.find(c.selectorSort).add( c.$headers.filter(c.selectorSort) ).each(function(i){
            var t = $(this),
            // clicking on sticky will trigger sort
            $cell = stkyHdr.children('tr.tablesorter-headerRow').children().eq(i).bind('mouseup', function(e){
                t.trigger(e, true); // external mouseup flag (click timer is ignored)
            });
            // prevent sticky header text selection
            if (c.cancelSelection) {
                $cell
                    .attr('unselectable', 'on')
                    .bind('selectstart', false)
                    .css({
                        'user-select': 'none',
                        'MozUserSelect': 'none'
                    });
            }
        });
        // add stickyheaders AFTER the table. If the table is selected by ID, the original one (first) will be returned.
        $t.after( $stickyTable );
        // make it sticky!
        $win.bind('scroll.tsSticky resize.tsSticky', function(e){
            if (!$t.is(':visible')) { return; } // fixes #278
            var pre = 'tablesorter-sticky-',
                offset = $t.offset(),
                cap = (wo.stickyHeaders_includeCaption ? 0 : $t.find('caption').outerHeight(true)),
                sTop = $win.scrollTop() + stickyOffset - cap,
                tableHt = $t.height() - ($stickyTable.height() + (tfoot.height() || 0)),
                vis = (sTop > offset.top) && (sTop < offset.top + tableHt) ? 'visible' : 'hidden';
            $stickyTable
            .removeClass(pre + 'visible ' + pre + 'hidden')
            .addClass(pre + vis)
            .css({
                // adjust when scrolling horizontally - fixes issue #143
                left : header.offset().left - $win.scrollLeft() - spacing,
                visibility : vis
            });
            if (vis !== laststate || e.type === 'resize'){
                // make sure the column widths match
                resizeHdr();
                laststate = vis;
            }
        });
        if (wo.stickyHeaders_addResizeEvent) {
            ts.addHeaderResizeEvent(table);
        }

        // look for filter widget
        $t.bind('filterEnd', function(){
            if (flag) { return; }
            stkyHdr.find('.tablesorter-filter-row').children().each(function(i){
                $(this).find(filterInputs).val( c.$filters.find(filterInputs).eq(i).val() );
            });
        });
        stkyCells.find(filterInputs).bind('keyup search change', function(e){
            // ignore arrow and meta keys; allow backspace
            if ((e.which < 32 && e.which !== 8) || (e.which >= 37 && e.which <=40)) { return; }
            flag = true;
            var $f = $(this), col = $f.attr('data-column');
            c.$filters.find(filterInputs).eq(col)
                .val( $f.val() )
                .trigger('search');
            setTimeout(function(){
                flag = false;
            }, wo.filter_searchDelay);
        });
        $t.trigger('stickyHeadersInit');

    },
    remove: function(table, c, wo){
        c.$table
            .removeClass('hasStickyHeaders')
            .unbind('sortEnd.tsSticky pagerComplete.tsSticky')
            .find('.tablesorter-stickyHeader').remove();
        if (wo.$sticky && wo.$sticky.length) { wo.$sticky.remove(); } // remove cloned table
        // don't unbind if any table on the page still has stickyheaders applied
        if (!$('.hasStickyHeaders').length) {
            $(window).unbind('scroll.tsSticky resize.tsSticky');
        }
        ts.addHeaderResizeEvent(table, false);
    }
});

// Add Column resizing widget
// this widget saves the column widths if
// $.tablesorter.storage function is included
// **************************
ts.addWidget({
    id: "resizable",
    priority: 40,
    options: {
        resizable : true,
        resizable_addLastColumn : false
    },
    format: function(table, c, wo){
        if (c.$table.hasClass('hasResizable')) { return; }
        c.$table.addClass('hasResizable');
        var $t, t, i, j, s = {}, $c, $cols, w, tw,
            $tbl = c.$table,
            position = 0,
            $target = null,
            $next = null,
            fullWidth = Math.abs($tbl.parent().width() - $tbl.width()) < 20,
            stopResize = function(){
                if (ts.storage && $target){
                    s[$target.index()] = $target.width();
                    s[$next.index()] = $next.width();
                    $target.width( s[$target.index()] );
                    $next.width( s[$next.index()] );
                    if (wo.resizable !== false){
                        ts.storage(table, 'tablesorter-resizable', s);
                    }
                }
                position = 0;
                $target = $next = null;
                $(window).trigger('resize'); // will update stickyHeaders, just in case
            };
        s = (ts.storage && wo.resizable !== false) ? ts.storage(table, 'tablesorter-resizable') : {};
        // process only if table ID or url match
        if (s){
            for (j in s){
                if (!isNaN(j) && j < c.$headers.length){
                    c.$headers.eq(j).width(s[j]); // set saved resizable widths
                }
            }
        }
        $t = $tbl.children('thead:first').children('tr');
        // add resizable-false class name to headers (across rows as needed)
        $t.children().each(function(){
            t = $(this);
            i = t.attr('data-column');
            j = ts.getData( t, c.headers[i], 'resizable') === "false";
            $t.children().filter('[data-column="' + i + '"]').toggleClass('resizable-false', j);
        });
        // add wrapper inside each cell to allow for positioning of the resizable target block
        $t.each(function(){
            $c = $(this).children(':not(.resizable-false)');
            if (!$(this).find('.tablesorter-wrapper').length) {
                // Firefox needs this inner div to position the resizer correctly
                $c.wrapInner('<div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%"></div>');
            }
            // don't include the last column of the row
            if (!wo.resizable_addLastColumn) { $c = $c.slice(0,-1); }
            $cols = $cols ? $cols.add($c) : $c;
        });
        $cols
        .each(function(){
            $t = $(this);
            j = parseInt($t.css('padding-right'), 10) + 10; // 8 is 1/2 of the 16px wide resizer grip
            t = '<div class="tablesorter-resizer" style="cursor:w-resize;position:absolute;z-index:1;right:-' + j +
                'px;top:0;height:100%;width:20px;"></div>';
            $t
                .find('.tablesorter-wrapper')
                .append(t);
        })
        .bind('mousemove.tsresize', function(e){
            // ignore mousemove if no mousedown
            if (position === 0 || !$target) { return; }
            // resize columns
            w = e.pageX - position;
            tw = $target.width();
            $target.width( tw + w );
            if ($target.width() !== tw && fullWidth){
                $next.width( $next.width() - w );
            }
            position = e.pageX;
        })
        .bind('mouseup.tsresize', function(){
            stopResize();
        })
        .find('.tablesorter-resizer,.tablesorter-resizer-grip')
        .bind('mousedown', function(e){
            // save header cell and mouse position; closest() not supported by jQuery v1.2.6
            $target = $(e.target).closest('th');
            t = c.$headers.filter('[data-column="' + $target.attr('data-column') + '"]');
            if (t.length > 1) { $target = $target.add(t); }
            // if table is not as wide as it's parent, then resize the table
            $next = e.shiftKey ? $target.parent().find('th:not(.resizable-false)').filter(':last') : $target.nextAll(':not(.resizable-false)').eq(0);
            position = e.pageX;
        });
        $tbl.find('thead:first')
        .bind('mouseup.tsresize mouseleave.tsresize', function(){
            stopResize();
        })
        // right click to reset columns to default widths
        .bind('contextmenu.tsresize', function(){
                ts.resizableReset(table);
                // $.isEmptyObject() needs jQuery 1.4+
                var rtn = $.isEmptyObject ? $.isEmptyObject(s) : s === {}; // allow right click if already reset
                s = {};
                return rtn;
        });
    },
    remove: function(table, c, wo){
        c.$table
            .removeClass('hasResizable')
            .find('thead')
            .unbind('mouseup.tsresize mouseleave.tsresize contextmenu.tsresize')
            .find('tr').children()
            .unbind('mousemove.tsresize mouseup.tsresize')
            // don't remove "tablesorter-wrapper" as uitheme uses it too
            .find('.tablesorter-resizer,.tablesorter-resizer-grip').remove();
        ts.resizableReset(table);
    }
});
ts.resizableReset = function(table){
    table.config.$headers.filter(':not(.resizable-false)').css('width','');
    if (ts.storage) { ts.storage(table, 'tablesorter-resizable', {}); }
};

// Save table sort widget
// this widget saves the last sort only if the
// saveSort widget option is true AND the
// $.tablesorter.storage function is included
// **************************
ts.addWidget({
    id: 'saveSort',
    priority: 20,
    options: {
        saveSort : true
    },
    init: function(table, thisWidget, c, wo){
        // run widget format before all other widgets are applied to the table
        thisWidget.format(table, c, wo, true);
    },
    format: function(table, c, wo, init){
        var sl, time,
            $t = c.$table,
            ss = wo.saveSort !== false, // make saveSort active/inactive; default to true
            sortList = { "sortList" : c.sortList };
        if (c.debug){
            time = new Date();
        }
        if ($t.hasClass('hasSaveSort')){
            if (ss && table.hasInitialized && ts.storage){
                ts.storage( table, 'tablesorter-savesort', sortList );
                if (c.debug){
                    ts.benchmark('saveSort widget: Saving last sort: ' + c.sortList, time);
                }
            }
        } else {
            // set table sort on initial run of the widget
            $t.addClass('hasSaveSort');
            sortList = '';
            // get data
            if (ts.storage){
                sl = ts.storage( table, 'tablesorter-savesort' );
                sortList = (sl && sl.hasOwnProperty('sortList') && $.isArray(sl.sortList)) ? sl.sortList : '';
                if (c.debug){
                    ts.benchmark('saveSort: Last sort loaded: "' + sortList + '"', time);
                }
                $t.bind('saveSortReset', function(e){
                    e.stopPropagation();
                    ts.storage( table, 'tablesorter-savesort', '' );
                });
            }
            // init is true when widget init is run, this will run this widget before all other widgets have initialized
            // this method allows using this widget in the original tablesorter plugin; but then it will run all widgets twice.
            if (init && sortList && sortList.length > 0){
                c.sortList = sortList;
            } else if (table.hasInitialized && sortList && sortList.length > 0){
                // update sort change
                $t.trigger('sorton', [sortList]);
            }
        }
    },
    remove: function(table){
        // clear storage
        if (ts.storage) { ts.storage( table, 'tablesorter-savesort', '' ); }
    }
});

})(jQuery);



</script>
<script>

/**!
* TableSorter 2.13.3 - Client-side table sorting with ease!
* @requires jQuery v1.2.6+
*
* Copyright (c) 2007 Christian Bach
* Examples and docs at: http://tablesorter.com
* Dual licensed under the MIT and GPL licenses:
* http://www.opensource.org/licenses/mit-license.php
* http://www.gnu.org/licenses/gpl.html
*
* @type jQuery
* @name tablesorter
* @cat Plugins/Tablesorter
* @author Christian Bach/christian.bach@polyester.se
* @contributor Rob Garrison/https://github.com/Mottie/tablesorter
*/
/*jshint browser:true, jquery:true, unused:false, expr: true */
/*global console:false, alert:false */
!(function($) {
    "use strict";
    $.extend({
        /*jshint supernew:true */
        tablesorter: new function() {

            var ts = this;

            ts.version = "2.13.3";

            ts.parsers = [];
            ts.widgets = [];
            ts.defaults = {

                // *** appearance
                theme            : 'default',  // adds tablesorter-{theme} to the table for styling
                widthFixed       : false,      // adds colgroup to fix widths of columns
                showProcessing   : false,      // show an indeterminate timer icon in the header when the table is sorted or filtered.

                headerTemplate   : '{content}',// header layout template (HTML ok); {content} = innerHTML, {icon} = <i/> (class from cssIcon)
                onRenderTemplate : null,       // function(index, template){ return template; }, (template is a string)
                onRenderHeader   : null,       // function(index){}, (nothing to return)

                // *** functionality
                cancelSelection  : true,       // prevent text selection in the header
                dateFormat       : 'mmddyyyy', // other options: "ddmmyyy" or "yyyymmdd"
                sortMultiSortKey : 'shiftKey', // key used to select additional columns
                sortResetKey     : 'ctrlKey',  // key used to remove sorting on a column
                usNumberFormat   : true,       // false for German "1.234.567,89" or French "1 234 567,89"
                delayInit        : false,      // if false, the parsed table contents will not update until the first sort
                serverSideSorting: false,      // if true, server-side sorting should be performed because client-side sorting will be disabled, but the ui and events will still be used.

                // *** sort options
                headers          : {},         // set sorter, string, empty, locked order, sortInitialOrder, filter, etc.
                ignoreCase       : true,       // ignore case while sorting
                sortForce        : null,       // column(s) first sorted; always applied
                sortList         : [],         // Initial sort order; applied initially; updated when manually sorted
                sortAppend       : null,       // column(s) sorted last; always applied

                sortInitialOrder : 'asc',      // sort direction on first click
                sortLocaleCompare: false,      // replace equivalent character (accented characters)
                sortReset        : false,      // third click on the header will reset column to default - unsorted
                sortRestart      : false,      // restart sort to "sortInitialOrder" when clicking on previously unsorted columns

                emptyTo          : 'bottom',   // sort empty cell to bottom, top, none, zero
                stringTo         : 'max',      // sort strings in numerical column as max, min, top, bottom, zero
                textExtraction   : 'simple',   // text extraction method/function - function(node, table, cellIndex){}
                textSorter       : null,       // choose overall or specific column sorter function(a, b, direction, table, columnIndex) [alt: ts.sortText]
                numberSorter     : null,       // choose overall numeric sorter function(a, b, direction, maxColumnValue)

                // *** widget options
            
              
                widgets: [],                   // method to add widgets, e.g. widgets: ['zebra']
                widgetOptions    : {
                 
                    zebra : [ 'even', 'odd' ]    // zebra widget alternating row class names
                
                   
                },
                initWidgets      : true,       // apply widgets on tablesorter initialization

                // *** callbacks
                initialized      : null,       // function(table){},

                // *** extra css class names
                tableClass       : '',
                cssAsc           : '',
                cssDesc          : '',
                cssHeader        : '',
                cssHeaderRow     : '',
                cssProcessing    : '', // processing icon applied to header during sort/filter

                cssChildRow      : 'tablesorter-childRow', // class name indiciating that a row is to be attached to the its parent 
                cssIcon          : 'tablesorter-icon',     //  if this class exists, a <i> will be added to the header automatically
                cssInfoBlock     : 'tablesorter-infoOnly', // don't sort tbody with this class name (only one class name allowed here!)

                // *** selectors
                selectorHeaders  : '> thead th, > thead td',
                selectorSort     : 'th, td',   // jQuery selector of content within selectorHeaders that is clickable to trigger a sort
                selectorRemove   : '.remove-me',

                // *** advanced
                debug            : false,

                // *** Internal variables
                headerList: [],
                empties: {},
                strings: {},
                parsers: []

                // deprecated; but retained for backwards compatibility
                // widgetZebra: { css: ["even", "odd"] }

            };

            // internal css classes - these will ALWAYS be added to
            // the table and MUST only contain one class name - fixes #381
            ts.css = {
                table      : 'tablesorter',
                childRow   : 'tablesorter-childRow',
                header     : 'tablesorter-header',
                headerRow  : 'tablesorter-headerRow',
                icon       : 'tablesorter-icon',
                info       : 'tablesorter-infoOnly',
                processing : 'tablesorter-processing',
                sortAsc    : 'tablesorter-headerAsc',
                sortDesc   : 'tablesorter-headerDesc'
            };

            /* debuging utils */
            function log() {
                var s = arguments.length > 1 ? Array.prototype.slice.call(arguments) : arguments[0];
                if (typeof console !== "undefined" && typeof console.log !== "undefined") {
                    console.log(s);
                } else {
                    alert(s);
                }
            }

            function benchmark(s, d) {
                log(s + " (" + (new Date().getTime() - d.getTime()) + "ms)");
            }

            ts.log = log;
            ts.benchmark = benchmark;

            // $.isEmptyObject from jQuery v1.4
            function isEmptyObject(obj) {
                /*jshint forin: false */
                for (var name in obj) {
                    return false;
                }
                return true;
            }

            function getElementText(table, node, cellIndex) {
                if (!node) { return ""; }
                var c = table.config,
                    t = c.textExtraction, text = "";
                if (t === "simple") {
                    if (c.supportsTextContent) {
                        text = node.textContent; // newer browsers support this
                    } else {
                        text = $(node).text();
                    }
                } else {
                    if (typeof t === "function") {
                        text = t(node, table, cellIndex);
                    } else if (typeof t === "object" && t.hasOwnProperty(cellIndex)) {
                        text = t[cellIndex](node, table, cellIndex);
                    } else {
                        text = c.supportsTextContent ? node.textContent : $(node).text();
                    }
                }
                return $.trim(text);
            }

            function detectParserForColumn(table, rows, rowIndex, cellIndex) {
                var cur,
                i = ts.parsers.length,
                node = false,
                nodeValue = '',
                keepLooking = true;
                while (nodeValue === '' && keepLooking) {
                    rowIndex++;
                    if (rows[rowIndex]) {
                        node = rows[rowIndex].cells[cellIndex];
                        nodeValue = getElementText(table, node, cellIndex);
                        if (table.config.debug) {
                            log('Checking if value was empty on row ' + rowIndex + ', column: ' + cellIndex + ': "' + nodeValue + '"');
                        }
                    } else {
                        keepLooking = false;
                    }
                }
                while (--i >= 0) {
                    cur = ts.parsers[i];
                    // ignore the default text parser because it will always be true
                    if (cur && cur.id !== 'text' && cur.is && cur.is(nodeValue, table, node)) {
                        return cur;
                    }
                }
                // nothing found, return the generic parser (text)
                return ts.getParserById('text');
            }

            function buildParserCache(table) {
                var c = table.config,
                    // update table bodies in case we start with an empty table
                    tb = c.$tbodies = c.$table.children('tbody:not(.' + c.cssInfoBlock + ')'),
                    rows, list, l, i, h, ch, p, time, parsersDebug = "";
                if ( tb.length === 0) {
                    return c.debug ? log('*Empty table!* Not building a parser cache') : '';
                } else if (c.debug) {
                    time = new Date();
                    log('Detecting parsers for each column');
                }
                rows = tb[0].rows;
                if (rows[0]) {
                    list = [];
                    l = rows[0].cells.length;
                    for (i = 0; i < l; i++) {
                        // tons of thanks to AnthonyM1229 for working out the following selector (issue #74) to make this work in IE8!
                        // More fixes to this selector to work properly in iOS and jQuery 1.8+ (issue #132 & #174)
                        h = c.$headers.filter(':not([colspan])');
                        h = h.add( c.$headers.filter('[colspan="1"]') ) // ie8 fix
                            .filter('[data-column="' + i + '"]:last');
                        ch = c.headers[i];
                        // get column parser
                        p = ts.getParserById( ts.getData(h, ch, 'sorter') );
                        // empty cells behaviour - keeping emptyToBottom for backwards compatibility
                        c.empties[i] = ts.getData(h, ch, 'empty') || c.emptyTo || (c.emptyToBottom ? 'bottom' : 'top' );
                        // text strings behaviour in numerical sorts
                        c.strings[i] = ts.getData(h, ch, 'string') || c.stringTo || 'max';
                        if (!p) {
                            p = detectParserForColumn(table, rows, -1, i);
                        }
                        if (c.debug) {
                            parsersDebug += "column:" + i + "; parser:" + p.id + "; string:" + c.strings[i] + '; empty: ' + c.empties[i] + "\n";
                        }
                        list.push(p);
                    }
                }
                if (c.debug) {
                    log(parsersDebug);
                    benchmark("Completed detecting parsers", time);
                }
                c.parsers = list;
            }

            /* utils */
            function buildCache(table) {
                var b = table.tBodies,
                tc = table.config,
                totalRows,
                totalCells,
                parsers = tc.parsers,
                t, v, i, j, k, c, cols, cacheTime, colMax = [];
                tc.cache = {};
                // if no parsers found, return - it's an empty table.
                if (!parsers) {
                    return tc.debug ? log('*Empty table!* Not building a cache') : '';
                }
                if (tc.debug) {
                    cacheTime = new Date();
                }
                // processing icon
                if (tc.showProcessing) {
                    ts.isProcessing(table, true);
                }
                for (k = 0; k < b.length; k++) {
                    tc.cache[k] = { row: [], normalized: [] };
                    // ignore tbodies with class name from c.cssInfoBlock
                    if (!$(b[k]).hasClass(tc.cssInfoBlock)) {
                        totalRows = (b[k] && b[k].rows.length) || 0;
                        totalCells = (b[k].rows[0] && b[k].rows[0].cells.length) || 0;
                        for (i = 0; i < totalRows; ++i) {
                            /** Add the table data to main data array */
                            c = $(b[k].rows[i]);
                            cols = [];
                            // if this is a child row, add it to the last row's children and continue to the next row
                            if (c.hasClass(tc.cssChildRow)) {
                                tc.cache[k].row[tc.cache[k].row.length - 1] = tc.cache[k].row[tc.cache[k].row.length - 1].add(c);
                                // go to the next for loop
                                continue;
                            }
                            tc.cache[k].row.push(c);
                            for (j = 0; j < totalCells; ++j) {
                                t = getElementText(table, c[0].cells[j], j);
                                // allow parsing if the string is empty, previously parsing would change it to zero,
                                // in case the parser needs to extract data from the table cell attributes
                                v = parsers[j].format(t, table, c[0].cells[j], j);
                                cols.push(v);
                                if ((parsers[j].type || '').toLowerCase() === "numeric") {
                                    colMax[j] = Math.max(Math.abs(v) || 0, colMax[j] || 0); // determine column max value (ignore sign)
                                }
                            }
                            cols.push(tc.cache[k].normalized.length); // add position for rowCache
                            tc.cache[k].normalized.push(cols);
                        }
                        tc.cache[k].colMax = colMax;
                    }
                }
                if (tc.showProcessing) {
                    ts.isProcessing(table); // remove processing icon
                }
                if (tc.debug) {
                    benchmark("Building cache for " + totalRows + " rows", cacheTime);
                }
            }

            // init flag (true) used by pager plugin to prevent widget application
            function appendToTable(table, init) {
                var c = table.config,
                    wo = c.widgetOptions,
                    b = table.tBodies,
                    rows = [],
                    c2 = c.cache,
                    r, n, totalRows, checkCell, $bk, $tb,
                    i, j, k, l, pos, appendTime;
                if (isEmptyObject(c2)) { return; } // empty table - fixes #206/#346
                if (c.debug) {
                    appendTime = new Date();
                }
                for (k = 0; k < b.length; k++) {
                    $bk = $(b[k]);
                    if ($bk.length && !$bk.hasClass(c.cssInfoBlock)) {
                        // get tbody
                        $tb = ts.processTbody(table, $bk, true);
                        r = c2[k].row;
                        n = c2[k].normalized;
                        totalRows = n.length;
                        checkCell = totalRows ? (n[0].length - 1) : 0;
                        for (i = 0; i < totalRows; i++) {
                            pos = n[i][checkCell];
                            rows.push(r[pos]);
                            // removeRows used by the pager plugin; don't render if using ajax - fixes #411
                            if (!c.appender || (c.pager && (!c.pager.removeRows || !wo.pager_removeRows) && !c.pager.ajax)) {
                                l = r[pos].length;
                                for (j = 0; j < l; j++) {
                                    $tb.append(r[pos][j]);
                                }
                            }
                        }
                        // restore tbody
                        ts.processTbody(table, $tb, false);
                    }
                }
                if (c.appender) {
                    c.appender(table, rows);
                }
                if (c.debug) {
                    benchmark("Rebuilt table", appendTime);
                }
                // apply table widgets; but not before ajax completes
                if (!init && !c.appender) { ts.applyWidget(table); }
                // trigger sortend
                $(table).trigger("sortEnd", table);
                $(table).trigger("updateComplete", table);
            }

            // computeTableHeaderCellIndexes from:
            // http://www.javascripttoolbox.com/lib/table/examples.php
            // http://www.javascripttoolbox.com/temp/table_cellindex.html
            function computeThIndexes(t) {
                var matrix = [],
                lookup = {},
                cols = 0, // determine the number of columns
                trs = $(t).find('thead:eq(0), tfoot').children('tr'), // children tr in tfoot - see issue #196
                i, j, k, l, c, cells, rowIndex, cellId, rowSpan, colSpan, firstAvailCol, matrixrow;
                for (i = 0; i < trs.length; i++) {
                    cells = trs[i].cells;
                    for (j = 0; j < cells.length; j++) {
                        c = cells[j];
                        rowIndex = c.parentNode.rowIndex;
                        cellId = rowIndex + "-" + c.cellIndex;
                        rowSpan = c.rowSpan || 1;
                        colSpan = c.colSpan || 1;
                        if (typeof(matrix[rowIndex]) === "undefined") {
                            matrix[rowIndex] = [];
                        }
                        // Find first available column in the first row
                        for (k = 0; k < matrix[rowIndex].length + 1; k++) {
                            if (typeof(matrix[rowIndex][k]) === "undefined") {
                                firstAvailCol = k;
                                break;
                            }
                        }
                        lookup[cellId] = firstAvailCol;
                        cols = Math.max(firstAvailCol, cols);
                        // add data-column
                        $(c).attr({ 'data-column' : firstAvailCol }); // 'data-row' : rowIndex
                        for (k = rowIndex; k < rowIndex + rowSpan; k++) {
                            if (typeof(matrix[k]) === "undefined") {
                                matrix[k] = [];
                            }
                            matrixrow = matrix[k];
                            for (l = firstAvailCol; l < firstAvailCol + colSpan; l++) {
                                matrixrow[l] = "x";
                            }
                        }
                    }
                }
                // may not be accurate if # header columns !== # tbody columns
                t.config.columns = cols + 1; // add one because it's a zero-based index
                return lookup;
            }

            function formatSortingOrder(v) {
                // look for "d" in "desc" order; return true
                return (/^d/i.test(v) || v === 1);
            }

            function buildHeaders(table) {
                var header_index = computeThIndexes(table), ch, $t,
                    h, i, t, lock, time, c = table.config;
                c.headerList = [];
                c.headerContent = [];
                if (c.debug) {
                    time = new Date();
                }
                i = c.cssIcon ? '<i class="' + c.cssIcon + ' ' + ts.css.icon + '"></i>' : ''; // add icon if cssIcon option exists
                c.$headers = $(table).find(c.selectorHeaders).each(function(index) {
                    $t = $(this);
                    ch = c.headers[index];
                    c.headerContent[index] = $(this).html(); // save original header content
                    // set up header template
                    t = c.headerTemplate.replace(/\{content\}/g, $(this).html()).replace(/\{icon\}/g, i);
                    if (c.onRenderTemplate) {
                        h = c.onRenderTemplate.apply($t, [index, t]);
                        if (h && typeof h === 'string') { t = h; } // only change t if something is returned
                    }
                    $(this).html('<div class="tablesorter-header-inner">' + t + '</div>'); // faster than wrapInner

                    if (c.onRenderHeader) { c.onRenderHeader.apply($t, [index]); }

                    this.column = header_index[this.parentNode.rowIndex + "-" + this.cellIndex];
                    this.order = formatSortingOrder( ts.getData($t, ch, 'sortInitialOrder') || c.sortInitialOrder ) ? [1,0,2] : [0,1,2];
                    this.count = -1; // set to -1 because clicking on the header automatically adds one
                    this.lockedOrder = false;
                    lock = ts.getData($t, ch, 'lockedOrder') || false;
                    if (typeof lock !== 'undefined' && lock !== false) {
                        this.order = this.lockedOrder = formatSortingOrder(lock) ? [1,1,1] : [0,0,0];
                    }
                    $t.addClass(ts.css.header + ' ' + c.cssHeader);
                    // add cell to headerList
                    c.headerList[index] = this;
                    // add to parent in case there are multiple rows
                    $t.parent().addClass(ts.css.headerRow + ' ' + c.cssHeaderRow);
                    // allow keyboard cursor to focus on element
                    $t.attr("tabindex", 0);
                });
                // enable/disable sorting
                updateHeader(table);
                if (c.debug) {
                    benchmark("Built headers:", time);
                    log(c.$headers);
                }
            }

            function commonUpdate(table, resort, callback) {
                var c = table.config;
                // remove rows/elements before update
                c.$table.find(c.selectorRemove).remove();
                // rebuild parsers
                buildParserCache(table);
                // rebuild the cache map
                buildCache(table);
                checkResort(c.$table, resort, callback);
            }

            function updateHeader(table) {
                var s, c = table.config;
                c.$headers.each(function(index, th){
                    s = ts.getData( th, c.headers[index], 'sorter' ) === 'false';
                    th.sortDisabled = s;
                    $(th)[ s ? 'addClass' : 'removeClass' ]('sorter-false');
                });
            }

            function setHeadersCss(table) {
                var f, i, j, l,
                    c = table.config,
                    list = c.sortList,
                    css = [ts.css.sortAsc + ' ' + c.cssAsc, ts.css.sortDesc + ' ' + c.cssDesc],
                    // find the footer
                    $t = $(table).find('tfoot tr').children().removeClass(css.join(' '));
                // remove all header information
                c.$headers.removeClass(css.join(' '));
                l = list.length;
                for (i = 0; i < l; i++) {
                    // direction = 2 means reset!
                    if (list[i][1] !== 2) {
                        // multicolumn sorting updating - choose the :last in case there are nested columns
                        f = c.$headers.not('.sorter-false').filter('[data-column="' + list[i][0] + '"]' + (l === 1 ? ':last' : '') );
                        if (f.length) {
                            for (j = 0; j < f.length; j++) {
                                if (!f[j].sortDisabled) {
                                    f.eq(j).addClass(css[list[i][1]]);
                                    // add sorted class to footer, if it exists
                                    if ($t.length) {
                                        $t.filter('[data-column="' + list[i][0] + '"]').eq(j).addClass(css[list[i][1]]);
                                    }
                                }
                            }
                        }
                    }
                }
            }

            // automatically add col group, and column sizes if set
            function fixColumnWidth(table) {
                if (table.config.widthFixed && $(table).find('colgroup').length === 0) {
                    var colgroup = $('<colgroup>'),
                        overallWidth = $(table).width();
                    // only add col for visible columns - fixes #371
                    $(table.tBodies[0]).find("tr:first").children("td:visible").each(function() {
                        colgroup.append($('<col>').css('width', parseInt(($(this).width()/overallWidth)*1000, 10)/10 + '%'));
                    });
                    $(table).prepend(colgroup);
                }
            }

            function updateHeaderSortCount(table, list) {
                var s, t, o, c = table.config,
                    sl = list || c.sortList;
                c.sortList = [];
                $.each(sl, function(i,v){
                    // ensure all sortList values are numeric - fixes #127
                    s = [ parseInt(v[0], 10), parseInt(v[1], 10) ];
                    // make sure header exists
                    o = c.$headers[s[0]];
                    if (o) { // prevents error if sorton array is wrong
                        c.sortList.push(s);
                        t = $.inArray(s[1], o.order); // fixes issue #167
                        o.count = t >= 0 ? t : s[1] % (c.sortReset ? 3 : 2);
                    }
                });
            }

            function getCachedSortType(parsers, i) {
                return (parsers && parsers[i]) ? parsers[i].type || '' : '';
            }

            function initSort(table, cell, e){
                var a, i, j, o, s,
                    c = table.config,
                    k = !e[c.sortMultiSortKey],
                    $this = $(table);
                // Only call sortStart if sorting is enabled
                $this.trigger("sortStart", table);
                // get current column sort order
                cell.count = e[c.sortResetKey] ? 2 : (cell.count + 1) % (c.sortReset ? 3 : 2);
                // reset all sorts on non-current column - issue #30
                if (c.sortRestart) {
                    i = cell;
                    c.$headers.each(function() {
                        // only reset counts on columns that weren't just clicked on and if not included in a multisort
                        if (this !== i && (k || !$(this).is('.' + ts.css.sortDesc + ',.' + ts.css.sortAsc))) {
                            this.count = -1;
                        }
                    });
                }
                // get current column index
                i = cell.column;
                // user only wants to sort on one column
                if (k) {
                    // flush the sort list
                    c.sortList = [];
                    if (c.sortForce !== null) {
                        a = c.sortForce;
                        for (j = 0; j < a.length; j++) {
                            if (a[j][0] !== i) {
                                c.sortList.push(a[j]);
                            }
                        }
                    }
                    // add column to sort list
                    o = cell.order[cell.count];
                    if (o < 2) {
                        c.sortList.push([i, o]);
                        // add other columns if header spans across multiple
                        if (cell.colSpan > 1) {
                            for (j = 1; j < cell.colSpan; j++) {
                                c.sortList.push([i + j, o]);
                            }
                        }
                    }
                    // multi column sorting
                } else {
                    // get rid of the sortAppend before adding more - fixes issue #115
                    if (c.sortAppend && c.sortList.length > 1) {
                        if (ts.isValueInArray(c.sortAppend[0][0], c.sortList)) {
                            c.sortList.pop();
                        }
                    }
                    // the user has clicked on an already sorted column
                    if (ts.isValueInArray(i, c.sortList)) {
                        // reverse the sorting direction
                        for (j = 0; j < c.sortList.length; j++) {
                            s = c.sortList[j];
                            o = c.$headers[s[0]];
                            if (s[0] === i) {
                                // o.count seems to be incorrect when compared to cell.count
                                s[1] = o.order[cell.count];
                                if (s[1] === 2) {
                                    c.sortList.splice(j,1);
                                    o.count = -1;
                                }
                            }
                        }
                    } else {
                        // add column to sort list array
                        o = cell.order[cell.count];
                        if (o < 2) {
                            c.sortList.push([i, o]);
                            // add other columns if header spans across multiple
                            if (cell.colSpan > 1) {
                                for (j = 1; j < cell.colSpan; j++) {
                                    c.sortList.push([i + j, o]);
                                }
                            }
                        }
                    }
                }
                if (c.sortAppend !== null) {
                    a = c.sortAppend;
                    for (j = 0; j < a.length; j++) {
                        if (a[j][0] !== i) {
                            c.sortList.push(a[j]);
                        }
                    }
                }
                // sortBegin event triggered immediately before the sort
                $this.trigger("sortBegin", table);
                // setTimeout needed so the processing icon shows up
                setTimeout(function(){
                    // set css for headers
                    setHeadersCss(table);
                    multisort(table);
                    appendToTable(table);
                }, 1);
            }

            // sort multiple columns
            function multisort(table) { /*jshint loopfunc:true */
                var i, k, e, num, col, colMax, cache, lc,
                    order, orgOrderCol, sortTime, sort, x, y,
                    dir = 0,
                    c = table.config,
                    cts = c.textSorter || '',
                    sortList = c.sortList,
                    l = sortList.length,
                    bl = table.tBodies.length;
                if (c.serverSideSorting || isEmptyObject(c.cache)) { // empty table - fixes #206/#346
                    return;
                }
                if (c.debug) { sortTime = new Date(); }
                for (k = 0; k < bl; k++) {
                    colMax = c.cache[k].colMax;
                    cache = c.cache[k].normalized;
                    lc = cache.length;
                    orgOrderCol = (cache && cache[0]) ? cache[0].length - 1 : 0;
                    cache.sort(function(a, b) {
                        // cache is undefined here in IE, so don't use it!
                        for (i = 0; i < l; i++) {
                            col = sortList[i][0];
                            order = sortList[i][1];
                            // sort direction, true = asc, false = desc
                            dir = order === 0;

                            // set a & b depending on sort direction
                            x = dir ? a : b;
                            y = dir ? b : a;

                            // determine how to sort empty cells
                            e = c.string[ (c.empties[col] || c.emptyTo ) ];
                            if (x[col] === '' && e !== 0) { return ((typeof(e) === 'boolean') ? (e ? -1 : 1) : (e || 1)) * (dir ? 1 : -1); }
                            if (y[col] === '' && e !== 0) { return ((typeof(e) === 'boolean') ? (e ? 1 : -1) : (-e || -1)) * (dir ? 1 : -1); }

                            // fallback to natural sort since it is more robust
                            num = /n/i.test(getCachedSortType(c.parsers, col));
                            if (num && c.strings[col]) {
                                // sort strings in numerical columns
                                if (typeof (c.string[c.strings[col]]) === 'boolean') {
                                    num = (dir ? 1 : -1) * (c.string[c.strings[col]] ? -1 : 1);
                                } else {
                                    num = (c.strings[col]) ? c.string[c.strings[col]] || 0 : 0;
                                }
                                // fall back to built-in numeric sort
                                // var sort = $.tablesorter["sort" + s](table, a[c], b[c], c, colMax[c], dir);
                                sort = c.numberSorter ? c.numberSorter(x[col], y[col], dir, colMax[col], table) : ts.sortNumeric(x[col], y[col], num, colMax[col]);
                            } else {
                                // text sort function
                                if (typeof(cts) === 'function') {
                                    // custom OVERALL text sorter
                                    sort = cts(x[col], y[col], dir, col, table);
                                } else if (typeof(cts) === 'object' && cts.hasOwnProperty(col)) {
                                    // custom text sorter for a SPECIFIC COLUMN
                                    sort = cts[col](x[col], y[col], dir, col, table);
                                } else {
                                    // fall back to natural sort
                                    sort = ts.sortNatural(x[col], y[col]);
                                }
                            }
                            if (sort) { return sort; }
                        }
                        return a[orgOrderCol] - b[orgOrderCol];
                    });
                }
                if (c.debug) { benchmark("Sorting on " + sortList.toString() + " and dir " + order + " time", sortTime); }
            }

            function resortComplete($table, callback){
                var c = $table[0].config;
                if (c.pager && !c.pager.ajax) {
                    $table.trigger('updateComplete');
                }
                if (typeof callback === "function") {
                    callback($table[0]);
                }
            }

            function checkResort($table, flag, callback) {
                // don't try to resort if the table is still processing
                // this will catch spamming of the updateCell method
                if (flag !== false && !$table[0].isProcessing) {
                    $table.trigger("sorton", [$table[0].config.sortList, function(){
                        resortComplete($table, callback);
                    }]);
                } else {
                    resortComplete($table, callback);
                }
            }

            function bindEvents(table){
                var c = table.config,
                    $this = c.$table,
                    j, downTime;
                // apply event handling to headers
                c.$headers
                // http://stackoverflow.com/questions/5312849/jquery-find-self;
                .find(c.selectorSort).add( c.$headers.filter(c.selectorSort) )
                .unbind('mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter')
                .bind('mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter', function(e, external) {
                    // only recognize left clicks or enter
                    if ( ((e.which || e.button) !== 1 && !/sort|keypress/.test(e.type)) || (e.type === 'keypress' && e.which !== 13) ) {
                        return;
                    }
                    // ignore long clicks (prevents resizable widget from initializing a sort)
                    if (e.type === 'mouseup' && external !== true && (new Date().getTime() - downTime > 250)) { return; }
                    // set timer on mousedown
                    if (e.type === 'mousedown') {
                        downTime = new Date().getTime();
                        return e.target.tagName === "INPUT" ? '' : !c.cancelSelection;
                    }
                    if (c.delayInit && isEmptyObject(c.cache)) { buildCache(table); }
                    // jQuery v1.2.6 doesn't have closest()
                    var $cell = /TH|TD/.test(this.tagName) ? $(this) : $(this).parents('th, td').filter(':first'), cell = $cell[0];
                    if (!cell.sortDisabled) {
                        initSort(table, cell, e);
                    }
                });
                if (c.cancelSelection) {
                    // cancel selection
                    c.$headers
                        .attr('unselectable', 'on')
                        .bind('selectstart', false)
                        .css({
                            'user-select': 'none',
                            'MozUserSelect': 'none' // not needed for jQuery 1.8+
                        });
                }
                // apply easy methods that trigger bound events
                $this
                .unbind('sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave '.split(' ').join('.tablesorter '))
                .bind("sortReset.tablesorter", function(e){
                    e.stopPropagation();
                    c.sortList = [];
                    setHeadersCss(table);
                    multisort(table);
                    appendToTable(table);
                })
                .bind("updateAll.tablesorter", function(e, resort, callback){
                    e.stopPropagation();
                    ts.refreshWidgets(table, true, true);
                    ts.restoreHeaders(table);
                    buildHeaders(table);
                    bindEvents(table);
                    commonUpdate(table, resort, callback);
                })
                .bind("update.tablesorter updateRows.tablesorter", function(e, resort, callback) {
                    e.stopPropagation();
                    // update sorting (if enabled/disabled)
                    updateHeader(table);
                    commonUpdate(table, resort, callback);
                })
                .bind("updateCell.tablesorter", function(e, cell, resort, callback) {
                    e.stopPropagation();
                    $this.find(c.selectorRemove).remove();
                    // get position from the dom
                    var l, row, icell,
                    $tb = $this.find('tbody'),
                    // update cache - format: function(s, table, cell, cellIndex)
                    // no closest in jQuery v1.2.6 - tbdy = $tb.index( $(cell).closest('tbody') ),$row = $(cell).closest('tr');
                    tbdy = $tb.index( $(cell).parents('tbody').filter(':first') ),
                    $row = $(cell).parents('tr').filter(':first');
                    cell = $(cell)[0]; // in case cell is a jQuery object
                    // tbody may not exist if update is initialized while tbody is removed for processing
                    if ($tb.length && tbdy >= 0) {
                        row = $tb.eq(tbdy).find('tr').index( $row );
                        icell = cell.cellIndex;
                        l = c.cache[tbdy].normalized[row].length - 1;
                        c.cache[tbdy].row[table.config.cache[tbdy].normalized[row][l]] = $row;
                        c.cache[tbdy].normalized[row][icell] = c.parsers[icell].format( getElementText(table, cell, icell), table, cell, icell );
                        checkResort($this, resort, callback);
                    }
                })
                .bind("addRows.tablesorter", function(e, $row, resort, callback) {
                    e.stopPropagation();
                    var i, rows = $row.filter('tr').length,
                    dat = [], l = $row[0].cells.length,
                    tbdy = $this.find('tbody').index( $row.parents('tbody').filter(':first') );
                    // fixes adding rows to an empty table - see issue #179
                    if (!c.parsers) {
                        buildParserCache(table);
                    }
                    // add each row
                    for (i = 0; i < rows; i++) {
                        // add each cell
                        for (j = 0; j < l; j++) {
                            dat[j] = c.parsers[j].format( getElementText(table, $row[i].cells[j], j), table, $row[i].cells[j], j );
                        }
                        // add the row index to the end
                        dat.push(c.cache[tbdy].row.length);
                        // update cache
                        c.cache[tbdy].row.push([$row[i]]);
                        c.cache[tbdy].normalized.push(dat);
                        dat = [];
                    }
                    // resort using current settings
                    checkResort($this, resort, callback);
                })
                .bind("sorton.tablesorter", function(e, list, callback, init) {
                    var c = table.config;
                    e.stopPropagation();
                    $this.trigger("sortStart", this);
                    // update header count index
                    updateHeaderSortCount(table, list);
                    // set css for headers
                    setHeadersCss(table);
                    // fixes #346
                    if (c.delayInit && isEmptyObject(c.cache)) { buildCache(table); }
                    $this.trigger("sortBegin", this);
                    // sort the table and append it to the dom
                    multisort(table);
                    appendToTable(table, init);
                    if (typeof callback === "function") {
                        callback(table);
                    }
                })
                .bind("appendCache.tablesorter", function(e, callback, init) {
                    e.stopPropagation();
                    appendToTable(table, init);
                    if (typeof callback === "function") {
                        callback(table);
                    }
                })
                .bind("applyWidgetId.tablesorter", function(e, id) {
                    e.stopPropagation();
                    ts.getWidgetById(id).format(table, c, c.widgetOptions);
                })
                .bind("applyWidgets.tablesorter", function(e, init) {
                    e.stopPropagation();
                    // apply widgets
                    ts.applyWidget(table, init);
                })
                .bind("refreshWidgets.tablesorter", function(e, all, dontapply){
                    e.stopPropagation();
                    ts.refreshWidgets(table, all, dontapply);
                })
                .bind("destroy.tablesorter", function(e, c, cb){
                    e.stopPropagation();
                    ts.destroy(table, c, cb);
                });
            }

            /* public methods */
            ts.construct = function(settings) {
                return this.each(function() {
                    var table = this,
                        // merge & extend config options
                        c = $.extend(true, {}, ts.defaults, settings);
                    // create a table from data (build table widget)
                    if (!table.hasInitialized && ts.buildTable && this.tagName !== 'TABLE') {
                        // return the table (in case the original target is the table's container)
                        ts.buildTable(table, c);
                    }
                    ts.setup(table, c);
                });
            };

            ts.setup = function(table, c) {
                // if no thead or tbody, or tablesorter is already present, quit
                if (!table || !table.tHead || table.tBodies.length === 0 || table.hasInitialized === true) {
                    return c.debug ? log('stopping initialization! No table, thead, tbody or tablesorter has already been initialized') : '';
                }

                var k = '',
                    $this = $(table),
                    m = $.metadata;
                // initialization flag
                table.hasInitialized = false;
                // table is being processed flag
                table.isProcessing = true;
                // make sure to store the config object
                table.config = c;
                // save the settings where they read
                $.data(table, "tablesorter", c);
                if (c.debug) { $.data( table, 'startoveralltimer', new Date()); }

                // constants
                c.supportsTextContent = $('<span>x</span>')[0].textContent === 'x';
                // removing this in version 3 (only supports jQuery 1.7+)
                c.supportsDataObject = (function(version) {
                    version[0] = parseInt(version[0], 10);
                    return (version[0] > 1) || (version[0] === 1 && parseInt(version[1], 10) >= 4);
                })($.fn.jquery.split("."));
                // digit sort text location; keeping max+/- for backwards compatibility
                c.string = { 'max': 1, 'min': -1, 'max+': 1, 'max-': -1, 'zero': 0, 'none': 0, 'null': 0, 'top': true, 'bottom': false };
                // add table theme class only if there isn't already one there
                if (!/tablesorter\-/.test($this.attr('class'))) {
                    k = (c.theme !== '' ? ' tablesorter-' + c.theme : '');
                }
                c.$table = $this.addClass(ts.css.table + ' ' + c.tableClass + k);
                c.$tbodies = $this.children('tbody:not(.' + c.cssInfoBlock + ')');
                c.widgetInit = {}; // keep a list of initialized widgets
                // build headers
                buildHeaders(table);
                // fixate columns if the users supplies the fixedWidth option
                // do this after theme has been applied
                fixColumnWidth(table);
                // try to auto detect column type, and store in tables config
                buildParserCache(table);
                // build the cache for the tbody cells
                // delayInit will delay building the cache until the user starts a sort
                if (!c.delayInit) { buildCache(table); }
                // bind all header events and methods
                bindEvents(table);
                // get sort list from jQuery data or metadata
                // in jQuery < 1.4, an error occurs when calling $this.data()
                if (c.supportsDataObject && typeof $this.data().sortlist !== 'undefined') {
                    c.sortList = $this.data().sortlist;
                } else if (m && ($this.metadata() && $this.metadata().sortlist)) {
                    c.sortList = $this.metadata().sortlist;
                }
                // apply widget init code
                ts.applyWidget(table, true);
                // if user has supplied a sort list to constructor
                if (c.sortList.length > 0) {
                    $this.trigger("sorton", [c.sortList, {}, !c.initWidgets]);
                } else if (c.initWidgets) {
                    // apply widget format
                    ts.applyWidget(table);
                }

                // show processesing icon
                if (c.showProcessing) {
                    $this
                    .unbind('sortBegin.tablesorter sortEnd.tablesorter')
                    .bind('sortBegin.tablesorter sortEnd.tablesorter', function(e) {
                        ts.isProcessing(table, e.type === 'sortBegin');
                    });
                }

                // initialized
                table.hasInitialized = true;
                table.isProcessing = false;
                if (c.debug) {
                    ts.benchmark("Overall initialization time", $.data( table, 'startoveralltimer'));
                }
                $this.trigger('tablesorter-initialized', table);
                if (typeof c.initialized === 'function') { c.initialized(table); }
            };

            // *** Process table ***
            // add processing indicator
            ts.isProcessing = function(table, toggle, $ths) {
                table = $(table);
                var c = table[0].config,
                    // default to all headers
                    $h = $ths || table.find('.' + ts.css.header);
                if (toggle) {
                    if (c.sortList.length > 0) {
                        // get headers from the sortList
                        $h = $h.filter(function(){
                            // get data-column from attr to keep  compatibility with jQuery 1.2.6
                            return this.sortDisabled ? false : ts.isValueInArray( parseFloat($(this).attr('data-column')), c.sortList);
                        });
                    }
                    $h.addClass(ts.css.processing + ' ' + c.cssProcessing);
                } else {
                    $h.removeClass(ts.css.processing + ' ' + c.cssProcessing);
                }
            };

            // detach tbody but save the position
            // don't use tbody because there are portions that look for a tbody index (updateCell)
            ts.processTbody = function(table, $tb, getIt){
                var holdr;
                if (getIt) {
                    table.isProcessing = true;
                    $tb.before('<span class="tablesorter-savemyplace"/>');
                    holdr = ($.fn.detach) ? $tb.detach() : $tb.remove();
                    return holdr;
                }
                holdr = $(table).find('span.tablesorter-savemyplace');
                $tb.insertAfter( holdr );
                holdr.remove();
                table.isProcessing = false;
            };

            ts.clearTableBody = function(table) {
                $(table)[0].config.$tbodies.empty();
            };

            // restore headers
            ts.restoreHeaders = function(table){
                var c = table.config;
                // don't use c.$headers here in case header cells were swapped
                c.$table.find(c.selectorHeaders).each(function(i){
                    // only restore header cells if it is wrapped
                    // because this is also used by the updateAll method
                    if ($(this).find('.tablesorter-header-inner').length){
                        $(this).html( c.headerContent[i] );
                    }
                });
            };

            ts.destroy = function(table, removeClasses, callback){
                table = $(table)[0];
                if (!table.hasInitialized) { return; }
                // remove all widgets
                ts.refreshWidgets(table, true, true);
                var $t = $(table), c = table.config,
                $h = $t.find('thead:first'),
                $r = $h.find('tr.' + ts.css.headerRow).removeClass(ts.css.headerRow + ' ' + c.cssHeaderRow),
                $f = $t.find('tfoot:first > tr').children('th, td');
                // remove widget added rows, just in case
                $h.find('tr').not($r).remove();
                // disable tablesorter
                $t
                    .removeData('tablesorter')
                    .unbind('sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd '.split(' ').join('.tablesorter '));
                c.$headers.add($f)
                    .removeClass( [ts.css.header, c.cssHeader, c.cssAsc, c.cssDesc, ts.css.sortAsc, ts.css.sortDesc].join(' ') )
                    .removeAttr('data-column');
                $r.find(c.selectorSort).unbind('mousedown.tablesorter mouseup.tablesorter keypress.tablesorter');
                ts.restoreHeaders(table);
                if (removeClasses !== false) {
                    $t.removeClass(ts.css.table + ' ' + c.tableClass + ' tablesorter-' + c.theme);
                }
                // clear flag in case the plugin is initialized again
                table.hasInitialized = false;
                if (typeof callback === 'function') {
                    callback(table);
                }
            };

            // *** sort functions ***
            // regex used in natural sort
            ts.regex = {
                chunk : /(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi, // chunk/tokenize numbers & letters
                hex: /^0x[0-9a-f]+$/i // hex
            };

            // Natural sort - https://github.com/overset/javascript-natural-sort (date sorting removed)
            ts.sortNatural = function(a, b) {
                if (a === b) { return 0; }
                var xN, xD, yN, yD, xF, yF, i, mx,
                    r = ts.regex;
                // first try and sort Hex codes
                if (r.hex.test(b)) {
                    xD = parseInt(a.match(r.hex), 16);
                    yD = parseInt(b.match(r.hex), 16);
                    if ( xD < yD ) { return -1; }
                    if ( xD > yD ) { return 1; }
                }
                // chunk/tokenize
                xN = a.replace(r.chunk, '\\0$1\\0').replace(/\\0$/, '').replace(/^\\0/, '').split('\\0');
                yN = b.replace(r.chunk, '\\0$1\\0').replace(/\\0$/, '').replace(/^\\0/, '').split('\\0');
                mx = Math.max(xN.length, yN.length);
                // natural sorting through split numeric strings and default strings
                for (i = 0; i < mx; i++) {
                    // find floats not starting with '0', string or 0 if not defined
                    xF = isNaN(xN[i]) ? xN[i] || 0 : parseFloat(xN[i]) || 0;
                    yF = isNaN(yN[i]) ? yN[i] || 0 : parseFloat(yN[i]) || 0;
                    // handle numeric vs string comparison - number < string - (Kyle Adams)
                    if (isNaN(xF) !== isNaN(yF)) { return (isNaN(xF)) ? 1 : -1; }
                    // rely on string comparison if different types - i.e. '02' < 2 != '02' < '2'
                    if (typeof xF !== typeof yF) {
                        xF += '';
                        yF += '';
                    }
                    if (xF < yF) { return -1; }
                    if (xF > yF) { return 1; }
                }
                return 0;
            };

            // basic alphabetical sort
            ts.sortText = function(a, b) {
                return a > b ? 1 : (a < b ? -1 : 0);
            };

            // return text string value by adding up ascii value
            // so the text is somewhat sorted when using a digital sort
            // this is NOT an alphanumeric sort
            ts.getTextValue = function(a, d, mx) {
                if (mx) {
                    // make sure the text value is greater than the max numerical value (mx)
                    var i, l = a ? a.length : 0, n = mx + d;
                    for (i = 0; i < l; i++) {
                        n += a.charCodeAt(i);
                    }
                    return d * n;
                }
                return 0;
            };

            ts.sortNumeric = function(a, b, dir, mx) {
                if (a === b) { return 0; }
                if (isNaN(a)) { a = ts.getTextValue(a, dir, mx); }
                if (isNaN(b)) { b = ts.getTextValue(b, dir, mx); }
                return a - b;
            };

            // used when replacing accented characters during sorting
            ts.characterEquivalents = {
                "a" : "\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5", // áàâãäaå
                "A" : "\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5", // ÁÀÂÃÄAÅ
                "c" : "\u00e7\u0107\u010d", // çcc
                "C" : "\u00c7\u0106\u010c", // ÇCC
                "e" : "\u00e9\u00e8\u00ea\u00eb\u011b\u0119", // éèêëee
                "E" : "\u00c9\u00c8\u00ca\u00cb\u011a\u0118", // ÉÈÊËEE
                "i" : "\u00ed\u00ec\u0130\u00ee\u00ef\u0131", // íìIîïi
                "I" : "\u00cd\u00cc\u0130\u00ce\u00cf", // ÍÌIÎÏ
                "o" : "\u00f3\u00f2\u00f4\u00f5\u00f6", // óòôõö
                "O" : "\u00d3\u00d2\u00d4\u00d5\u00d6", // ÓÒÔÕÖ
                "ss": "\u00df", // ß (s sharp)
                "SS": "\u1e9e", // ? (Capital sharp s)
                "u" : "\u00fa\u00f9\u00fb\u00fc\u016f", // úùûüu
                "U" : "\u00da\u00d9\u00db\u00dc\u016e" // ÚÙÛÜU
            };
            ts.replaceAccents = function(s) {
                var a, acc = '[', eq = ts.characterEquivalents;
                if (!ts.characterRegex) {
                    ts.characterRegexArray = {};
                    for (a in eq) {
                        if (typeof a === 'string') {
                            acc += eq[a];
                            ts.characterRegexArray[a] = new RegExp('[' + eq[a] + ']', 'g');
                        }
                    }
                    ts.characterRegex = new RegExp(acc + ']');
                }
                if (ts.characterRegex.test(s)) {
                    for (a in eq) {
                        if (typeof a === 'string') {
                            s = s.replace( ts.characterRegexArray[a], a );
                        }
                    }
                }
                return s;
            };

            // *** utilities ***
            ts.isValueInArray = function(v, a) {
                var i, l = a.length;
                for (i = 0; i < l; i++) {
                    if (a[i][0] === v) {
                        return true;
                    }
                }
                return false;
            };

            ts.addParser = function(parser) {
                var i, l = ts.parsers.length, a = true;
                for (i = 0; i < l; i++) {
                    if (ts.parsers[i].id.toLowerCase() === parser.id.toLowerCase()) {
                        a = false;
                    }
                }
                if (a) {
                    ts.parsers.push(parser);
                }
            };

            ts.getParserById = function(name) {
                var i, l = ts.parsers.length;
                for (i = 0; i < l; i++) {
                    if (ts.parsers[i].id.toLowerCase() === (name.toString()).toLowerCase()) {
                        return ts.parsers[i];
                    }
                }
                return false;
            };

            ts.addWidget = function(widget) {
                ts.widgets.push(widget);
            };

            ts.getWidgetById = function(name) {
                var i, w, l = ts.widgets.length;
                for (i = 0; i < l; i++) {
                    w = ts.widgets[i];
                    if (w && w.hasOwnProperty('id') && w.id.toLowerCase() === name.toLowerCase()) {
                        return w;
                    }
                }
            };

            ts.applyWidget = function(table, init) {
                table = $(table)[0]; // in case this is called externally
                var c = table.config,
                    wo = c.widgetOptions,
                    widgets = [],
                    time, w, wd;
                if (c.debug) { time = new Date(); }
                if (c.widgets.length) {
                    // ensure unique widget ids
                    c.widgets = $.grep(c.widgets, function(v, k){
                        return $.inArray(v, c.widgets) === k;
                    });
                    // build widget array & add priority as needed
                    $.each(c.widgets || [], function(i,n){
                        wd = ts.getWidgetById(n);
                        if (wd && wd.id) {
                            // set priority to 10 if not defined
                            if (!wd.priority) { wd.priority = 10; }
                            widgets[i] = wd;
                        }
                    });
                    // sort widgets by priority
                    widgets.sort(function(a, b){
                        return a.priority < b.priority ? -1 : a.priority === b.priority ? 0 : 1;
                    });
                    // add/update selected widgets
                    $.each(widgets, function(i,w){
                        if (w) {
                            if (init || !(c.widgetInit[w.id])) {
                                if (w.hasOwnProperty('options')) {
                                    wo = table.config.widgetOptions = $.extend( true, {}, w.options, wo );
                                    c.widgetInit[w.id] = true;
                                }
                                if (w.hasOwnProperty('init')) {
                                    w.init(table, w, c, wo);
                                }
                            }
                            if (!init && w.hasOwnProperty('format')) {
                                w.format(table, c, wo, false);
                            }
                        }
                    });
                }
                if (c.debug) {
                    w = c.widgets.length;
                    benchmark("Completed " + (init === true ? "initializing " : "applying ") + w + " widget" + (w !== 1 ? "s" : ""), time);
                }
            };

            ts.refreshWidgets = function(table, doAll, dontapply) {
                table = $(table)[0]; // see issue #243
                var i, c = table.config,
                    cw = c.widgets,
                    w = ts.widgets, l = w.length;
                // remove previous widgets
                for (i = 0; i < l; i++){
                    if ( w[i] && w[i].id && (doAll || $.inArray( w[i].id, cw ) < 0) ) {
                        if (c.debug) { log( 'Refeshing widgets: Removing ' + w[i].id  ); }
                        if (w[i].hasOwnProperty('remove')) {
                            w[i].remove(table, c, c.widgetOptions);
                            c.widgetInit[w[i].id] = false;
                        }
                    }
                }
                if (dontapply !== true) {
                    ts.applyWidget(table, doAll);
                }
            };

            // get sorter, string, empty, etc options for each column from
            // jQuery data, metadata, header option or header class name ("sorter-false")
            // priority = jQuery data > meta > headers option > header class name
            ts.getData = function(h, ch, key) {
                var val = '', $h = $(h), m, cl;
                if (!$h.length) { return ''; }
                m = $.metadata ? $h.metadata() : false;
                cl = ' ' + ($h.attr('class') || '');
                if (typeof $h.data(key) !== 'undefined' || typeof $h.data(key.toLowerCase()) !== 'undefined'){
                    // "data-lockedOrder" is assigned to "lockedorder"; but "data-locked-order" is assigned to "lockedOrder"
                    // "data-sort-initial-order" is assigned to "sortInitialOrder"
                    val += $h.data(key) || $h.data(key.toLowerCase());
                } else if (m && typeof m[key] !== 'undefined') {
                    val += m[key];
                } else if (ch && typeof ch[key] !== 'undefined') {
                    val += ch[key];
                } else if (cl !== ' ' && cl.match(' ' + key + '-')) {
                    // include sorter class name "sorter-text", etc; now works with "sorter-my-custom-parser"
                    val = cl.match( new RegExp('\\s' + key + '-([\\w-]+)') )[1] || '';
                }
                return $.trim(val);
            };

            ts.formatFloat = function(s, table) {
                if (typeof s !== 'string' || s === '') { return s; }
                // allow using formatFloat without a table; defaults to US number format
                var i,
                    t = table && table.config ? table.config.usNumberFormat !== false :
                        typeof table !== "undefined" ? table : true;
                if (t) {
                    // US Format - 1,234,567.89 -> 1234567.89
                    s = s.replace(/,/g,'');
                } else {
                    // German Format = 1.234.567,89 -> 1234567.89
                    // French Format = 1 234 567,89 -> 1234567.89
                    s = s.replace(/[\s|\.]/g,'').replace(/,/g,'.');
                }
                if(/^\s*\([.\d]+\)/.test(s)) {
                    // make (#) into a negative number -> (10) = -10
                    s = s.replace(/^\s*\(([.\d]+)\)/, '-$1');
                }
                i = parseFloat(s);
                // return the text instead of zero
                return isNaN(i) ? $.trim(s) : i;
            };

            ts.isDigit = function(s) {
                // replace all unwanted chars and match
                return isNaN(s) ? (/^[\-+(]?\d+[)]?$/).test(s.toString().replace(/[,.'"\s]/g, '')) : true;
            };

        }()
    });

    // make shortcut
    var ts = $.tablesorter;

    // extend plugin scope
    $.fn.extend({
        tablesorter: ts.construct
    });

    // add default parsers
    ts.addParser({
        id: "text",
        is: function() {
            return true;
        },
        format: function(s, table) {
            var c = table.config;
            if (s) {
                s = $.trim( c.ignoreCase ? s.toLocaleLowerCase() : s );
                s = c.sortLocaleCompare ? ts.replaceAccents(s) : s;
            }
            return s;
        },
        type: "text"
    });

    ts.addParser({
        id: "digit",
        is: function(s) {
            return ts.isDigit(s);
        },
        format: function(s, table) {
            var n = ts.formatFloat((s || '').replace(/[^\w,. \-()]/g, ""), table);
            return s && typeof n === 'number' ? n : s ? $.trim( s && table.config.ignoreCase ? s.toLocaleLowerCase() : s ) : s;
        },
        type: "numeric"
    });

    ts.addParser({
        id: "currency",
        is: function(s) {
            return (/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/).test((s || '').replace(/[,. ]/g,'')); // £$€¤¥¢
        },
        format: function(s, table) {
            var n = ts.formatFloat((s || '').replace(/[^\w,. \-()]/g, ""), table);
            return s && typeof n === 'number' ? n : s ? $.trim( s && table.config.ignoreCase ? s.toLocaleLowerCase() : s ) : s;
        },
        type: "numeric"
    });

    ts.addParser({
        id: "ipAddress",
        is: function(s) {
            return (/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/).test(s);
        },
        format: function(s, table) {
            var i, a = s ? s.split(".") : '',
            r = "",
            l = a.length;
            for (i = 0; i < l; i++) {
                r += ("00" + a[i]).slice(-3);
            }
            return s ? ts.formatFloat(r, table) : s;
        },
        type: "numeric"
    });

    ts.addParser({
        id: "url",
        is: function(s) {
            return (/^(https?|ftp|file):\/\//).test(s);
        },
        format: function(s) {
            return s ? $.trim(s.replace(/(https?|ftp|file):\/\//, '')) : s;
        },
        type: "text"
    });

    ts.addParser({
        id: "isoDate",
        is: function(s) {
            return (/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/).test(s);
        },
        format: function(s, table) {
            return s ? ts.formatFloat((s !== "") ? (new Date(s.replace(/-/g, "/")).getTime() || "") : "", table) : s;
        },
        type: "numeric"
    });

    ts.addParser({
        id: "percent",
        is: function(s) {
            return (/(\d\s*?%|%\s*?\d)/).test(s) && s.length < 15;
        },
        format: function(s, table) {
            return s ? ts.formatFloat(s.replace(/%/g, ""), table) : s;
        },
        type: "numeric"
    });

    ts.addParser({
        id: "usLongDate",
        is: function(s) {
            // two digit years are not allowed cross-browser
            // Jan 01, 2013 12:34:56 PM or 01 Jan 2013
            return (/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i).test(s) || (/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i).test(s);
        },
        format: function(s, table) {
            return s ? ts.formatFloat( (new Date(s.replace(/(\S)([AP]M)$/i, "$1 $2")).getTime() || ''), table) : s;
        },
        type: "numeric"
    });

    ts.addParser({
        id: "shortDate", // "mmddyyyy", "ddmmyyyy" or "yyyymmdd"
        is: function(s) {
            // testing for ##-##-#### or ####-##-##, so it's not perfect; time can be included
            return (/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/).test((s || '').replace(/\s+/g," ").replace(/[\-.,]/g, "/"));
        },
        format: function(s, table, cell, cellIndex) {
            if (s) {
                var c = table.config, ci = c.headerList[cellIndex],
                format = ci.dateFormat || ts.getData( ci, c.headers[cellIndex], 'dateFormat') || c.dateFormat;
                s = s.replace(/\s+/g," ").replace(/[\-.,]/g, "/"); // escaped - because JSHint in Firefox was showing it as an error
                if (format === "mmddyyyy") {
                    s = s.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/, "$3/$1/$2");
                } else if (format === "ddmmyyyy") {
                    s = s.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/, "$3/$2/$1");
                } else if (format === "yyyymmdd") {
                    s = s.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/, "$1/$2/$3");
                }
            }
            return s ? ts.formatFloat( (new Date(s).getTime() || ''), table) : s;
        },
        type: "numeric"
    });

    ts.addParser({
        id: "time",
        is: function(s) {
            return (/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i).test(s);
        },
        format: function(s, table) {
            return s ? ts.formatFloat( (new Date("2000/01/01 " + s.replace(/(\S)([AP]M)$/i, "$1 $2")).getTime() || ""), table) : s;
        },
        type: "numeric"
    });

    ts.addParser({
        id: "metadata",
        is: function() {
            return false;
        },
        format: function(s, table, cell) {
            var c = table.config,
            p = (!c.parserMetadataName) ? 'sortValue' : c.parserMetadataName;
            return $(cell).metadata()[p];
        },
        type: "numeric"
    });

    // add default widgets
    ts.addWidget({
        id: "zebra",
        priority: 90,
        format: function(table, c, wo) {
            var $tb, $tv, $tr, row, even, time, k, l,
            child = new RegExp(c.cssChildRow, 'i'),
            b = c.$tbodies;
            if (c.debug) {
                time = new Date();
            }
            for (k = 0; k < b.length; k++ ) {
                // loop through the visible rows
                $tb = b.eq(k);
                l = $tb.children('tr').length;
                if (l > 1) {
                    row = 0;
                    $tv = $tb.children('tr:visible');
                    // revered back to using jQuery each - strangely it's the fastest method
                    /*jshint loopfunc:true */
                    $tv.each(function(){
                        $tr = $(this);
                        // style children rows the same way the parent row was styled
                        if (!child.test(this.className)) { row++; }
                        even = (row % 2 === 0);
                        $tr.removeClass(wo.zebra[even ? 1 : 0]).addClass(wo.zebra[even ? 0 : 1]);
                    });
                }
            }
            if (c.debug) {
                ts.benchmark("Applying Zebra widget", time);
            }
        },
        remove: function(table, c, wo){
            var k, $tb,
                b = c.$tbodies,
                rmv = (wo.zebra || [ "even", "odd" ]).join(' ');
            for (k = 0; k < b.length; k++ ){
                $tb = $.tablesorter.processTbody(table, b.eq(k), true); // remove tbody
                $tb.children().removeClass(rmv);
                $.tablesorter.processTbody(table, $tb, false); // restore tbody
            }
        }
    });

})(jQuery);

</script>
<style>
/*************
Default Theme
*************/
/* overall */
.tablesorter-default {
    width: 100%;
    font: 12px/18px Arial, Sans-serif;
    color: #333;
    background-color: #fff;
    border-spacing: 0;
    margin: 10px 0 15px;
    text-align: left;
}

/* header */
.tablesorter-default th,
.tablesorter-default thead td {
    font: bold 12px/18px Arial, Sans-serif;
    color: #000;
    background-color: #fff;
    border-collapse: collapse;
    border-bottom: #ccc 2px solid;
    padding: 0;
   
}
.tablesorter-default tfoot th,
.tablesorter-default tfoot td {
    border: 0;
}
.tablesorter-default .header,
.tablesorter-default .tablesorter-header {
    background-image: url(data:image/gif;base64,R0lGODlhFQAJAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAkAAAIXjI+AywnaYnhUMoqt3gZXPmVg94yJVQAAOw==);
    background-position: center right;
    background-repeat: no-repeat;
    cursor: pointer;
    white-space: normal;
    padding: 4px 20px 4px 4px;
}
.tablesorter-default thead .headerSortUp,
.tablesorter-default thead .tablesorter-headerSortUp,
.tablesorter-default thead .tablesorter-headerAsc {
    background-image: url(data:image/gif;base64,R0lGODlhFQAEAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAQAAAINjI8Bya2wnINUMopZAQA7);
    border-bottom: #54b5f1 2px solid;
}
.tablesorter-default thead .headerSortDown,
.tablesorter-default thead .tablesorter-headerSortDown,
.tablesorter-default thead .tablesorter-headerDesc {
    background-image: url(data:image/gif;base64,R0lGODlhFQAEAIAAACMtMP///yH5BAEAAAEALAAAAAAVAAQAAAINjB+gC+jP2ptn0WskLQA7);
    border-bottom: #54b5f1 2px solid;
}
.tablesorter-default thead .sorter-false {
    background-image: none;
    padding: 4px;
}

/* tfoot */
.tablesorter-default tfoot .tablesorter-headerSortUp,
.tablesorter-default tfoot .tablesorter-headerSortDown,
.tablesorter-default tfoot .tablesorter-headerAsc,
.tablesorter-default tfoot .tablesorter-headerDesc {
    border-top: #000 2px solid;
}

/* tbody */
.tablesorter-default td {
    background-color: #fff;
    border-bottom: #f3f3f3 1px solid;
    padding: 4px;
    vertical-align: top;
}

/* hovered row colors */
.tablesorter-default tbody > tr:hover > td,
.tablesorter-default tbody > tr.even:hover > td,
.tablesorter-default tbody > tr.odd:hover > td {
    background: #fff;
    color: #000;
}

/* table processing indicator */
.tablesorter-default .tablesorter-processing {
    background-position: center center !important;
    background-repeat: no-repeat !important;
    /* background-image: url(../addons/pager/icons/loading.gif) !important; */
    background-image: url('data:image/gif;base64,R0lGODlhFAAUAKEAAO7u7lpaWgAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQBCgACACwAAAAAFAAUAAACQZRvoIDtu1wLQUAlqKTVxqwhXIiBnDg6Y4eyx4lKW5XK7wrLeK3vbq8J2W4T4e1nMhpWrZCTt3xKZ8kgsggdJmUFACH5BAEKAAIALAcAAAALAAcAAAIUVB6ii7jajgCAuUmtovxtXnmdUAAAIfkEAQoAAgAsDQACAAcACwAAAhRUIpmHy/3gUVQAQO9NetuugCFWAAAh+QQBCgACACwNAAcABwALAAACE5QVcZjKbVo6ck2AF95m5/6BSwEAIfkEAQoAAgAsBwANAAsABwAAAhOUH3kr6QaAcSrGWe1VQl+mMUIBACH5BAEKAAIALAIADQALAAcAAAIUlICmh7ncTAgqijkruDiv7n2YUAAAIfkEAQoAAgAsAAAHAAcACwAAAhQUIGmHyedehIoqFXLKfPOAaZdWAAAh+QQFCgACACwAAAIABwALAAACFJQFcJiXb15zLYRl7cla8OtlGGgUADs=') !important;
}

/* Zebra Widget - row alternating colors */
.tablesorter-default tr.odd td {
    background-color: #dfdfdf;
}
.tablesorter-default tr.even td {
    background-color: #efefef;
}

/* Column Widget - column sort colors */
.tablesorter-default tr.odd td.primary {
    background-color: #bfbfbf;
}
.tablesorter-default td.primary,
.tablesorter-default tr.even td.primary {
    background-color: #d9d9d9;
}
.tablesorter-default tr.odd td.secondary {
    background-color: #d9d9d9;
}
.tablesorter-default td.secondary,
.tablesorter-default tr.even td.secondary {
    background-color: #e6e6e6;
}
.tablesorter-default tr.odd td.tertiary {
    background-color: #e6e6e6;
}
.tablesorter-default td.tertiary,
.tablesorter-default tr.even td.tertiary {
    background-color: #f2f2f2;
}

/* caption */
caption {
    background: #fff;
}

/* filter widget */
.tablesorter-default .tablesorter-filter-row td {
    background: #eee;
    border-bottom: #ccc 1px solid;
    line-height: normal;
    text-align: center; /* center the input */
    -webkit-transition: line-height 0.1s ease;
    -moz-transition: line-height 0.1s ease;
    -o-transition: line-height 0.1s ease;
    transition: line-height 0.1s ease;
}
/* optional disabled input styling */
.tablesorter-default .tablesorter-filter-row .disabled {
    opacity: 0.5;
    filter: alpha(opacity=50);
    cursor: not-allowed;
}
/* hidden filter row */
.tablesorter-default .tablesorter-filter-row.hideme td {
    /*** *********************************************** ***/
    /*** change this padding to modify the thickness     ***/
    /*** of the closed filter row (height = padding x 2) ***/
    padding: 2px;
    /*** *********************************************** ***/
    margin: 0;
    line-height: 0;
    cursor: pointer;
}
.tablesorter-default .tablesorter-filter-row.hideme .tablesorter-filter {
    height: 1px;
    min-height: 0;
    border: 0;
    padding: 0;
    margin: 0;
    /* don't use visibility: hidden because it disables tabbing */
    opacity: 0;
    filter: alpha(opacity=0);
}
/* filters */
.tablesorter-default .tablesorter-filter {
    width: 95%;
    height: auto;
    margin: 4px;
    padding: 4px;
    background-color: #fff;
    border: 1px solid #bbb;
    color: #333;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    -webkit-transition: height 0.1s ease;
    -moz-transition: height 0.1s ease;
    -o-transition: height 0.1s ease;
    transition: height 0.1s ease;
}

/* ajax error row */
.tablesorter .tablesorter-errorRow td {
    cursor: pointer;
    background-color: #e6bf99;
}


</style>
<script>
    $(document).ready(function() 
    { 
      //  $("#myTable").tablesorter();
         $("#myTable").tablesorter({ 
        // pass the headers argument and assing a object 
        headers: { 
            // assign the secound column (we start counting zero) 
            0: { 
                // disable it by setting the property sorter to false 
                sorter: false 
            }
        } 
    }); 
    } 
    ); 
</script>


<!--<table width="100%" border="2" cellspacing="0" cellpadding="0" class="grid"> -->

  <div style="width:99.8%; height:23px; background-color:#d6e3f2; text-align:center;" class="glossy">
      <apex:outputPanel rendered="{!NoRecordsFound}" id="NoRecords">
      <div style="font-weight:bold; float:center; color:#FF0000; padding:3px 0 0 8px;">
      <apex:outputText value="No Records Found"  />
      
      </div></apex:outputPanel>
  </div>
<DIV style="overflow:scroll;width:100%;height:305px;">
 <table width="100%" border="0" cellspacing="0" cellpadding="0" style="font-size:11px;" class="tablesorter-default" id="myTable">
    <thead>   <tr> 
       
        <th style="width:7%; "> Action</th>
        <th style="width:14%;">Name</th>
        <th style="width:19%;">Booth Name</th>
        <!--<th style="width:14%;">Booth Location</th>-->
        <th style="width:22%;">Email</th> 
        <th style="width:14%;">Phone</th>      
        <th style="width:7%;"> Status </th>
        <th style="width:14%;"> Last Login  </th>
       
       
     </tr>
             </thead> <tbody> 
<!--<tr><td colspan="10" class="trwhite" style="border-right:1px solid #91b5db;border-left:1px solid #91b5db;">


<table width="100%" border="0" cellspacing="0" cellpadding="0" style="font-size:11px;"> -->
<apex:repeat value="{!ForPagination }" var="BoothAdmins" >
<tr>
<td style="width:7%; ">
<apex:commandLink action="{!EditBoothAdmin}">
 <apex:param value="{!BoothAdmins.UPE.id}" name="BoothAdminName" assignTo="{!BoothAdminDetails}"/>
 <apex:image value="{!$Resource.Qrcode_edit}"/>
</apex:commandLink>&nbsp;&nbsp;    
</td>
<td style="width:14%;">
<apex:commandLink action="{!DisplayBoothAdminDetails}" value="{!BoothAdmins.UPE.BoothAdmin_id__r.FirstName} {!BoothAdmins.UPE.BoothAdmin_id__r.LastName}" 
style="color:#0000ff"> <apex:param value="{!BoothAdmins.UPE.id}" assignTo="{!BoothAdminDetails}" name="Bdetails"/></apex:commandLink>
</td>
<td style="width:19%;"><apex:outputText value="{!BoothAdmins.UPE.BT_id__r.BT_Name__c}"/></td>
<!--<td style="width:13%;"><apex:outputText value="{!BoothAdmins.UPE.BT_id__r.BT_Location__c}"/></td>-->
<td style="width:22%;"><apex:outputText value="{!BoothAdmins.UPE.BoothAdmin_id__r.UserName}"/></td>
<td style="width:14%;"><apex:outputText value="{!BoothAdmins.UPE.BoothAdmin_id__r.Companyphone__c}"/></td>
<td style="width:7%;"><apex:commandLink value="{!BoothAdmins.Bstatus}" action="{!Changestatus}" style="color:#0000ff">
 <apex:param value="{!BoothAdmins.UPE.id}" assignTo="{!BoothAdminDetails}" name="BStatus"/>       
</apex:commandLink></td>
<td style="width:14%;"> <apex:outputText value="{0,date,MM/dd/yyyy HH:MM:ss }">
                <apex:param value="{!BoothAdmins.UPE.BoothAdmin_id__r.LastLoginDate}"/>
    </apex:outputText></td>
</tr>
</apex:repeat><!--</td></table>
</tr>-->
</tbody> 
</table>
</div>


<!--
    <apex:pageBlock id="ListofBoothAdmins" >
      
    <apex:pageBlockTable var="BoothAdmins" value="{!ForPagination}" >
    
    <apex:column headerValue="Action">
    
    <apex:commandLink action="{!EditBoothAdmin}">
    
    <apex:param value="{!BoothAdmins.UPE.id}" name="BoothAdminName" assignTo="{!BoothAdminDetails}"/>
    <apex:image value="{!$Resource.Qrcode_edit}">
    </apex:image>
    </apex:commandLink>
    
    </apex:column>
    
    <apex:column headerValue="Name" >    
    
    <apex:commandLink action="{!DisplayBoothAdminDetails}" value="{!BoothAdmins.UPE.BoothAdmin_id__r.FirstName} {!BoothAdmins.UPE.BoothAdmin_id__r.LastName}">
    <apex:param value="{!BoothAdmins.UPE.id}" assignTo="{!BoothAdminDetails}" name="Bdetails"/>
    </apex:commandLink></apex:column>
    
    <apex:column value="{!BoothAdmins.UPE.BT_id__r.BT_Name__c}" headerValue="Booth Name"/>
     
    <apex:column value="{!BoothAdmins.UPE.BoothAdmin_id__r.UserName}" headerValue="Email"/> 
    
    <apex:column headerValue="Status" >
    <apex:commandLink value="{!BoothAdmins.Bstatus}" action="{!Changestatus}"> 
    <apex:param value="{!BoothAdmins.UPE.id}" assignTo="{!BoothAdminDetails}" name="BStatus"/>       
    </apex:commandLink>   
    </apex:column>
    
    
    <apex:column headerValue="Last Login ">
    <apex:outputText value="{0,date,MM/dd/yyyy HH:MM:ss }">
                <apex:param value="{!BoothAdmins.UPE.BoothAdmin_id__r.LastLoginDate}"/>
    </apex:outputText>  
    </apex:column>
    </apex:PageBlockTable>&nbsp;
   -->
        <div class="gridbottom" >
               <apex:panelGroup >
                <apex:commandLink reRender="ListofBoothAdmins"  action="{!First}" rendered="{!hasFirst}" >             
                       <apex:image value="{!$Resource.First_Icon}" height="16px" width="16px" title="First" /> 
                </apex:commandLink>&nbsp;&nbsp;
                <apex:image value="{!$Resource.Disabled_First_Icon}" height="16px" width="16px" title="First" rendered="{!Disabled_First_Icon}"/> &nbsp;&nbsp;
               
                <apex:commandLink reRender="ListofBoothAdmins"  action="{!Previous}" rendered="{!hasPrevious}">              
                       <apex:image value="{!$Resource.Previous_Icon}" height="16px" width="16px" title="Previous" /> 
                </apex:commandLink>&nbsp;&nbsp;
                <apex:image value="{!$Resource.Disabled_Previous_Icon}" height="16px" width="16px" title="Previous" rendered="{!Disabled_Previous_Icon}"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 
                <apex:commandLink reRender="ListofBoothAdmins"  action="{!Next}" rendered="{!hasNext}"  >             
                     <apex:image value="{!$Resource.Next_Icon}" height="16px" width="16px" title="Next" /> 
                </apex:commandLink>&nbsp;&nbsp;
                 <apex:image value="{!$Resource.Disabled_Next_Icon}" height="16px" width="16px" title="Next" rendered="{!Disabled_Next_Icon}"/>&nbsp;&nbsp;
                
                <apex:commandLink reRender="ListofBoothAdmins"  action="{!Last}" rendered="{!hasLast}">             
                        <apex:image value="{!$Resource.Last_Icon}" height="16px" width="16px" title="Last"  /> 
                </apex:commandLink>&nbsp;&nbsp;
                <apex:image value="{!$Resource.Disabled_Last_Icon}" height="16px" width="16px" title="Last" rendered="{!Disabled_Last_Icon}"/> 
                
                 <apex:outputLabel style="font-size:12px; margin-bottom:0px;float:right" rendered="{!DisplayPages}">Displaying {!pageno} - {!ForPagesize} of {!count} </apex:outputLabel>
                 <apex:outputLabel style="font-size:12px; margin-bottom:0px;float:right" rendered="{!NoRecordsFound}">No data to display</apex:outputLabel>

                </apex:panelGroup>
         </div>       
    
 </apex:outputPanel>

       
    </apex:form>                
    </td></tr>   </table>   
<!------------------ Adding Booth ----------------->
    <apex:form id="Exhibitorform">
                     <apex:outputPanel id="userpopup2">
                    <apex:outputPanel styleClass="popupBackground"  layout="block" rendered="{!CreatBoothAdminPopUp }"/>
                    <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!CreatBoothAdminPopUp }" style="width:80%">
             
                   <table width="100%" border="0" cellspacing="0" cellpadding="0">
   <tr>
     <td height="35" colspan="2" align="center" valign="middle" class="pophead"><H2 > <font size="4" color="#FFFFFF">Add Booth Admin</font> </H2>
     </td><td align="right" class="pophead">
         <div style="float:right;"><apex:commandButton value="Close" title="Close" image="{!$Resource.Close1}" action="{!ClosePopUp}" immediate="true"/> </div>
     </td>
   </tr>
   
   <tr>
     <td width="50%" align="center" valign="top"><table width="100%" border="0" cellspacing="5" cellpadding="0">
       <tr>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Booth Location</td>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">         
          <apex:inputField value="{!Booth.BT_Location__c}"  id="BLo" style="width:170px;"/>
        </td>
        </tr>
        <tr>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Booth Number<font size="4" color="red">*</font></td>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">         
          <apex:inputField value="{!Booth.MM_TableNo__c}"  id="tbl" style="width:170px;"/>
        </td>
        </tr>
       <tr>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">First Name<font size="4" color="red">*</font></td>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         
          <apex:inputField value="{!BoothAdminUser.FirstName}"  id="FirstName" style="width:170px;"/>
        </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Last Name<font size="4" color="red">*</font></td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputField value="{!BoothAdminUser.LastName}" id="LastName" style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Email ID<font size="4" color="red">*</font></td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputtext value="{!Email}"  id="emailId" style="width:170px;"/>
          
        </td>
        </tr>
       <tr>
         <td align="left" style="Padding-left:25px" colspan="3">
         <apex:outputText value="{!errormessage}" style="color:#FF0000;Font-size:1.0em;font-style:italic;font-family:Times New Roman; padding-left:15px;" rendered="{!error}"></apex:outputText>
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Organization Name<font size="4" color="red">*</font></td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputField value="{!BoothAdminUser.CompanyName}" id="OrgName" style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Phone Number</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputField value="{!BoothAdminUser.Companyphone__c}" id="BAphone" style="width:170px;" onkeyup="javascript:keyUP(this,event);" onblur="javascript:validatePhone(this);"/>
         </td>

        </tr>
        <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Fax Number</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.CompanyFaxNumber__c}" id="BAFax" style="width:170px;" onkeyup="javascript:keyUP(this,event);" onblur="javascript:validatePhone(this);"/>
         </td>

        </tr>
      <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Website</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
          <apex:inputfield value="{!BoothAdminUser.Company_website__c}"  style="width:170px;"/>
         </td>

        </tr>
     
       <tr>
         <td align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"></td>
         <td align="left" valign="middle" bgcolor="#FFFFFF"></td>
        </tr>
     </table></td>
     <td width="50%" height="25" align="center" valign="top"><table width="80%" border="0" cellspacing="5" cellpadding="0">
       
        
         <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Address1</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.CompanyAddr1__c}"  style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Address2</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.CompanyAddr2__c}"  style="width:170px;"/>
         
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization City</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.CompanyCity__c}" style="width:170px;" />
         
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization Country</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.Country__c}"/>
         
     </td>
        </tr><tr>
        <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization State</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.states__c }"  style="width:170px;"/>
         
      
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Zip Code</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputField value="{!BoothAdminUser.Zipcode__c}" style="width:170px;" id="AZip"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization PO Box</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.PoBox__c}" style="width:170px;"/>
        
         </td>
        </tr>
        <tr>
         <td align="left" style="Padding-left:25px" colspan="3"><apex:pageMessages /></td>
   
        </tr>
        
     </table></td>
   </tr>
   <tr>
     <td height="35px" colspan="2" align="center" valign="middle">
     <apex:commandbutton Value="Save" action="{!SaveBooth}" styleclass="awesome"  title="Save" onclick="return validateAddBoothFields();"/>&nbsp;&nbsp;
          
    <apex:commandButton Value="Cancel" styleClass="awesome" title="Cancel" action="{!ClosePopUp}" immediate="true"/> 
     </td>
   </tr>
 </table>
 </apex:outputpanel>
 </apex:outputpanel>       
                     
        </apex:form> 
<!----------- ::::::::::: END :::::::::::::: -------------------> 

<!------------------  Booth details----------------->
    <apex:form id="ExhibitorDetails">
                     <apex:outputPanel id="userpopup2">
                    <apex:outputPanel styleClass="popupBackground"  layout="block" rendered="{!ShowBoothAdminPopUp }"/>
                    <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!ShowBoothAdminPopUp }" style="width:80%">
             
                   <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
     <td height="35" colspan="2" align="center" valign="middle" class="pophead"><H2 > <font size="4" color="#FFFFFF">Booth Admin Details</font> </H2>
     </td><td align="right" class="pophead">
         <div style="float:right;"><apex:commandButton value="Close" title="Close" image="{!$Resource.Close1}" action="{!ClosePopUp}" immediate="true"/> </div>
     </td>
   </tr>
   <tr>
     <td width="50%" align="center" valign="top"><table width="100%" border="0" cellspacing="5" cellpadding="0">
     <tr>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Booth Location</td>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">         
          <apex:outputField value="{!OnlyBoothInfo.BT_Location__c}"  id="BLo" style="width:170px;"/>
        </td>
        </tr>
        <tr>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Booth Number</td>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">         
          <apex:outputField value="{!OnlyBoothInfo.MM_TableNo__c}"  id="batbl" style="width:170px;"/>
        </td>
        </tr>
       <tr>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">First Name</td>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         
          <apex:outputfield value="{!BoothAdmininfo.FirstName}"  id="BAFN" style="width:170px;"/>
        </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Last Name</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdmininfo.LastName}" id="BALastName" style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Email ID</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdmininfo.Username}"  id="BAemailId" style="width:170px;"/>
          
        </td>
        </tr>       
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Organization Name</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdmininfo.CompanyName}" id="BAOrgName" style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Phone Number</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdmininfo.Companyphone__c}" id="BAphone" style="width:170px;" />
         </td>

        </tr>
        <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Fax Number</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdmininfo.CompanyFaxNumber__c}" id="BAFax" style="width:170px;" />
         </td>

        </tr>
      <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Website</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
          <apex:outputfield value="{!BoothAdmininfo.Company_website__c}"  style="width:170px;"/>
         </td>

        </tr>
     
       <tr>
         <td align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"></td>
         <td align="left" valign="middle" bgcolor="#FFFFFF"></td>
        </tr>
     </table></td>
     <td width="50%" height="25" align="center" valign="top"><table width="80%" border="0" cellspacing="5" cellpadding="0">
       
        
         <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Address1</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdmininfo.CompanyAddr1__c}"  style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Address2</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdmininfo.CompanyAddr2__c}"  style="width:170px;"/>
         
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization City</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdminUser.CompanyCity__c}" style="width:170px;" />
         
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization Country</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdmininfo.Country__c}"/>
         
     </td>
        </tr><tr>
        <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization State</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdmininfo.states__c }"  style="width:170px;"/>
         
      
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Zip Code</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdmininfo.Zipcode__c}" style="width:170px;" id="BAZip"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization PO Box</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputfield value="{!BoothAdmininfo.PoBox__c}" style="width:170px;"/>
        
         </td>
        </tr>
        <tr>
         <td align="left" style="Padding-left:25px" colspan="3"><apex:pageMessages /></td>
   
        </tr>
        
     </table></td>
   </tr>
  <tr>
     <td height="35px" colspan="2" align="center" valign="middle">
      
    <apex:commandButton Value="Cancel" styleClass="awesome" title="Cancel" action="{!ClosePopUp}" immediate="true"/> 
     </td>
   </tr>
 </table>
 </apex:outputpanel>
 </apex:outputpanel>       
                     
        </apex:form> 
<!----------- ::::::::::: END :::::::::::::: ------------------->   
 <!------------------ Edit Booth ----------------->
    <apex:form id="EditExhibitor">
    <!-- id="EditExhibitor"> -->
                     <apex:outputPanel id="userpopup2">
                    <apex:outputPanel styleClass="popupBackground"  layout="block" rendered="{!EditBoothAdminPopUp }"/>
                    <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!EditBoothAdminPopUp }" style="width:80%">
             
                   <table width="100%" border="0" cellspacing="0" cellpadding="0">

      <tr>
     <td height="35" colspan="2" align="center" valign="middle" class="pophead"><H2 > <font size="4" color="#FFFFFF">Edit Booth Admin</font> </H2>
     </td><td align="right" class="pophead">
         <div style="float:right;"><apex:commandButton value="Close" title="Close" image="{!$Resource.Close1}" action="{!ClosePopUp}" immediate="true"/> </div>
     </td>
   </tr>
   <tr>
     <td width="50%" align="center" valign="top"><table width="100%" border="0" cellspacing="5" cellpadding="0">
       <tr>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Booth Location</td>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         
          <apex:inputField value="{!OnlyBoothInfo.BT_Location__c}"  id="BL" style="width:170px;"/>
        </td>
        </tr>
        <tr>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Booth Number<font size="4" color="red">*</font></td>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">         
          <apex:inputField value="{!OnlyBoothInfo.MM_TableNo__c}"  id="EditBAtable" style="width:170px;"/>
        </td>
        </tr>
       <tr>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">First Name<font size="4" color="red">*</font></td>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         
          <apex:inputField value="{!BoothAdmininfo.FirstName}"  id="FirstNameEdit" style="width:170px;"/>
        </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Last Name<font size="4" color="red">*</font></td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputField value="{!BoothAdmininfo.LastName}" id="LastNameEdit" style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Email ID<font size="4" color="red">*</font></td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputField value="{!BoothAdmininfo.Username}"  id="BAemailId" style="width:170px;"/>
          
        </td>
        </tr>       
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Organization Name<font size="4" color="red">*</font></td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputField value="{!BoothAdmininfo.CompanyName}" id="EditOrgName" style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Phone Number</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputField value="{!BoothAdmininfo.Companyphone__c}" id="BAphone" style="width:170px;" onkeyup="javascript:keyUP(this,event);" onblur="javascript:validatePhone(this);"/>
         </td>

        </tr>
        <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Fax Number</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdmininfo.CompanyFaxNumber__c}" id="BAFax" style="width:170px;" onkeyup="javascript:keyUP(this,event);" onblur="javascript:validatePhone(this);"/>
         </td>

        </tr>
      <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Website</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
          <apex:inputField value="{!BoothAdmininfo.Company_website__c}"  style="width:170px;"/>
         </td>

        </tr>
     
       <tr>
         <td align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"></td>
         <td align="left" valign="middle" bgcolor="#FFFFFF"></td>
        </tr>
     </table></td>
     <td width="50%" height="25" align="center" valign="top"><table width="80%" border="0" cellspacing="5" cellpadding="0">
       
        
         <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Address1</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdmininfo.CompanyAddr1__c}"  style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Address2</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdmininfo.CompanyAddr2__c}"  style="width:170px;"/>
         
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization City</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.CompanyCity__c}" style="width:170px;" />
         
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization Country</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdmininfo.Country__c}"/>
         
     </td>
        </tr><tr>
        <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization State</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdmininfo.states__c }"  style="width:170px;"/>
         
      
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Zip Code</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputField value="{!BoothAdmininfo.Zipcode__c}" style="width:170px;" id="EditZip"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization PO Box</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdmininfo.PoBox__c}" style="width:170px;"/>
        
         </td>
        </tr>
        <tr>
         <td align="left" style="Padding-left:25px" colspan="3"><apex:pageMessages /></td>
   
        </tr>
        
     </table></td>
   </tr>
  <tr>
     <td height="35px" colspan="2" align="center" valign="middle">
    <apex:commandButton Value="Save"  action="{!UpdateUser}" styleclass="awesome"  title="Save" onclick="return EditValidateForm();"/>&nbsp;&nbsp;
    
    <apex:commandbutton Value="Cancel" styleClass="awesome" title="Cancel" action="{!ClosePopUp}"/> 
     </td>
   </tr>
 </table>
   

 </apex:outputpanel>
 </apex:outputpanel>       
                     
        </apex:form> 
<!----------- ::::::::::: END :::::::::::::: -------------------> 
<!------------------------------------------------ POP UP For Displaying Status ---------------------------------------->      
    
     <apex:form id="Statuspopup">
      
          <apex:outputPanel id="userstatuspop">
             <apex:outputPanel styleClass="popupBackground"  layout="block" rendered="{!Statuspopup}"/>
             <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!Statuspopup}" style="width:35%">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
   <tr>
     <td colspan="2" align="center" valign="middle" class="pophead" ><H2 > <font style="font-size:20px; color:#FFFFFF;">Change Booth Admin Status</font> </H2>
     </td><td class="pophead" align="right">
      <div style="float:right;"><apex:commandButton action="{!ClosePopUp}" value="Close" title="Close" image="{!$Resource.Close1}"/> </div>
     </td>
   </tr>
   
     <tr><td colspan="2" style="height:10px;"></td></tr>
       
       <tr>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:50px;"><b>Status Change To</b></td>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px"><apex:selectList value="{!SelectedStatus}" size="1" style="width:120px">
            <apex:selectOptions value="{!StatusList}">
            </apex:selectOptions></apex:selectList></td>
        </tr>
        <tr><td colspan="2" style="height:10px;"></td></tr>
       <tr>
       <td align="center" colspan="2"><apex:commandbutton value="Save" action="{!SaveStatus}" styleclass="awesome" title="Save" />&nbsp;&nbsp;
           <apex:commandbutton value="Cancel" action="{!ClosePopUp}" styleclass="awesome" title="Cancel"/>
       </td></tr>  
        <tr><td colspan="2" style="height:10px;"></td></tr>    
              </table>       
             </apex:outputpanel>
          </apex:outputPanel>            
      </apex:form>      
 <!--  end content-table  -->
 <!------------------ Adding Only BoothAdmin ----------------->
    <apex:form id="BoothAdminform">
                     <apex:outputPanel id="userpopup2">
                    <apex:outputPanel styleClass="popupBackground"  layout="block" rendered="{!CreatOnlyBoothAdminPopUp }"/>
                    <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!CreatOnlyBoothAdminPopUp }" style="width:80%">
             
                   <table width="100%" border="0" cellspacing="0" cellpadding="0">
   <tr>
     <td height="35" colspan="2" align="center" valign="middle" class="pophead"><H2 > <font size="4" color="#FFFFFF">Add Booth Admin</font> </H2>
     </td><td align="right" class="pophead">
         <div style="float:right;"><apex:commandButton value="Close" title="Close" image="{!$Resource.Close1}" action="{!ClosePopUp}"/> </div>
     </td>
   </tr>
   <tr>
     <td width="50%" align="center" valign="top"><table width="100%" border="0" cellspacing="5" cellpadding="0">
       <tr>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">First Name<font size="4" color="red">*</font></td>
         <td width="50%" height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         
          <apex:inputtext value="{!BoothAdminUser.FirstName}"  id="BAFN" style="width:170px;"/>
        </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Last Name<font size="4" color="red">*</font></td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputtext value="{!BoothAdminUser.LastName}" id="BALastName" style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Email ID<font size="4" color="red">*</font></td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputtext value="{!Email}"  id="BAemailId" style="width:170px;"/>
          
        </td>
        </tr>
       <tr>
         <td align="left" style="Padding-left:25px" colspan="3">
         <apex:outputText value="{!errormessage}" style="color:#FF0000;Font-size:1.0em;font-style:italic;font-family:Times New Roman; padding-left:15px;" rendered="{!error}"></apex:outputText>
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;">Organization Name<font size="4" color="red">*</font></td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:outputtext value="{!BoothName.BT_Name__c}" id="BAOrgName" style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Phone Number</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputtext value="{!BoothAdminUser.Companyphone__c}" id="BAphone" style="width:170px;" onkeyup="javascript:keyUP(this,event);" onblur="javascript:validatePhone(this);"/>
         </td>

        </tr>
        <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Fax Number</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.CompanyFaxNumber__c}" id="BAFax" style="width:170px;" onkeyup="javascript:keyUP(this,event);" onblur="javascript:validatePhone(this);"/>
         </td>

        </tr>
      <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"> Organization Website</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
          <apex:inputfield value="{!BoothAdminUser.Company_website__c}"  style="width:170px;"/>
         </td>

        </tr>
     
       <tr>
         <td align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:25px;"></td>
         <td align="left" valign="middle" bgcolor="#FFFFFF"></td>
        </tr>
     </table></td>
     <td width="50%" height="25" align="center" valign="top"><table width="80%" border="0" cellspacing="5" cellpadding="0">
       
        
         <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Address1</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.CompanyAddr1__c}"  style="width:170px;"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Address2</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.CompanyAddr2__c}"  style="width:170px;"/>
         
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization City</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.CompanyCity__c}" style="width:170px;" />
         
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization Country</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.Country__c}"/>
         
     </td>
        </tr><tr>
        <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF"> Organization State</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.states__c }"  style="width:170px;"/>
         
      
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization Zip Code</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputField value="{!BoothAdminUser.Zipcode__c}" style="width:170px;" id="BAZip"/>
        
         </td>
        </tr>
       <tr>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF">Organization PO Box</td>
         <td height="35px" align="left" valign="middle" bgcolor="#FFFFFF" style="padding-left:5px">
         <apex:inputfield value="{!BoothAdminUser.PoBox__c}" style="width:170px;"/>
        
         </td>
        </tr>
        <tr>
         <td align="left" style="Padding-left:25px" colspan="3"><apex:pageMessages /></td>
   
        </tr>
        
     </table></td>
   </tr>
   <tr>
     <td height="35px" colspan="2" align="center" valign="middle">
     <apex:commandbutton Value="Save" action="{!SaveBooth}" styleclass="awesome"  title="Save" onclick="return ValidateBoothadminForm();"/>&nbsp;&nbsp;
          
    <apex:commandbutton Value="Cancel" styleClass="awesome" title="Cancel" action="{!ClosePopUp}"/> 
     </td>
   </tr>
 </table>
 </apex:outputpanel>
 </apex:outputpanel>       
                     
        </apex:form> 
<!----------- ::::::::::: END :::::::::::::: -------------------> 
 <!--  start actions-box ............................................... -->
 </div>           <!-- end actions-box........... -->
 <div class="clear"></div>
         </div>
        <!--  end content-table-inner ............................................END  -->
        </td>
        <td id="tbl-border-right"></td>
    </tr>
    <tr>
        <th class="sized bottomleft"></th>
        <td id="tbl-border-bottom">&nbsp;</td>
        <th class="sized bottomright"></th>
    </tr>
    </table>
    <div class="clear">&nbsp;</div>
</div>
<!--  end content -->
<div class="clear" id="clearDiv">&nbsp;</div>
</div>
<!--  end content-outer........................................................END -->
<div class="clear">&nbsp;</div>
<script>

</script>
    <!-- start footer -->         
<apex:include pageName="QRCode_Footertemplate"/>
<!-- end footer -->    

</apex:page>