<apex:page showHeader="false" sidebar="false" standardStylesheets="false" controller="BLN_Themescon" action="{!templateportion}">
 
 <!-- <apex:stylesheet value="{!URLFOR($Resource.edsr_master, 'edsr_root/customtools/css/bootstrap.min.css')}"/> -->

  <apex:stylesheet value="{!URLFOR($Resource.gridmanager, 'demo/css/bootstrap.css')}"/>
  <apex:stylesheet value="{!URLFOR($Resource.edsr_master, 'edsr_root/customtools/css/font-awesome.css')}"/> 
  <apex:stylesheet value="{!URLFOR($Resource.gridmanager, 'demo/css/ed-reg.css')}"/>
  <apex:stylesheet value="{!URLFOR($Resource.gridmanager, 'demo/css/jquery.gridmanager.css')}"/>
 <apex:stylesheet value="{!URLFOR($Resource.gridmanager, 'demo/css/demo.css')}"/>
   <apex:stylesheet value="{!URLFOR($Resource.edsr_master, 'edsr_root/customtools/css/toastr.min.css')}"/>
   <apex:stylesheet value="{!URLFOR($Resource.edsr_master, 'edsr_root/customtools/css/bootstrap-formhelpers.css')}"/>
   <!--       <apex:stylesheet value="{!URLFOR($Resource.edsr_master, 'edsr_root/customtools/css/ed_regtool.css')}"/> -->
   <apex:stylesheet value="{!URLFOR($Resource.edsr_master, 'edsr_root/customtools/css/animate.css')}"/>
  <!-- Responsive -->
 <apex:stylesheet value="{!URLFOR($Resource.edsr_master, 'edsr_root/css/reg_responsive.css')}"/>
   <apex:form >
      <div class="clear"></div>
      <!--close of topstats--->
      <div class="selectall_entire">
         <span> Template &nbsp;&nbsp; <strong>:&nbsp; <span id='seltempname'> </span> </strong><br/>
         <span> Type      <strong> <span id='seltemptype' style="padding-left: 35px;"> </span> </strong></span>
         </span>
      </div>
      
      <!-------------all styles----------->
   
  <style>
      .dropzone {
      position: relative;
      color: white;
      font: bold 24px/100px arial;
      height: 100px;
      padding: 5px;
      text-align: center;
      width: 100px;
      background-color: rgba(228, 228, 228, 0.17);
      border-radius: 3px;
      border: 1px solid #ddd;
      box-shadow: 0 1px 3px rgba(213, 213, 213, 0.4) inset, 0 1px 0 rgba(255,255,255,.2);
      }
      .dropzone div {
      position: absolute;
      padding: 3px;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background: url(../images/dropbg.png) no-repeat center;
      }
      .dropzone [type="file"] {
      cursor: pointer;
      position: absolute;
      opacity: 0;
      top: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      left: 0;
      }
   </style>
   <style>
      header{
      // background:url('edsr_master/edsr_root/customtools/images/eventdex-logo.png');
      padding-top:10px;
      height:70px;  
      background-color:#e6e7e8;
      }
      .newrow-grpbox{ margin-top:10px;}
      .newrow-grpcnt{ }
      .btn-group .rightaction_ul{margin-top:12px;padding:5px;}
      .btn-group .rightaction_ul li{background-color:#3071a9; cursor:pointer;padding:5px;border-right: 2px solid #fff;}
      .btn-group .rightaction_ul li:last-child{border-right:none;}
      .btn-group .rightaction_ul li:hover{ padding:5px; background-color:#BED0E0;}
      .actionskit_wrapper{ width:100%; margin-top:10px; padding:5px; display:inline-block; background-color:#E6E7E8; border:1px solid #F3F3F3;}
      .actionskit_wrapper #gm-addnew a { color:#7A7B7B; border-right:2px solid #fff;}
      .actionskit_wrapper #gm-addnew a:hover{ background-color:#f9f9f9;}
      .canvas_wrapper{ padding:0px; background-color:#FBFBFB;}
      #gm-canvas{ padding:10px; background-color:#fff;border: 1px solid #E8E8E8;}
      #gm-canvas .row.gm-editing{ background-color:#fff;}
      /***********************************************/
      .blocks{
      height: 100px;
    
    border: 1px solid #dbdbdb;
    background-color: #ffffff;
      }
      .blocks span{ color:#FFF; padding-left:2px;}
      .triclass{
      width: 0;
      height: 0;
      border-top: 35px solid #337ab7;
      border-right: 35px solid transparent;
      margin-top:-22px;
      }
      .each_block {
      padding-bottom: 10px;
      }
      .triclass p{ margin: auto 20px; }
      .link{ width:50%; line-height:35px; padding:10px; text-decoration:none; }
      .sidebybtn{ width:100%; background-color:#CCC; text-align:center;color:#414141;}
      .sidebybtn:hover{ background-color:#093;color:#FFF !important; cursor:pointer;}
      .sidebybtn span:hover{color:#FFF !important; text-decoration:none !important;}
      .cb-enable, .cb-disable, .cb-enable span, .cb-disable span {
      background-color: #f0eeee;
      display: block;
      float: left;
      padding: 1px;
    
      }
      .cb-enable span, .cb-disable span {
      line-height: 30px;
      display: block;
      background-repeat: no-repeat;
      font-weight: 100;
      }
      .cb-enable span {
      background-position: left -90px;
      padding: 5px 8px;
      font-size: 16px;
      }
      .cb-disable span {
      background-position: right -180px;
      padding: 5px 8px;
      font-size: 16px;
      }
      .cb-disable.selected {
      background-position: 0 -30px;
      }
      .cb-disable.selected span {
      background-position: right -210px;
      color: #fff;
      background-color: #5db75d;
      box-shadow: 0px 5px 5px #CACACA;
      }
      .cb-enable.selected {
      background-position: 0 -60px;
      }
      .cb-enable.selected span {
      background-position: left -150px;
      color: #fff;
      background-color: #5db75d;
      margin-right:15px;
      margin-top:2px;
      
      }
      .switch label {
      cursor: pointer;
      }
      .cb-enable span, .cb-disable span {
      background-color: #ffffff;
      display: block;
      float: left;
      padding: 5px;
      margin-bottom:2px;
       margin-top:2px;
      }
   </style>
    <style>
 .selectall_entire{
      font-size: 13px;
     border:1px solid #ddd;
     display:none;
      margin-top:0px; 
     position:absolute; 
      margin-left:42%; 
     z-index:10;
      padding:15px;
     background-color:#e6e7e8;
     border-radius:3px;
     }
 </style>

  <style>
  .opacitycl{
         background-color:rgba(146,181,213,0.6);
         
         }
  </style>
      
      <!--------------end of all styles-------->
  <!---close of selectall_entire---->

<apex:inputHidden id="hiddenevent" value="{!selectedevent}"/>
        <input type='hidden' id='hiddenevenename' value='{!ee.Name}'/>
        <input type='hidden' id='hiddenevenelogo' value='{!ee.Logo_URL__c}'/>
        <input type='hidden' id='hiddenorgid' value='{!$Organization.Id}'/>
        <input type='hidden' id='organiserfname' value='{!GNUSRSDETAILS.First_Name__c}'/>
        <input type='hidden' id='organiserlname' value='{!GNUSRSDETAILS.Last_Name__c}'/>
        <input type='hidden' id='organiserphone' value='{!ee.Phone_Number__c}'/>
        <input type='hidden' id='organiseremail' value='{!ee.Organizer_Email__c}'/>
        <input type='hidden' id='typeoftemplate' value=''/>
        <input type='hidden' id='standardtemplateid' value=''/>
        <input type='hidden' id='themepage1' value=''/>
        <input type='hidden' id='themepage2' value=''/>
        <input type='hidden' id='seltname' value=''/>   
        <input type='hidden' id='AttendeeTemplateId' value=''/>
        <input type='hidden' id='selectedtemplatename' value=''/>
      <input type='hidden' id='selectedtheme' value=''/>
</apex:form>

<html>
    <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Eventdex Registration</title>
</head>
<header>
         <img src="{!URLFOR($Resource.edsr_master, 'edsr_root/images/eventdexportal.png')}"  style="height: 50px;padding-left: 30px;"/>
 <span style=" padding-left: 380px;" id='loader'>
         <img src="/Eventdex/resource/1449562078000/createevents/createevents/images/ajaxloader.gif" />
         </span>

         <span style=" display:none; padding-left: 380px;" id='loadersave' >
      <span>Saving Template </span>   <img src="/Eventdex/resource/1449562078000/createevents/createevents/images/ajaxloader.gif" />
    </span>
        <!-- <span>
<!--<button type="button" class="btn btn-primary" style="float:right;color:#fff">-->
            <!--<a style="color:#fff;float:right;" class="action btn btn-primary" href="/Eventdex/apex/BLN_Dashboard" >Return to Event Manager</a>-->
        <!-- </span>-->
         <!--Standard and Custom Template Button code start -->    
            <div class="field switch pull-right" style="width:auto;padding-top: 2px;padding-right: 10px;display:none;padding-right: 25px;">
               <label for="radio1" class="cb-enable selected" >
               <input type="hidden" value="Stanadard_temp"  name="optradio" />
               <span onclick='openstandardtemplates()'>Standard Templates</span>
               </label>
               
               <label for="radio2" class="cb-disable">  <input type="hidden" value="custom_temp" name="optradio" /><span onclick='opentemplates()'>Custom Templates</span></label>
            
            <!---new publish button----->
               <a class="  publishbutton" onclick='publishtemplate()' style="height: 38px;color:#5cb85c;display:none">
            
            <img src="{!URLFOR($Resource.gridmanager, 'demo/images/publish_icon.png')}" width="24px" height="24px" title="publish" style="margin:13px;"/>
           
            </a>
            <a class=" publishbutton1"  style="height: 38px;color:#5cb85c;display:none;" title="Template Published">
           <span  title="Template Published" style="font-size:20px;padding-left: 13px;padding-right: 13px;"> Live</span>
            </a>
            <a href="/Eventdex/apex/BLN_Dashboard">
           <img src="{!URLFOR($Resource.gridmanager, 'demo/images/return_icon.png')}" width="24px" height="24px" title="Return to Event Manager" />
           </a>
            <!---end of new publish button---->
            </div>
           
</header>
    <body style="background-color:#fff;">
    
    <!-----new code ------------>
    <div style=" margin-top:5px;"> 
            <!--End  of Standard and Custom Template Button-->  
 
 <!------Publish Button-------->
         <!--   <a class="pull-right btn btn-success publishbutton" onclick='publishtemplate()' style="height: 38px;display:none">
  <img src="{!URLFOR($Resource.gridmanager, 'demo/images/publish1.png')}" width="24px" height="24px"/> &nbsp;Publish
            </a>-->
           <!-- <a class="pull-right  publishbutton1"  style="height: 38px;color:#5cb85c;display:none">
 Live/ Published
 </a>
 
 <a class="pull-right helpbutton"  style="height: 38px;color:#5cb85c;display:none">
 help
            </a>-->
 <div style="clear:both;"></div>
 </div>
<!----// Publish Button---------->
    <!--------end of new code----->
    <!----page 1&2 tabs----->
         <ul class="nav nav-tabs" style="padding-left: 30px;">
        <li id='ftab'><a data-toggle="tab" href="#mycanvas" onclick='showpage("mycanvas")'>Page 1</a></li>
        <li id='stab'><a data-toggle="tab" href="#mycanvas1" onclick='showpage("mycanvas1")'>Page 2</a></li>
    </ul>
    <!----end of page 1&2 tabs----->
         <div id='mycanvas' class="tab-pane fade" style="padding-left: 22px;padding-right: 22px;">
        
    </div>
    
    <div class="column col-sm-12 col-xs-12 col-md-10 ui-sortable col-md-offset-1">

           <div id='mycanvas1' class="tab-pane fade">
           
           </div>
    </div>
           <!---model box for templates------>
           <!-- Modal  -->
    
    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
                  <div class="modal-header" style="background:#337ab7;border-radius:6px 6px 0px 0px;">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                     <h4 class="modal-title" style="color:#ffffff; font-weight:100;">Custom Registration Templates</h4>
                </div>
                <div class="modal-body">
            <!--  Templates starts here -->
                    <div id="templates_list">
                     <div style="background-color:#f5f5f5;">
                        <div class="wrap" style="padding-top: 13px;">
                        <ul class='template_list'>
                            <li>
                                <span>
                                </span>
                            </li>
                            <li>
                                <span>
                                </span>
                 
                            </li> 
                        </ul>
                        </div>
                        </div>
                     </div>
                     
                      <div class="divdisplay1" style="display:none;">
                        
                         <p style="margin-top:20px;">Choose Theme</p>
                          <div class="standard-themes1" style="background-color:#f5f5f5; display:flex; padding:14px;">
                          
                  
                        </div>
                    </div>
         
                </div>
            <!--end of modal body--->
        
        </div>
        
    </div>
  </div>
           <!----end of templates model box---->




           <!---model box for Default templates------>
           <!-- Modal  -->
        <!---model box for Default templates------>
         <!-- Modal  -->
<div id="myModal1" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
                  <div class="modal-header" style="background:#337ab7;border-radius:6px 6px 0px 0px;">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
                     <h4 class="modal-title" style="color:#ffffff; font-weight:100;">Standard Registration Templates</h4>
      </div>
      
      <div class="modal-body">
      
    <!--  Templates starts here -->
            <div id="templates_list">           
                     <div style='background-color:#f5f5f5; '>
                        <div class="wrap" style='padding-top: 13px;'>
                  <ul class='template_list_default'>
                  </ul>
                  </div>
            </div>
                     </div>
                     
                     <div class="divdisplay" style="display:none;">
                        
                         <p style="margin-top:20px;">Choose standard Theme</p>
                          <div class="standard-themes" style="background-color:#f5f5f5; display:flex; padding:14px;">
                          
                          
                          </div>
                         </div>
        <!--  Templates starts here -->
         
      </div>
        
      </div>
  
    </div>
  </div>
         <script>
         


         </script>
         <!----end of default templates model box---->

         <!----end of default templates model box---->
<script type="text/javascript" src="{!URLFOR($Resource.edsr_master, 'edsr_root/customtools/js/jquery-2.1.1.js')}"> </script>
<script type="text/javascript" src="{!URLFOR($Resource.edsr_master, 'edsr_root/customtools/js/bootstrap.min.js')}"> </script>
         <script type="text/javascript" src="{!URLFOR($Resource.edsr_master, 'edsr_root/customtools/js/bootstrap-formhelpers.js')}"> </script>
         <script type="text/javascript" src="{!URLFOR($Resource.edsr_master, 'edsr_root/customtools/js/jquery.metisMenu.js')}"> </script>
         <script type="text/javascript" src="{!URLFOR($Resource.edsr_master, 'edsr_root/customtools/js/jquery.slimscroll.min.js')}"> </script>
 <!--<apex:stylesheet value="{!URLFOR($Resource.gridmanager, 'demo/css/bootstrap.css')}"/> -->
   
 
   
 
 <!--<script type="text/javascript" src="{!URLFOR($Resource.gridmanager, 'demo/js/jquery.js')}"> </script>-->

        <script type="text/javascript" src="{!URLFOR($Resource.gridmanager, 'demo/js/jquery-ui.js')}"> </script>
<!-- <script type="text/javascript" src="{!URLFOR($Resource.gridmanager, 'demo/js/bootstrap.js')}"> </script>-->


        <script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.1.2/tinymce.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tinymce/4.1.2/jquery.tinymce.min.js"></script> 
  
 <!--<script type="text/javascript" src="{!URLFOR($Resource.gridmanager, 'dist/js/jquery.gridmanager.js')}"> </script>-->
        <c:gridmanagerComponent ></c:gridmanagerComponent>
<!---grid manager script----->

</body>
<script>
      var switched;
    var standardThemes={};
    var nameandcolor = {};
    var nameandid = {};
    var customtemplateTheme = {};
        nameandcolor['Olive'] = '#43a800';
        nameandcolor['Aqua'] =  '#98f4e8';
        nameandcolor['Grey'] =  '#e6e7e8';
        nameandcolor['Blue'] =  '#2174a8';
        nameandcolor['Black'] = '#2f2f2f';
 

    var canvasStructure = {};
    var canvasStructure1 = {};
    var canvasStructure2 = {};
    var canvasStructure22 = {};
    var selectedTemplate;
         var templateandids = [];
var livetemplateid='';
var livetemplatename = '';
$(document).ready(function(){  

    $("#mycanvas").gridmanager({
        debug: 1}
        );
    
    $("#mycanvas1").gridmanager({
        debug: 1}
        );
        //first page canvas structure
    Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.getAllTemplates}', '{!selectedevent}',
 
            function(result, event){
            console.log(result);
            for(var i=0,j=1;i<result.length;i++,j++)           
            {
            
            canvasStructure[result[i].Id]=result[i].Data__c;
                 customtemplateTheme[result[i].Id] = result[i].BLN_Registration_Template_del__r.Theme_Name__c;
             //canvasStructure1[result[i].Id]=result[i].Data__c;
            var tname = "'"+result[i].Theme_Name__c+"'";
            if(result[i].InUse__c != true)
            {
            //$('.template_list').append('<li><span><a href="#"><span onclick="choosetemplate(id,'+"'custom',"+tname+')" value="custom" class="poptemp_heading" style="font-size: 12px;" id="'+result[i].Id+'">'+result[i].Theme_Name__c+'</span></a></span></li>');
          //  $('.template_list').append('<div class=" each_block  col-lg-4 col-md-4 col-sm-6"><div class="blocks"><span class="no_class">'+j+'</span><div class="triclass"></div><p class="text-center">'+result[i].Theme_Name__c+'</p></div><div><div class="pull-left sidebybtn" style="display:none"> <span class="link viewbtn"><i class="fa fa-search"></i> View</span></div><div class="pull-right sidebybtn"> <span class="link editbtn " onclick="choosetemplate(id,'+"'custom',"+tname+')" id="'+result[i].Id+'"><i class="fa fa-pencil-square-o"></i> Edit</span></div></div></div>');
                 $('.template_list').append('<div class=" each_block  col-lg-4 col-md-4 col-sm-6"><div class="blocks" style="cursor:pointer;" onclick="choosetemplate(id,'+"'custom',"+tname+","+"'notlive'"+')" id="'+result[i].Id+'"><span class="no_class">'+j+'</span><div class="triclass"></div><p class="text-center">'+result[i].Theme_Name__c+'</p></div><div><div class="pull-left sidebybtn" style=""> <span class="link viewbtn"  onclick="preview(id)" id="'+result[i].Id+'"><i class="fa fa-search"></i> View</span></div></div></div>');
            
            }
            else{
            //$('.template_list').append('<li><span><a href="#"><span onclick="choosetemplate(id,'+"'custom',"+tname+')" value="custom" class="poptemp_heading" style="font-size: 12px;" id="'+result[i].Id+'">'+result[i].Theme_Name__c+'<span  style="color:#7eff5f" class="hideclass " id="side-menu">[Live]</span></span></a></span></li>');        
                 $('.template_list').append('<div class=" each_block  col-lg-4 col-md-4 col-sm-6"><div class="blocks"  style="cursor:pointer;" onclick="choosetemplate(id,'+"'custom',"+tname+","+"'live'"+')" id="'+result[i].Id+'"><span class="no_class">'+j+'</span><div class="triclass"></div><p class="text-center">'+result[i].Theme_Name__c+'<br><span style="color:#7eff5f" >[Live]</span></p></div><div><div class="pull-left sidebybtn" style=""> <span class="link viewbtn" onclick="preview(id)" id="'+result[i].Id+'"><i class="fa fa-search"></i> View</span></div></div></div>');
            
            livetemplateid = result[i].Id;
            livetemplatename = result[i].Theme_Name__c;
           }
            }
            $('.template_list').append('<div class="clearfix"></div>');
           
            },{escape:false});
        //end of first page canvas structure    
        
        //secondpage canvas structure
    Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.getAllStandardTemplatessecondpage}', 
 
            function(result, event){
            
            for(var i=0;i<result.length;i++)           
            {
            canvasStructure2[result[i].Theme_Name__c]=result[i].Data__c;
            canvasStructure22[result[i].Theme_Name__c]=result[i].Id;
            }
          
            },{escape:false});            

            //End of secondpage canvas structure
<!---remoting start  for standard Templates----------->


    Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.getAllStandardTemplates}',
 
            function(result, event){
           
            for(var i=0,j=1;i<result.length;i++,j++)           
            {
            canvasStructure[result[i].Id]=result[i].Data__c;
            var tname = "'"+result[i].Theme_Name__c+"'";
           // $('.template_list_default').append('<li><span><a href="#"><span onclick="choosetemplate(id,'+"'standard',"+tname+')"  value="standard" class="poptemp_heading" style="font-size: 12px;" id="'+result[i].Id+'">'+result[i].Theme_Name__c+'</span></a></span></li>');
                 $('.template_list_default').append('<div class=" each_block  col-lg-4 col-md-4 col-sm-6"><div style="cursor: pointer;" class="blocks" onclick="choosetemplate(id,'+"'standard',"+tname+')" id="'+result[i].Id+'"><span class="no_class">'+j+'</span><div class="triclass"></div><p class="text-center">'+result[i].Theme_Name__c+'</p></div><div><div class="pull-left sidebybtn" style="display:none"> <span class="link viewbtn"><i class="fa fa-search"></i> View</span></div><div class="pull-right sidebybtn"></div></div></div>');
            }
              //   $('.template_list_default').append('<div class=" each_block  col-lg-4 col-md-4 col-sm-6"><div style="cursor: pointer;" class="blocks" onclick="choosetemplate(id)" id="start_from_scratch"><span class="no_class"></span><div class="triclass"></div><p class="text-center">Start From Scratch</p></div><div><div class="pull-left sidebybtn" style="display:none"> <span class="link viewbtn"><i class="fa fa-search"></i> View</span></div><div class="pull-right sidebybtn"></div></div></div>');
                 
            $('.template_list_default').append('<div class="clearfix"></div>');
                <!----load live template on to the canvas----->
     setTimeout(function(){
         
          choosetemplate(livetemplateid,'custom',livetemplatename ,'live','whileloading');
     $('#loader').hide();
     }, 1000);
          

            },{escape:false});

<!---end of remoting for standard templates----->
 
        });
                    <!--remote for standard themes---------->
     Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.allstandardthemes}', 
          
            function(result, event){
    
            console.log(result);
            for(var i=0;i<result.length;i++){
           // standardThemes.push(result[i].Styles__c);
            standardThemes[result[i].Id] = result[i].Styles__c;
            nameandid[result[i].Theme_Name__c] = result[i].Id;
       
          //   $(".list-inline1").append('<li class="savetemp_list11"  id="'+result[i].Id+'" ><div class="temp_listbox"> <div class="radiobtn_sts nav-label" title="Active"><button  checked="" class="regular-radio11" id="12" name="radio-1-set2"/><label for="ac"></label></div><div class="temp_tn1"></div><div class="template_label" style="padding:2px"> <span class="orgtemp-name nav-label">'+result[i].Theme_Name__c+'</span> </div><br /><div class="featurs nav-label"></div></div><div class="clearfix"></div></li>');
            $(".standard-themes").append('<div><div  class="savetemp_list11"  id="'+result[i].Id+'" style="cursor:pointer;height:40px; width:40px; background-color:'+nameandcolor[result[i].Theme_Name__c]+';margin-right:25px;"></div><span>'+result[i].Theme_Name__c+'</span> </div>');
           $(".standard-themes1").append('<div><div  class="savetemp_list11 "  id="'+result[i].Id+'" style="cursor:pointer;height:40px; width:40px; background-color:'+nameandcolor[result[i].Theme_Name__c]+';margin-right:25px;"><i class="fa fa-check checkbox '+result[i].Theme_Name__c+' hideall" style="font-size: 30px; display:none"></i></div><span>'+result[i].Theme_Name__c+'</span> </div>');
           
           }
            $(".savetemp_list11").bind("click" ,choosetemplate1);
           
            });
            
    
   
         
        //function to open Custom templates
        function opentemplates(){
            $("#myModal").modal('show');
        }
        //function to open Standard templates
        function openstandardtemplates(){
            $("#myModal1").modal('show');
        }

        var templatename1 ='';
        var typeoftemp='';
             //function to preview selected template
             function preview(selectedtemplate){
        
             window.open("{!$Label.SiteURL}/apex/BLN_TemplatePreview?id={!selectedevent}"+"&attid="+selectedtemplate+"#"+selectedtemplate);
         
             
             }
             
        //function to display Selected Template 
        
        var ttid,ttype,tname,sta;
        var needtheme = false;
        
        function choosetemplate(templateid,templatetype,templatename,status,type){
        ttid = templateid;
        ttype = templatetype;
        tname = templatename;
        sta=status;
        needtheme = true;
      
          if(type != 'whileloading'){
    
          $(".opacitycl").removeClass("opacitycl");
          //console.log($(this));
          $("#"+templateid).addClass("opacitycl");
          $(".divdisplay").toggle();
            }
            
            if((status == 'live' &&  type == 'whileloading') || (templatetype == 'custom'))
            {
            
            needtheme = false;
            
            
            if(templatetype == 'custom'){
            $(".divdisplay1").show();
       
            $('.hideall').hide();
            $('.'+customtemplateTheme[ttid]).show();
            //choosetemplate1();
            }
            if(status == 'live' &&  type == 'whileloading'){
            choosetemplate1(customtemplateTheme[ttid]);
            }
            }
   
        }
        function choosetemplate1(colorwhileloading){
        if(needtheme)
        $(".divdisplay").toggle();
        var templateid =ttid;
        var templatetype = ttype;
        var templatename = tname;
        var status = sta;
        
           
             
        
         $("#selectedtemplatename").val(templatename);
            
        if(status == 'notlive')
        {
        $('.publishbutton1').hide();
        $('.publishbutton').show().attr('disabled',false);
        
        }
        if(status == 'live')
        {
        $('.publishbutton1').show();
        $('.publishbutton').hide();
        
        }
        if(templatetype == 'standard')
        {
        
        $('.publishbutton1').hide();
        $('.publishbutton').show().attr('disabled',true);
        }
        $('#seltempname').html(templatename);
        $('#seltemptype').html(": "+templatetype);
        $('.selectall_entire').show();
             $('.switch').show();

                
            typeoftemp = templatetype;
            $('#ftab').addClass('active');
            $('#ftab a').attr('aria-expanded',true);
            $('#stab').removeClass('active');
            $('#mycanvas').show().addClass('active in');//mycanvas1
            showpage("mycanvas");

            templatename1 = templatename; 
            $('#seltname').val(templatename);
            $('#typeoftemplate').val(templatetype);
            $('#standardtemplateid').val(templateid);
            $('#themepage1').val(templateid);
            $('#themepage2').val(canvasStructure22[templatename]);
            selectedTemplate=templateid;
            $("#myModal").modal('hide')
            $("#myModal1").modal('hide');
 
            var canvas1=$(document).find("#mycanvas");
            var canvas=canvas1.find("#gm-canvas");
            
            canvas.empty();//clear canvas if any previous template exists
            canvas.append(canvasStructure[templateid]);//append the selected template structure to canvas

    <!---Remoting for Individual widgets of selected template (page 1 )---->
    Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.getWidgetsForTemplate}',templateid,
 
            function(result, event){
                for(var i=0;i<result.length;i++)           
                {
                    $('#'+result[i].Template_Name__c).html(result[i].HTML__c);
                        if(templatetype=='custom'){
                        $('#'+result[i].Template_Name__c).prepend('<div class="hiddenclass" id="'+result[i].Id+'" ></div>');
                        }
                }
                },{escape:false});
                
               
    <!---End of Remoting for Individual widgets of selected template (page 1)---->
            
    <!---append Secondpage Html grid to Canvas2----->       
            var canvas3=$(document).find("#mycanvas1");
            var canvas2=canvas3.find("#gm-canvas");
                 var attendeetemplateid='';
            canvas2.empty();
           
            canvas2.append(canvasStructure2[templatename]);
    <!---Remoting for Individual widgets of selected template (Page 2 )---->
    Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.getWidgetsForSecondTemplate}',templatename,
           function(result, event){
           
             
            for(var i=0;i<result.length;i++)           
            {
                  templateandids[result[i].Template_Name__c] = result[i].Id;
                           
                if(result[i].Template_Name__c =='EventSurveyTemplate'){
                $('#'+result[i].Template_Name__c).prepend(document.getElementById('eventsurveycompo').innerHTML);
                 }
                else{
                $('#'+result[i].Template_Name__c).html(result[i].HTML__c);
               
               
               
                    $('#showsection').parent().show();

               }
                if(templatetype=='custom'){
                 if(result[i].Template_Name__c !='AttendeeTemplate'){
                $('#'+result[i].Template_Name__c).prepend('<div class="hiddenclass2" id="'+result[i].Id+'" ></div>');
                         }
                         else if(result[i].Template_Name__c =='AttendeeTemplate')
                         {
                         
                $('#'+result[i].Template_Name__c).prepend('<div class="hiddenclass2" id="'+result[i].Id+'" ></div>');

                           attendeetemplateid =  result[i].Id;
             $("#AttendeeTemplateId").val(result[i].Id);
            var len = $('#'+result[i].Template_Name__c).find('.removethisclass').length;
           //     if(len == 0)
           //    $('#'+result[i].Template_Name__c).append('<div class="templates2 AttendeeTemplate removethisclass" id="AttendeeTemplate"></div>');
                }
                }
           }
          //Attendee based on regsettings only with first item 
          if($('#AttendeeTemplate').html() !='Attendee Information')
          {
          //insert the loaded html to a hidden div
          $("[id$='hiddendiv']").empty();
          $("[id$='hiddendiv']").html($('#AttendeeTemplate').html());
         $('#AttendeeTemplate').empty();
               appenditem(attendeetemplateid);
           
         excludefields('{!firstitemid}','dataAppending','{!firstitemName}');
          
          }
           //Buyer based on regsettings
            try{
            excludefieldsBuyer();
            }catch(e){}
             loaddynamicdata();
           },{escape:false});
    <!---End of Remoting for Individual widgets of selected template(page 2)---->
                    console.log('????? ');
                    console.log(templateandids);
                    
            if(needtheme){      
          var tid=$(this)[0].id;
         selectedthemeid = tid;
  
     
        $("#selectedtheme").val(tid);
        styleCode=standardThemes[tid];
        var cs = '<style type="text/css">' + styleCode+'</style>';
 
        $('#dynamiccss').empty();
        $('#dynamiccss').append(cs);
    
        $("#myModal1").modal('hide');
    
    }
         
         
         
           if(!needtheme){   
console.log(colorwhileloading);
console.log(">>>>>> "+nameandid[colorwhileloading]);           
          var tid=$(this)[0].id;
          
          if(nameandid[colorwhileloading] != undefined)
          {
          tid = nameandid[colorwhileloading];
          }
         selectedthemeid = tid;
  
     
        $("#selectedtheme").val(tid);
        
        styleCode=standardThemes[tid];
        var cs = '<style type="text/css">' + styleCode+'</style>';
 
        $('#dynamiccss').empty();
        $('#dynamiccss').append(cs);
        
        $("#myModal1").modal('hide');
              
         }
         }
    //end of choosetemplate function

    //function for publishing a template
        function publishtemplate(){
        
        if(typeoftemp == 'custom'){
            Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.publishTemplate}',selectedTemplate,'{!selectedevent}',templatename1,
 
                function(result, event){
                alert(result);
                     location.reload();
                });
                }
                else
                {
                
                
                alert("Please Save The Standard Template and Publish")
 
                }
        }
          function showpage(id)
    {
        $('#mycanvas').hide();
        $('#mycanvas1').hide();
        $('#'+id).show();
             switched = id;
    }
</script>


<!---twitter feed script---->
<script type="mce-no/type">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<!---end of twitter feed script---->
</html>
   
<apex:form >
<!---action function for load attendee template---->        
        <apex:actionfunction name="loadmapping" action="{!loadmapping}" rerender="renderhere" oncomplete="excludefields()">
            <apex:param value="" name="tempname"/>
        </apex:actionfunction>
</apex:form>

        <apex:outputpanel id="renderhere">         
            <apex:outputtext id="hiddendiv" value="{!html}" escape="false" style="display:none"/>
        </apex:outputpanel>
   <script>
      var itemlevelhtml={};
      var defaulthtml  ={};
         //load default html
                   
                   $(document).ready(function(){
                   
                   Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.loaddefaulthtml}', 
       
                  function(result, event){
                 
                                defaulthtml['default'] = result.HTML__c;
      
                       
                  },{escape:false});
                      
                        });
    
               function appenditem(loadedattendeetemplate){
                       
                       
                       //load item level  html for loaded template based on attendee template id 'loaditemlevelhtml'
                       
                                  
                      Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.loaditemlevelhtml}',loadedattendeetemplate, 
       
                  function(result, event){
                  
                  for(var i=0;i<result.length;i++)           
                  {
                                itemlevelhtml[result[i].BLN_Item__c] = result[i].HTML__c;
                    
                  }
                       
                  },{escape:false});
                      
                        
                       $('#tktid').empty();                    
                       $('#tktid').append('<option value="">--none--</option>');
                        Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.getitems}','{!selectedevent}',function(result, event){
                  //  alert(result.length);
                   if(result.length == 0){
                  // alert('>>>>>');
                      //  $('.AttendeeTemplate').hide();
                       //  $('.AttendeeTemplate').parent().parent().hide();
                         $('#AttendeeTemplate').hide();
                         $('#AttendeeTemplate').parent().parent().hide();
                   }else{
                         $('#AttendeeTemplate').show();
                         $('#AttendeeTemplate').parent().parent().show();
                   
                   }
                     for(var i=0;i<result.length;i++){
                         
                       $('#tktid').append('<option class="item" value="'+result[i].Id+',item">'+result[i].item_name__c+'</option>');
                         if(i==0)
                         {
                         
                             $("[id$='hiddendiv']").empty();
                     $("[id$='hiddendiv']").html(itemlevelhtml[result[i].Id]);
       
                         }
                         }
                      });
                      //sometimes settings comes from lineitem pool
    Visualforce.remoting.Manager.invokeAction('BLN_Themescon.getitempool','{!selectedevent}',function(result, event){
        for(var i=0;i<result.length;i++){
                       
                       $('#tktid').append('<option class="itempool" value="'+result[i].Id+',itempool">'+result[i].Item_Pool_Name__c+'</option>');
                   
                         }
    });
                   
                       }
      
      
        var tickethtml=[];
        var mappedtickets = [];
        var itemid = '';
        var Attid='';
         var selecteditem ='';
        var typeofitem   = '';
      
        function mapitemshtml(){
            var updatedtickethtml=[];
            var individualhtml3 ={
                          
               id:selecteditem,
               HTML:$("#AttendeeTemplate").html(),
               order:0
               }
                     
           updatedtickethtml.push(individualhtml3);
           $('.AttendeeTemplate').find('.hiddenclass2').each(function(){
           
           console.log($(this)[0].id);
          
          Attid = $(this)[0].id;
           });
           Attid = $("#AttendeeTemplateId").val();
           
                 //logic for updating item level html
                 console.log(updatedtickethtml);
                 console.log(selecteditem );
                 console.log(Attid);
         //        alert(typeofitem +",,,,,,,"+selecteditem );
                  Visualforce.remoting.Manager.invokeAction('BLN_Themescon.updateRegtemplateTicketHtml',selecteditem ,Attid,JSON.stringify(updatedtickethtml),typeofitem,function(result, event){
                         alert(result);
                      //    location.reload();
                        });
       }    
      
      
              
        $(document).on('change','#tktid',function(e) {
        itemid  = $(this)[0].value;
      
        var itemselected = itemid.split(",");
       
         selecteditem = itemselected[0];
         typeofitem   = itemselected[1];
         $("[id$='hiddendiv']").empty();
         if(itemlevelhtml[selecteditem] != undefined){
       //  alert(itemlevelhtml[selecteditem]);
         $("[id$='hiddendiv']").html(itemlevelhtml[selecteditem]);
               }else{
               //if html is not there load from ddefault boothleads attendeetemplae
              $("[id$='hiddendiv']").html(defaulthtml['default']);
               }
      //  alert($(this)[0].selectedOptions[0].innerHTML);
               
       excludefields(selecteditem,'dataAppending',$(this)[0].selectedOptions[0].innerHTML)
        });
     var selectitemid;
     var editortemp; 
     var selectitemname;    
     
        function callwithtick(itemname,id,editor)
        {
            selectitemid=id;
            editortemp=editor;
            selectitemname=itemname;
            var tn = $('#seltname').val();
            loadmapping(tn);
   
        }
          
        function excludefields(selitemid,mode,firstitemname) { 
        if(mode == 'dataAppending'){
       //       alert('NNNN'+selitemid);
  selectitemid = selitemid;
  }
            $("[id$='hiddendiv']").find('script').attr("type","");
            var htmlallfieldnames=[];
          $("[id$='hiddendiv']").find('input, textarea, select').each(function(){
          
          $(this).show().parent().show();
          });
          $("[id$='hiddendiv']").find('.form-group').each(function(){
          
          $(this).show();
          });
            $("[id$='hiddendiv']").find('.panel-default').each(function(i) {
              $(this).show();
              $(this).find('label').show();
        
   });
          
          //form-group
            $("[id$='hiddendiv']").find('input, textarea, select').each(function(i, field) {
                if(field.name!=''&&field.name!=undefined&&field.type!='button')
                {
                    htmlallfieldnames.push(field.name);
                }
            });
            
            var individualpanels= [];//store ids for individual sections like speaker,workinfo,NAICS codes etc
            var fieldrequired ={}; //store field name and required boolean as key vale pain ex: {Image:false}
            var fieldnames={};  //store default field name and custom field name as key value pai ex:{firstname: firstnamenew}
            var sectionnames={};//store default section name and custom section name as key value pai ex:{Basic Information:Basic Details}
 <!----remoting for regsettings based on item------>
        Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.getregsettings}',
           '{!selectedEvent}',
            selectitemid,
            function(result, event){  
            console.log(result);
                var includedhtmlfieldname='';          
                $.each(result, function(i, rs){
          
                if(rs.Group_Label__c != undefined)
                {
                    sectionnames[rs.Group_Name__c]=rs.Group_Label__c;
                }
                                
                    fieldrequired[rs.Defaullt_Label__c]=rs.Required__c;
                    fieldnames[rs.Defaullt_Label__c] = rs.Label_Name__c;
                    individualpanels.push(rs.Group_Name__c);
           
               if(rs.Defaullt_Label__c=='Work Address')
                {
                                    
                    sectionnames['Work Address']=rs.Label_Name__c;
                    individualpanels.push('Work Address');
                    includedhtmlfieldname+='WorkAddress1,WorkAddress2,WorkCity,WorkState,WorkCountry,WorkZipCode';
                
                }
                else if(rs.Defaullt_Label__c=='Home Address')
                {
                 
                    sectionnames['Home Address']=rs.Label_Name__c;
                    individualpanels.push('Home Address');
                    includedhtmlfieldname+='HomeAddress1,HomeAddress2,HomeCity,HomeState,HomeCountry,HomeZipCode';
                }
                else if(rs.Defaullt_Label__c=='Billing Address')
                {
                    sectionnames['Billing Address']=rs.Label_Name__c;
                    individualpanels.push('Billing Address');
                    includedhtmlfieldname+='BillingAddress1,BillingAddress2,BillingCity,BillingState,BillingCountry,BillingZipCode';
                }
                else
                    includedhtmlfieldname+=rs.Defaullt_Label__c+','; 
                });
                //end of .each loop
            
                //push individual address fieds
                if(fieldrequired['Work Address'])
                {
                    fieldrequired['WorkAddress1']=true;
        //    fieldrequired['WorkAddress2']=true;
                    fieldrequired['WorkCity']=true;
                    fieldrequired['WorkState']=true;
                    fieldrequired['WorkCountry']=true;
                    fieldrequired['WorkZipCode']=true;
                }
                if(fieldrequired['Home Address'])
                {
                    fieldrequired['HomeAddress1']=true;
         //   fieldrequired['HomeAddress2']=true;
                    fieldrequired['HomeCity']=true;
                    fieldrequired['HomeState']=true;
                    fieldrequired['HomeCountry']=true;
                    fieldrequired['HomeZipCode']=true;
                }
                if(fieldrequired['Billing Address'])
                {
                    fieldrequired['BillingAddress1']=true;
         //   fieldrequired['BillingAddress2']=true;
                    fieldrequired['BillingCity']=true;
                    fieldrequired['BillingState']=true;
                    fieldrequired['BillingCountry']=true;
                    fieldrequired['BillingZipCode']=true;
                }
            
        //start of for loop
        //logic for hiding not included fields, showing required fields with * and
        //logic for replacing default label with custom labels for individual fields
   
                for(l=0;l<htmlallfieldnames.length;l++)
                {
                    if(includedhtmlfieldname.indexOf(htmlallfieldnames[l])==-1)
                    {
                  
                        $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).hide();
                               if(htmlallfieldnames[l] == 'Image' ||  htmlallfieldnames[l] == 'Company Logo'){
                            $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().parent().parent().find("label").hide();
                            $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().parent().parent().find("label").parent().hide();
                            }
                        
                        if($("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("label").length==1)
                        {
                       
                        if(htmlallfieldnames[l] != 'Image' && htmlallfieldnames[l] != 'Company Logo'){
                            $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("label").hide();
                            $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("label").parent().hide();
                            }
                            else{
                            $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().parent().parent().find("label").hide();
                            $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().parent().parent().find("label").parent().hide();
                            
                            }
                        }
                        $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().hide();
                    }
                    else
                    {
                        //logic for mandatory fields 
                        $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("span").eq(0).html(fieldnames[htmlallfieldnames[l]]);
   
                        if(!fieldrequired[htmlallfieldnames[l]])  
                        {    
                            
                                  if(htmlallfieldnames[l] != 'Image' && htmlallfieldnames[l] != 'Company Logo'){
                       
                               $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("span").eq(1).hide();
                           }else{
                                  $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().parent().parent().find("span").eq(1).hide();
                                }                       
                       
                        }  else{
                            $("[id$='hiddendiv']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("span").eq(1).addClass('mandatory');
           
                        }

                
                    }
           }
          //end of for loop
   
   //Logic for  hiding sections and
   //logic replacing default panel lable with custom panel lable 
            $("[id$='hiddendiv']").find('.panel-default').each(function(i) {
   

                    if( individualpanels.indexOf($(this)[0].id) == -1 && !$(this).hasClass('newsection'))
                    {
                        $("[id$='hiddendiv']").find('[id="'+$(this)[0].id+'"]').hide();
                    }
                    else
                    {
                        if(sectionnames[$(this)[0].id] != undefined)
                        $("[id$='hiddendiv']").find('[id="'+$(this)[0].id+'"]').find('.panel-title').html(sectionnames[$(this)[0].id]);  
                    }
   
            });  
   
if(mode != 'dataAppending'){   
   editortemp.setContent('');
    editortemp.insertContent ('<div class="rclass" id="mydiv">Selected Ticket: '+selectitemname+'<button type="button" class="btn btn-info" value="Map" onclick="storeticketattendee()"> Save Ticket settings</button><button type="button" class="btn btn-info" value="Drag" onclick="DragADrop()">Field ReArrange</button></div><div class="templates2 AttendeeTemplate removethisclass" id="AttendeeTemplate"><div class="hiddenclass2" id="newwidget"></div> '+$("[id$='hiddendiv']").html()+'</div>');
   }
   else if(mode == 'dataAppending')
   {
     //    alert('mode = = dataappending');
 var atttempId = $("#AttendeeTemplateId").val();
   $('#AttendeeTemplate').addClass('templates2 AttendeeTemplate');
   $('#AttendeeTemplate').html('<div class="Attendeeclassremove"><div class="itemhtml" id="'+selectitemid+'"> <div class="TktHtml" id="'+atttempId+'">Ticket :'+firstitemname+'</div></div></div>'+$("[id$='hiddendiv']").html());
         $('#AttendeeTemplate').html($("[id$='hiddendiv']").html());
         
         
   }
   //  editortemp.insertContent('<div class="rclass"><div class="rclass1">Selected Ticket: '+selectitemname+'<button type="button" class="btn btn-info" value="Map" onclick="storeticketattendee()"> Save Ticket settings</button><button type="button" class="btn btn-info" value="Drag" onclick="DragADrop()"> Field ReArrange</button></div><div class="templates2" id="AttendeeTemplate"></div></div><div><div class="hiddenclass2" id="newwidget"></div> '+$("[id$='hiddendiv']").html()+'</div>');
        $('#addsectionAttendee').show();
        $('.showsection').show();
              $('#tktid').show().parent().show().parent().find('label').show();
              
           });
        }
  
        function  DragADrop()
        {
            $(".ddmodalbody").html($("[id$='hiddendiv']").html());
            //  $(".ddmodalbody").html($("[id$='mydiv']").html());
            dadappend();
        }       
        
        function storeticketattendee()
         {
            if(mappedtickets.indexOf(selectitemid) == -1)
            {
                mappedtickets.push(selectitemid);
                var individualhtml3 ={
                    
                    id:selectitemid,
                    HTML:$(".AttendeeTemplate").html(),
                    order:0
                                    }
               
                tickethtml.push(individualhtml3);
           
                alert('Saved');
            }
            else{
                alert('Ticket Settings Already Mapped/ please try another ticket');
            }
          }
          
          
  
// Start of exclude buyer fields        
          function excludefieldsBuyer() { 
           $("[id$='BuyerTemplate']").find('script').attr("type","");
           var htmlallfieldnames=[];
           $("[id='BuyerTemplate']").find('input, textarea, select').each(function(i, field) {
            
            if(field.name!=''&&field.name!=undefined&&field.type!='button')
            {
            htmlallfieldnames.push(field.name);
            }
            });
         
         //Variable Start
            var individualpanels= [];//store ids for individual sections like speaker,workinfo,NAICS codes etc
            var fieldrequired ={}; //store field name and required boolean as key vale pain ex: {Image:false}
            var fieldnames={};  //store default field name and custom field name as key value pai ex:{firstname: firstnamenew}
            var sectionnames={};//store default section name and custom section name as key value pai ex:{Basic Information:Basic Details}
         //Variable End
            Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BLN_Themescon.getbuyerregsettings}',
            '{!selectedEvent}',
                function(result, event){
                console.log(result);
                var includedhtmlfieldname='';
                $.each(result, function(i, rs){
                       //added
                        if(rs.Group_Label__c != undefined)
                    {
                        sectionnames[rs.Group_Name__c]=rs.Group_Label__c;
                    }
                        fieldrequired[rs.Defaullt_Label__c]=rs.Required__c;
               
                        fieldnames[rs.Defaullt_Label__c] = rs.Label_Name__c;
                        individualpanels.push(rs.Group_Name__c);
               //End 
               
                    if(rs.Defaullt_Label__c=='Work Address')
                    {
                    sectionnames['Work Address']=rs.Label_Name__c;
                    individualpanels.push('Work Address');                   
                    includedhtmlfieldname+='WorkAddress1,WorkAddress2,WorkCity,WorkState,WorkCountry,WorkZipCode';
                    }
                    else if(rs.Defaullt_Label__c=='Home Address')
                    {
                    sectionnames['Home Address']=rs.Label_Name__c;
                    individualpanels.push('Home Address');
                    includedhtmlfieldname+='HomeAddress1,HomeAddress2,HomeCity,HomeState,HomeCountry,HomeZipCode';
                    }
                    else if(rs.Defaullt_Label__c=='Billing Address')
                    {
                    sectionnames['Billing Address']=rs.Label_Name__c;
                    individualpanels.push('Billing Address');
                    includedhtmlfieldname+='BillingAddress1,BillingAddress2,BillingCity,BillingState,BillingCountry,BillingZipCode';
                    }
                    else
                    includedhtmlfieldname+=rs.Defaullt_Label__c+','; 
                    });
            //end of .each loop
            
            //push individual address fieds
                    if(fieldrequired['Work Address'])
                    {
                    fieldrequired['WorkAddress1']=true;
          //  fieldrequired['WorkAddress2']=true;
                    fieldrequired['WorkCity']=true;
                    fieldrequired['WorkState']=true;
                    fieldrequired['WorkCountry']=true;
                    fieldrequired['WorkZipCode']=true;
            
                    }
                    if(fieldrequired['Home Address'])
                    {
                    fieldrequired['HomeAddress1']=true;
          //  fieldrequired['HomeAddress2']=true;
                    fieldrequired['HomeCity']=true;
                    fieldrequired['HomeState']=true;
                    fieldrequired['HomeCountry']=true;
                    fieldrequired['HomeZipCode']=true;
            
                    }
                    if(fieldrequired['Billing Address'])
                    {
                    fieldrequired['BillingAddress1']=true;
          //  fieldrequired['BillingAddress2']=true;
                    fieldrequired['BillingCity']=true;
                    fieldrequired['BillingState']=true;
                    fieldrequired['BillingCountry']=true;
                    fieldrequired['BillingZipCode']=true;
                    }
  //start of for loop
 //logic for hiding not included fields, showing required fields with * and
 //logic for replacing default label with custom labels for individual fields     
 for(l=0;l<htmlallfieldnames.length;l++)
             {
                if(includedhtmlfieldname.indexOf(htmlallfieldnames[l])==-1)
                {
                        $("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).hide();
   
                               if(htmlallfieldnames[l] == 'Image' ||  htmlallfieldnames[l] == 'Company Logo'){
                            $("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().parent().parent().find("label").hide();
                            $("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().parent().parent().find("label").parent().hide();
                            }
                  
                    if($("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("label").length==1)
                    {
                        $("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("label").hide();
                        $("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("label").parent().hide();
                         $("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("label").parent().removeClass("inSection");
                      
                    }
                        $("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().hide();
                }
                else
                {
                                  $("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).show();//parent().hide()
                                   $("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().show();
                                    $("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().show();
                                    $("[id='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("label").show();
            //logic for mandatory fields 
            //add mandatory Class Dynamically
                        $("[id$='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("span").eq(0).html(fieldnames[htmlallfieldnames[l]]);
                    if(!fieldrequired[htmlallfieldnames[l]])   
                    
                    {
                    
                        if(htmlallfieldnames[l] != 'Image' && htmlallfieldnames[l] != 'Company Logo'){
                       
                        $("[id$='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("span").eq(1).hide();
                       }else{
                         $("[id$='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().parent().parent().find("span").eq(1).hide();
                       }
                   
                    }
                    else{
                        $("[id$='BuyerTemplate']").find('[name="'+htmlallfieldnames[l]+'"]').eq(0).parent().parent().find("span").eq(1).addClass('mandatory');
           
                    }
                
                }
           }
           //end of for loop
            //Logic for  hiding sections and
            //logic replacing default panel lable with custom panel lable 
            $("[id$='BuyerTemplate']").find('.panel-default').each(function(i) {
   

               if( individualpanels.indexOf($(this)[0].id) == -1 && !$(this).hasClass('newsection'))
               {
                   $("[id$='BuyerTemplate']").find('[id="'+$(this)[0].id+'"]').hide();
               }
               else
               {
   
                   if(sectionnames[$(this)[0].id] != undefined)
                    $("[id$='BuyerTemplate']").find('[id="'+$(this)[0].id+'"]').find('.panel-title').html(sectionnames[$(this)[0].id]);
   
               }
               $('.addsection').show();
               $('#addsection').show();
               $('.showsection').show();
        });  
            }
            );
          }
    
    
    var tickethtml=[];
          var mappedtickets = [];
          function storeticketbuyer()
          {
          
          
          if(mappedtickets.indexOf(selectitemid) == -1)
          {
          mappedtickets.push(selectitemid);
          var individualhtml3 ={
                    
                    id:selectitemid,
                    HTML:$("#AttendeeTemplate").html(),
                    order:0
                }
               
                tickethtml.push(individualhtml3);
           
                alert('Saved');
    }
    else{
    alert('Ticket Settings Already Mapped/ please try another ticket');
    }
          }
    // End of exclude buyer fields
          function dadappend()
          {
          $("#ddmodal").modal('hide');
    try{
          var clas =   $("[class$='templates2 AttendeeTemplate']");//$('.templates2 AttendeeTemplate');
          
        }catch(e){}
          if(clas ==0){
       
          $('#AttendeeTemplate').empty();
          $('#AttendeeTemplate').html($('.ddmodalbody').html());
       
          }else if(clas != 0)
          {
          $("[class$='templates2 AttendeeTemplate']").empty();
         $("[class$='templates2 AttendeeTemplate']").html($('.ddmodalbody').html());
       
          }
          $('.ddmodalbody').empty();
          }
          </script>
          
     
  <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
 <!-- Modal -->
<div id="ddmodal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Attendee Section</h4>
      </div>
    
    <div class="ddmodalbody">
        
    </div>
    
    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-info" onclick="dadappend()">Ok</button>
        
    </div>
    
    </div>

  </div>
</div>
    <!-----script for bringing dynamic data------>
    <div id='eventstartdate' style='display:none'>
      <c:EV_FormatDt date_Timevalue="{!registrationEvent.Start_Date__c}" t_Zone="{!registrationEvent.Time_Zone__c}" t_format="MMM dd',' yyyy" ></c:EV_FormatDt>
    </div>
    <div id='eventenddate' style='display:none'>
      <c:EV_FormatDt date_Timevalue="{!registrationEvent.End_Date__c}" t_Zone="{!registrationEvent.Time_Zone__c}" t_format="MMM dd',' yyyy"></c:EV_FormatDt>
    </div>
    <div id='eventaddress' style='display:none'>
      <apex:outputText value="{!registrationEvent.Street1__c}"></apex:outputText>
      <apex:outputText rendered="{!IF(registrationEvent.Street2__c!=null && registrationEvent.Street2__c!='',true,false)}">
      <apex:outputPanel rendered="{!If(registrationEvent.Street1__c!=null && registrationEvent.Street1__c!='',true,false)}"> </apex:outputPanel>
         {!registrationEvent.Street2__c}
      </apex:outputText>
    </div>
    <script>
var evsdate = $("[id$='eventstartdate']").html();
  var evedate = $("[id$='eventenddate']").html();
  var eveaddr = $("[id$='eventaddress']").html();
 
 
    function loaddynamicdata(){

 if('{!ee.Logo_URL__c}' != '' && '{!ee.Logo_URL__c}' != undefined && '{!ee.Logo_URL__c}' != null){
    var sr  ='/Eventdex/servlet/servlet.ImageServer?id={!ee.Logo_URL__c}&oid={!$Organization.Id}';
    $('.eventlogo').html('<img src='+sr+'></img>');
   
    }else{
    $('.eventlogo').html('');
   
    }
  
    $('#event-title').html('{!ee.Name}');
    $('#orgfultitle').html('<i class="fa fa-user"></i> '+'{!GNUSRSDETAILS.First_Name__c}'+' '+'{!GNUSRSDETAILS.Last_Name__c}' );
    $('#orgmobile').html('<i class="fa fa-mobile fa-2x"></i> '+'{!ee.Phone_Number__c}');
    $('#orgemail').html('<i class="fa fa-envelope-o"></i> '+'{!ee.Organizer_Email__c}');
    $('#orgwebsite').html('<i class="fa fa-globe"></i> ');
    
    
    $('#daysleft').html(' <span class="">{!TEXT(FLOOR(EventDaysRemainingDT- now()))} <span>Days </span></span><span class="">{!TEXT(ROUND(MOD((EventDaysRemainingDT- NOW())*24,24),0))}<span>Hrs </span></span><span class="">{!TEXT(ROUND(MOD((EventDaysRemainingDT- NOW())*1440,60),0))}<span>Mins </span></span>');
    $('.startdate').html(evsdate+' - ');
    $('.enddate').html(evedate);
    $('#sdate').html(evsdate);
    $('#edate').html(evedate);
    $('#eveloc').html('<li>'+eveaddr+'</li>');
   
    }
    
   
    
    </script>
    <!---end of script------------->
    
<!--for survey question-->

<div id="eventsurveycompo" style="display:none">
 <apex:form >       
 <apex:outputPanel rendered="{!IF(UserAnswer.size <=0 ,false,true)}">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title"> 
             <apex:outputText value="Survey Questions"/>
            </h3>
            
          </div>
          <div class="panel-body">
            <apex:variable var="i" value="{!1}"/>
            <div class="surveyquest section_box">
             <p class="bg-font" style=" padding-bottom:10px;"><strong>Event Level Survey Questions</strong></p>
             <apex:repeat value="{!UserAnswer}" var="uea">
             <!---------question type text-------->
             <div id="{!uea.question.BLN_Parent_Answer__c}" style="display:{!IF(uea.question.BLN_Parent_Answer__c==null,'','none')}">
             <div class="formelem_boxfull">
              <ul class="stdul">
              <li>
              <div class="form_quest">
              
              <div class="qno">Q{!i}.</div>
               <apex:variable var="i" value="{!i+1}"/>
                                       <div class="q_txt">
                                          {!uea.Question.Question_Text__c} ?
              <apex:outputText rendered="{!IF(uea.itq.isRequired__c == TRUE, TRUE , FALSE)}"><span id="mandatory" style="color:#F00; font-size:15px;">*</span></apex:outputText>
              </div>
              
               <div class="clear"></div>
                                    </div>
                                    <!---close of form_quest--->
               <div class="form_answer">
              <!------->   
             <div class="ans_lbl">Ans.</div>
              <div class="qans">
              <div class="{!IF(uea.Question.Answer_Type__c=='Paragraph text' || uea.Question.Answer_Type__c=='Text' || uea.Question.Answer_Type__c=='Selectlist','','radio_chk_box')}">
               <apex:inputText value="{!uea.SelectedAnswer}"  rendered="{!IF(uea.Question.Answer_Type__c=='Text',TRUE,FALSE)}" styleClass="{!IF(uea.Question.Answer_Type__c=='Paragraph text' || uea.Question.Answer_Type__c=='Text' ,'form-control valid_txt','form-control valid_txt')}  {!IF(uea.itq.isRequired__c == TRUE, ' required', '')}" style="float:left;width: 90%;" />
               <apex:inputTextarea value="{!uea.SelectedAnswer}"  rendered="{!IF(uea.Question.Answer_Type__c=='Paragraph text',TRUE,FALSE)}" styleClass="{!IF(uea.Question.Answer_Type__c=='Paragraph text' || uea.Question.Answer_Type__c=='Text' ,'form-control valid_txt','form-control valid_txt')}  {!IF(uea.itq.isRequired__c == TRUE, ' required', ' ')}" style="width: 90%;"/> 
              
                
                
                <apex:selectList onfocus="this.oldvalue = this.value;" styleClass="form-control valid_select {!IF(uea.itq.isRequired__c == TRUE, ' required', ' ')}" onchange="showsubquestionpicklist(this,'');this.oldvalue = this.value;" value="{!uea.SelectedAnswer}" multiselect="false" size="1"  rendered="{!IF(uea.Question.Answer_Type__c=='Choose from a list',TRUE,FALSE)}" style="float:left;width: 90%;">
                <apex:selectOption itemlabel="--None--" itemValue=""/>
                    <apex:selectOptions value="{!uea.Answers}"/> 
                </apex:selectList> 
                
                <div style="display:{!IF(uea.Question.Answer_Type__c=='Single Selection','','none')}">
                /*onchange="showsubquestionradio($(this).attr('name'),'');"*/
                <apex:selectRadio value="{!uea.SelectedAnswer}"   layout="pageDirection"  rendered="{!IF(uea.Question.Answer_Type__c=='Single Selection',TRUE,FALSE)}">
                <apex:selectOptions value="{!uea.Answers}"/>
                </apex:selectRadio>
              <!--  <strong>{!uea.Answers}</strong>-->
                 </div>
            
                <div style="display:{!IF(uea.Question.Answer_Type__c=='Checkboxes','','none')}">
                <div class="maxanswercount" a="{!uea.Question.Max_Answer_count__c}">
                                                   <br/>
                                                   <apex:outputText value="You can choose maximum {!uea.Question.Max_Answer_count__c} answers" rendered="{!If(uea.Question.Max_Answer_count__c==0 || uea.Question.Max_Answer_count__c==null,false,true)}"/>
                <apex:selectCheckboxes layout="pageDirection" value="{!uea.SelectedAnswerCheck}"  rendered="{!IF(uea.Question.Answer_Type__c=='Checkboxes',TRUE,FALSE)}" >
                    <apex:selectOptions value="{!uea.Answers}"/>
                </apex:selectCheckboxes>
                </div>
               <!-- <strong>{!uea.Answers}</strong>-->
                </div>
                
                <div style="display:{!IF(uea.Question.Answer_Type__c=='Scale','','none')}">
                <apex:selectRadio value="{!uea.SelectedAnswer}" layout="lineDirection"  rendered="{!IF(uea.Question.Answer_Type__c=='Scale',TRUE,FALSE)}" id="SQScale2">
                        <apex:selectOptions value="{!uea.Answers}"/>  
                </apex:selectRadio>
             <!--    <strong>{!uea.Answers}</strong>-->
                 </div>
              
              
              </div>
              <!---------->
               <div class="clear"></div>
                                       </div>
                                       <!---close of form_ans---->
                                    </div>
                                    <!--form ans--->
              </li>
              </ul>
            </div>
            <!---close of formelem_box--->
             <!--------//question type text------->

             </div>
           
            </apex:repeat> 
          <!----->   
          </div>
          </div>
        </div>
        </apex:outputPanel>
        
     <!---//End of Event Level Survey Questions--->  
     <script>
                                 function showsubquestionradio(ans,tid)
                                 {
                                 var radioid='';
                                var o_radio_group = document.getElementsByName(ans);
                                 for(var i = 0; i < o_radio_group .length; i++){
                                    if(o_radio_group [i].checked){
                                      radioid=o_radio_group[i].value+tid;
                                      //document.getElementById(radioid).style.display='';
                                      $('[id^="'+radioid+'"]').show();
                                    }
                                    else
                                    {
                                       radioid=o_radio_group[i].value+tid;
                                       //document.getElementById(radioid).style.display='none'; 
                                       $('[id^="'+radioid+'"]').hide();
                                    }
                                      }
                                   
                                 }
                                  function showsubquestionpicklist(ans,tid)
                                 {
                                var radioid='';
                                try{
                                radioid=ans.value+tid;
                                      //document.getElementById(radioid).style.display='';
                                      $('[id^="'+radioid+'"]').show();
                                    }catch(e){}
                                   try{ 
                                   radioid=ans.oldvalue+tid;
                                   //document.getElementById(radioid).style.display='none';
                                   $('[id^="'+radioid+'"]').hide();
                                   }catch(e){}
                                 }
                                 </script>         
                                 <style>
                                 div td {
                                    padding-left: 15px;
                                    }
                                 </style>
                                 </apex:form>
                                 </div>
   <!---------------inline css tools--------->
                                 
   
   <c:BLN_InlineCss_Component />
   <!-----end of inline css tools------------>
   <c:ed_popupbox ></c:ed_popupbox>
 <style>
   
   
   .dialogoverlay {
    display: none;
    position: fixed;
    top: 0px;
    left: 0px;
    background-color: #484848;
    width: 100%;
    z-index: 99999999999;
    height: 100%;
    background-color: #484848;
    opacity: .8;
}


#close {
    font-size: 25px;
    font-weight: bold;
    color: #fff;
    text-decoration: none;
    float: right;
    margin-right: .2%;
    margin-top: -14px;
    cursor: pointer;
}

.form-embed-div {
    padding: 10px;
    margin: 0px auto;
    margin-top: 10px;
    background: #444;
    background: rgba(231, 231, 231, 0.2);
    border-radius: 3px;
    box-shadow: 0 1px 3px rgba(213, 213, 213, 0.4) inset, 0 1px 0 rgba(255,255,255,.2);
    height: auto;
}


.form-embed-div .form-content-div {
    border: 1px solid #E7E7E7;
    background: #ffffff;
    border-radius: 3px;
    /* width: 100%; */
    padding: 10px;
}

  
         
.title-grid {
    background-color: #f5f5f5;
    border-bottom: 1px solid #dddddd;
    border: 1px solid #e3e3e3;
    border-bottom: 0;
    font: 16px "Cuprum", Helvetica, Arial, sans-serif;
    color: #333;
    display: block;
    padding-left: 10px;
    padding-right: 10px;
    padding-top: 7px;
    text-decoration: none;
    height: 25px;
    -webkit-border-top-left-radius: 3px;
    -webkit-border-top-right-radius: 3px;
    -moz-border-radius-topleft: 3px;
    -moz-border-radius-topright: 3px;
    border-top-left-radius: 3px;
    border-top-right-radius: 3px;
         }



.content-gird {
    background-color: #ffffff;
    border: 1px solid #e3e3e3;
    padding: 8px;
    color: #424242;
    -webkit-border-bottom-right-radius: 3px;
    -webkit-border-bottom-left-radius: 3px;
    -moz-border-radius-bottomright: 3px;
    -moz-border-radius-bottomleft: 3px;
    border-bottom-right-radius: 3px;
    border-bottom-left-radius: 3px;
}
   
  </style>
  
    <!---------popup for Template name------->
    <div class="dialogoverlay" style=" z-index:9999;" id="bl_dialogoverlay"></div>
    <div  id="dialogbox_bl" style=" display:none;z-index:99991; width:40%; margin-left:29%;"><a id="close" onclick="Alert_assignbl.Cancel()" style=" margin-top:-5px;">×</a>
    <div class="form-embed-div" style=" width:95%; margin-top:20px;">
    <div class="form-content-div" style=" padding:0px;;">
    <div class="grid-1" style=" width:98%;margin-left:1%; padding-right:0px;">
        <div class="title-grid"></div>
        <div class="content-gird">
       <!--------------> 
        <div style="width:70%; margin:0px auto;">
      <label>Template Name:</label>
      <input type="text" id="assignbl_txt" style=" width:50%;"/>  
        </div><!--close of conteent-grid--->
        
         <!-----------------> 
        <div style=" text-align:center; margin-top:10px;"> 
     <button class="button-a blue" onclick="Alert_assignbl.Save()">Save</button>
          &nbsp;&nbsp;
     <button class="button-a dark-blue" onclick="Alert_assignbl.Cancel()">Cancel</button>
                          </div>
       <!--------------->  
       <!-----------------> 
        </div><!--close of content-grid--->
        </div><!--close of grid-1----->
                </div><!--close of form content div--->
        </div><!--close of form embed div--->
        </div><!--close of dialogbox---->
       <!------------end of popup for Template Label------------->
  
   <script>
        /*******creating instances for calling popups*******/
    var Alert_assignbl= new Custom_formPopup(); //printbadge
</script>
  
   
</apex:page>