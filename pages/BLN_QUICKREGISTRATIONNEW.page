<apex:page controller="BLN_QUICKREGISTRATIONNEWCON"  standardStylesheets="false" showHeader="false" id="Thepage">
<apex:form id="Theform">

<c:AjaxLoader LoaderImage="{!$Resource.AjaxLoaderImage}"/>
<apex:stylesheet value="{!URLFOR($Resource.FormultiEvent,"css/screen.css")}"/> 
<apex:includeScript value="{!$Resource.PhoneSetup}"/>
<apex:include pageName="MallikTest2" /> 
<style type="text/css">
.ui-dialog-titlebar-close {
  visibility: hidden;
}
#left {
   float:left;
    bottom:0px;
}

#right {
   float:right;
    bottom:0px;
}
input.styled {
    display: none;
}
select.styled {
    position: relative;
    width: 190px;
    opacity: 0;
    filter: alpha(opacity=0);
    z-index: 5;
}
.disabled {
    opacity: 0.5;
    filter: alpha(opacity=50);
}
#formfield tr td {
    padding: 5px;
}
#formfield input[type="text"] {
    width: 100%;
    box-shadow: #F4F4F4 1px 4px 10px 0px;
    background: none;
    background-color: #FCFCFC;
    color: #5298FC;
    border: 1px solid #e3e3e3;
    text-indent: 5px;
    padding-left: 2px;
    height: 40px;
    border-radius: 3px;
    padding: 0px;
    margin: 0px;
    outline: none;
    font-weight: 200;
    font-size: 16px;
}
#formfield input[type="email"] {
    width: 100%;
    box-shadow: #F4F4F4 1px 4px 10px 0px;
    background: none;
    background-color: #FCFCFC;
    color: #5298FC;
    border: 1px solid #e3e3e3;
    text-indent: 5px;
    padding-left: 2px;
    height: 40px;
    border-radius: 3px;
    padding: 0px;
    margin: 0px;
    outline: none;
}
#formfield input[type="checkbox"] {
    outline: none;
    border: none;
}
#printbadge {
    width: 100%;
    height: 40px;
    border: 1px solid #67bcd1;
    -webkit-border-radius: 3px;
    cursor: pointer;
    -moz-border-radius: 3px;
    border-radius: 3px;
    font-size: 18px;
    font-family: cuprum;
    padding: 10px 10px 10px 10px;
    text-decoration: none;
    display: inline-block;
    color: #FFFFFF;
    font-weight: bold;
    background-color: #92cfde;
    background-image: -webkit-gradient(linear, left top, left bottom, from(#92cfde), to(#76bdd1));
    letter-spacing: 1px;
    background-image: -webkit-linear-gradient(top, #92cfde, #76bdd1);
    background-image: -moz-linear-gradient(top, #92cfde, #76bdd1);
    background-image: -ms-linear-gradient(top, #92cfde, #76bdd1);
    background-image: -o-linear-gradient(top, #92cfde, #76bdd1);
    background-image: linear-gradient(to bottom, #92cfde, #76bdd1);
filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr=#92cfde, endColorstr=#76bdd1);
}
#printbadge:hover {
    border: 1px solid #44adc6;
    background-color: #6bbed2;
    background-image: -webkit-gradient(linear, left top, left bottom, from(#6bbed2), to(#50abc4));
    background-image: -webkit-linear-gradient(top, #6bbed2, #50abc4);
    background-image: -moz-linear-gradient(top, #6bbed2, #50abc4);
    background-image: -ms-linear-gradient(top, #6bbed2, #50abc4);
    background-image: -o-linear-gradient(top, #6bbed2, #50abc4);
    background-image: linear-gradient(to bottom, #6bbed2, #50abc4);
filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr=#6bbed2, endColorstr=#50abc4);
}
.printbadge {
    width: 100%;
    height: 40px;
    border: 1px solid #67bcd1;
    -webkit-border-radius: 3px;
    cursor: pointer;
    -moz-border-radius: 3px;
    border-radius: 3px;
    font-size: 18px;
    font-family: cuprum;
    padding: 10px 10px 10px 10px;
    text-decoration: none;
    display: inline-block;
    color: #FFFFFF;
    font-weight: bold;
    background-color: #92cfde;
    background-image: -webkit-gradient(linear, left top, left bottom, from(#92cfde), to(#76bdd1));
    letter-spacing: 1px;
    background-image: -webkit-linear-gradient(top, #92cfde, #76bdd1);
    background-image: -moz-linear-gradient(top, #92cfde, #76bdd1);
    background-image: -ms-linear-gradient(top, #92cfde, #76bdd1);
    background-image: -o-linear-gradient(top, #92cfde, #76bdd1);
    background-image: linear-gradient(to bottom, #92cfde, #76bdd1);
filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr=#92cfde, endColorstr=#76bdd1);
}
.printbadge:hover {
    border: 1px solid #44adc6;
    background-color: #6bbed2;
    background-image: -webkit-gradient(linear, left top, left bottom, from(#6bbed2), to(#50abc4));
    background-image: -webkit-linear-gradient(top, #6bbed2, #50abc4);
    background-image: -moz-linear-gradient(top, #6bbed2, #50abc4);
    background-image: -ms-linear-gradient(top, #6bbed2, #50abc4);
    background-image: -o-linear-gradient(top, #6bbed2, #50abc4);
    background-image: linear-gradient(to bottom, #6bbed2, #50abc4);
filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr=#6bbed2, endColorstr=#50abc4);
}
</style> 
 
 <style type="text/css">

#single-label-example,option{text-align:left;}

body{font-family:"Helvetica Neue";border: 1px #ccc solid;background-color: #EFEFEF; height:100%; }
#header{
    <!--background-image: -moz-linear-gradient(top, #81a8cb, #4477a1); 
    background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0, #4477a1),color-stop(1, #81a8cb)); 
    filter:  progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#81a8cb', endColorstr='#4477a1');
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#81a8cb', endColorstr='#4477a1')";-->
    
    background-color: #4f91cd;font-size:26px; text-align:center; color:#FFFFFF; width:100%;height:40px; padding-top:5px;
    
}


.button{
    background: #414141; 
    padding: 3px; 
    color: #fff; 
    text-decoration:none;
    text-align:center;
    vertical-align:top;
     border-radius:5px;
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
   text-shadow: 0 -1px 1px rgba(0,0,0,0.25);
    border-bottom: 1px solid rgba(0,0,0,0.25);
  cursor: pointer;
   
    border:0px;
    font-size:18px;
     font-weight:600;
     font-family:"Helvetica Neue";
       background-image: -moz-linear-gradient(top, #81a8cb, #4477a1); 
    background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0, #4477a1),color-stop(1, #81a8cb)); 
    filter:  progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#81a8cb', endColorstr='#4477a1');
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#81a8cb', endColorstr='#4477a1')";
 
}
.button:hover                           { background-color: #111; color: #fff;text-decoration:none; }
   
    
input.rounded {
border: 1px solid #666666;
-moz-border-radius: 8px;
-webkit-border-radius: 8px;
border-radius: 8px;
font-size: 20px;
padding: 4px 7px;
outline: 0;
-webkit-appearance: none;
width:70%;
}

input.rounded:focus {
border-color: #339933;
-moz-box-shadow: 2px 2px 3px #666;
-webkit-box-shadow: 2px 2px 3px #666;
 box-shadow: 2px 2px 3px #666;
}
                                                  
   
    


.loaderBackground {
 filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#66EBEAE4, endColorstr=#66EBEAE4);
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#66EBEAE4,endColorstr=#66EBEAE4)";
    background: -webkit-linear-gradient(left top, rgba(204, 204, 204, 0), gray); /* For Safari 5.1 to 6.0 */
    background: -o-linear-gradient(bottom right, rgba(204, 204, 204, 0), gray); /* For Opera 11.1 to 12.0 */
    background: -moz-linear-gradient(bottom right, rgba(204, 204, 204, 0), gray); /* For Firefox 3.6 to 15 */
    background: linear-gradient(to bottom right, rgba(204, 204, 204, 0), gray);
    width:100%;
    height:100%;  
    z-index:99;
    position:absolute;       
    left:0px;
    right:0px;
}

</style>
<div id="header">{!EventName}
         
       <style>
 
#example-01 a.tooltip > span{
width: 850px; 
height:100px;
padding: 7px 10px; 
margin-top: 25px; 
opacity: 0; 
visibility: hidden; 
z-index: 10; 
position: absolute; 
display: none; 
margin-left: -900px;
}

#example-01 a.tooltip:hover span{ 
color: #000000; 
border: 1px solid #000000; 
background-image: url({!$Resource.browsersupport} );
background-repeat: no-repeat;
display: inline; 
} 

#example-01 a.tooltip:hover > span{ 
opacity: 1; 
visibility: visible; 
overflow: visible; 
}


 




  
 

 </style>  
           
          <div id="example-01"  class="example-wrapper" align="right" style="margin-top:-25px;">  
                                          
                                          <font size="2px;">Supported Browsers :</font>&nbsp;  <a href="#" class="tooltip">
                                                    <apex:image value="{!$Resource.BL_HelpIcon}" style="float:right;  width:20px;height:20px; border:0px; margin-top:-15px;margin: 0px 0px 0px 0px; "  /> 
                                                     
                                                     <span></span>
                                                     </a>
                                            
           </div>   
         </div>
<div class="ui-grid-a" style="width:100%;">

<div style="text-align:center; width:100%;"><h2>Welcome to {!EventName}</h2>

</div>
<div align="right">
 Select Template:
 <apex:selectList size="1" onchange="settemplate(this.value);" value="{!selectedtemplate}" id="selecttemplate">
 <apex:selectOptions value="{!bdstyleslist }"/>
 </apex:selectList>


    <div  style=" width:100%; text-align:center; border:0px solid #FF0000; height:auto;">
    
        <div>
                <div style="width:60%; margin:0px auto;">
                     <b>Enter Email Address</b>                  
                    <br /> <br />
 
                     <select data-placeholder="Select/Add  Email  Id " class="chosen-select" style="width:450px;" tabindex="17" id="single-label-example" onchange="returnSelectVal();">
             
             
             
             
            <option value=""></option>
            <apex:repeat value="{!eamemaillist }" var="ea">
               
                    <option value="{!ea.AS_id__r.AS_Email__c}">

                    {!ea.AS_id__r.AS_Email__c},
                   

                    
                      {!ea.AS_id__r.AS_FirstName__c},
                      
                      {!ea.AS_id__r.AS_LastName__c},
                      
                       {!ea.AS_id__r.AS_Company__c}
                      
                       </option>
                </apex:repeat>
            
          </select>&nbsp;&nbsp; <a><input type="Button"  onclick="returnSelectVal();" class="button"  value="Add" id="QRAdd"/>   </a>
          </div>
         
        </div>
    </div> 
    <script type="text/javascript">
     
   
     
      function returnSelectVal(){
      if(document.getElementById('{!$Component.Thepage:Theform:selecttemplate}').value=='')
         {
           alert('Please add a template for quick registration from badge settings');
           document.cookie = "apex__selectedBadge=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
           $('.chosen-select').val('').trigger('chosen:updated');
           return false;
         }

          //alert(document.getElementById("single-label-example").value);
           var selects = document.getElementById("single-label-example");
          // alert('  HHHH   '+selects.value+'     '+selects.selectedIndex);
           var selectedValue = selects.options[selects.selectedIndex].value; 
             //alert(selectedValue);
             if(temproryString == undefined || temproryString == ''|| selectedValue!= '' ){
             temproryString = selectedValue;
             }
          //alert('ttttttttttttttttttttt'+temproryString);
                if(temproryString== ""){
                   alert('Please Enter emailid');
                   return false;
                    }
              if(temproryString!= "" )
              {
                var boo = validateEmail(temproryString);
                    if(boo==true)
                    {
                    choosenValueFromJS(temproryString.toLowerCase());
                     $('.chosen-select').val('').trigger('chosen:updated');
                     document.getElementById("QRAdd").style.display="none";
                     $('#single_label_example_chosen').removeClass('chosen-with-drop');
                    }
                    else
                    $('.chosen-select').val('').trigger('chosen:updated');
                   return boo;
                }

          

          
          
           //alert(choosenValueFromJS);
         
          
       }
       

  var temproryString;

    var config = {
      '.chosen-select'           : {},
      '.chosen-select-deselect'  : {allow_single_deselect:true},
      '.chosen-select-no-single' : {disable_search_threshold:10},
      '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
      '.chosen-select-width'     : {width:"95%"}
    }
    for (var selector in config) {

      $(selector).chosen({search_contains:true},config[selector]);
    }
    
     
   $(".chosen-container").find('input').keyup(function(e)
    {
    temproryString = this.value;  
    });
  

     $(".chosen-search input").keypress(function (e) { 

     if (e.keyCode == 13) {
        e.preventDefault();
        returnSelectVal();
          }

     
     });
  
  function validateEmail(var1)
    {
               
        var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

    if (!filter.test(var1))
    {
        alert('Please provide a valid email address');
        return false;
    }
    else
        return true;
    }
    
    

 </script> 
    
    </div>
    <apex:outputpanel id="mainpanel" >
    <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.20/themes/ui-lightness/jquery-ui.css"/> 

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script>

   
     <script>
     function checkagain()
{
var a="{!printed}";
      
         if(a=='true')
        {
         
            var msg = 'The Badge is already Printed...<br>Do you want to Print it again? ';
           
                      var div = $("<div>" + msg + "</div>");
                       $(".loaderBackground").css("display","block");
                        div.dialog({
                            title: "Confirm",
                            buttons : {
                                "OK" : function() {
                                $(".loaderBackground").css("display","none");
                                  div.dialog("close");
                                    },
                                    "CANCEL" : function() {
                                     $(".loaderBackground").css("display","none");
                                    cancel();
                                   
                                    }
                                  }
                                });

           
           }
}
     </script>
    
    <apex:outputpanel rendered="{!noatt==1}" layout="none"><!--For existing attendee-->
    <section id="middle" style=" border:0px #000000 solid; padding:0px;" class="res" >
  <div id="container" style="border:0px #ccc solid; background-color: #EFEFEF; margin-top:0px;">
    <div id="content" style="padding:0px; margin-top:x    0px;">
      
      <!----------------------------------------->
      <div class="grid-1">
        
        
        <!------------------------------------------> 
        
        <!--start of promocodebox-->
        <div id="promocodebox" style="width:95%; margin:0px auto; margin-top:30px;"> 
          
          <!--start of left div form-->
          <div style="width:35%; border:2px solid #78DBE9; height:auto; padding-bottom:20px; margin-top:-10px; margin-right:20px; background-color:#efefef; background: url(images/timer-component-bg.jpg); box-shadow: #999 1px 3px 10px 0px; float:left;">
            <div style="width:100%; height:30px; background-color:#78DBE9"></div>
            <table width="95%" id="formfield" border="0"  style="margin:0px auto; margin-top:20px; border-collapse:collapse;">
              <tr>
                <td width="42%" style="text-align:left; width:50%"><apex:inputText value="{!att.AS_FirstName__c}" html-placeholder="First Name"  style=""  id="firstname" /></td>
                <td colspan="2" style="text-align:right;"><apex:inputText value="{!att.AS_LastName__c}" html-placeholder="Last Name" style="" id="lastname" /></td>
              </tr>
              <tr>
                <td colspan="3"><div style="width: 100%;box-shadow: #F4F4F4 1px 4px 10px 0px;background: none;background-color: #FCFCFC;color: #5298FC;border: 1px solid #e3e3e3;text-indent: 5px;padding-left:2px;height: 40px;border-radius: 3px;padding: 0px;margin: 0px;outline: none;font-weight: 200;font-size: 16px;"><apex:outputText value="{!EAMAttendee.AS_id__r.AS_Email__c}" /></div></td>
              </tr>
              <tr>
                <td colspan="3" width="100%">
               <apex:inputField value="{!att.AS_Company__c}"  id="Company" style="" html-placeholder="Company" />
                </td>
              </tr>
              <tr>
                <td colspan="3"><apex:inputfield html-placeholder="Title" value="{!att.AS_Title__c}" onkeyup="update()"  id="title" style=""/></td>
              </tr>
              <tr>
                <td colspan="3"><apex:inputField value="{!att.AS_WorkPhone__c}" html-placeholder="Phone" style="" onkeyup="javascript:keyUP(this,event);" onblur="javascript:validatePhone(this);"   id="phone"/></td>
              </tr>
              <tr>
                <td colspan="3">Country</td>
              </tr>
               <tr>
              <td colspan="3"><apex:inputField value="{!att.AS_Work_Country__c}" styleClass="selectlist" onchange="update()" id="country"/></td>
              </tr>
              <tr>
                <td colspan="3">State</td>
              </tr>
               <tr>
                <td colspan="3"><apex:inputField value="{!att.AS_Work_States__c}" styleClass="selectlist" onchange="update()" onfocus="update()"  id="states"/></td>
              </tr>
               <tr>
                <td colspan="3"><apex:inputField value="{!att.AS_WorkCity__c}" html-placeholder="City" onkeyup="update()" style=""   id="city"/></td>
              </tr>
              <tr style="border-top:thin solid;border-bottom:thin solid; border-left:thin solid;border-right:thin solid;border-color:#78DBE9;">
              <td>
              <apex:inputText value="{!EAMAttendee.TicketTypesBP__c}" onkeyup="update()" id="badgettype" html-placeholder="Badge Ticket Type"/>
              </td>
              <td>
              <p style="font-size:14px; font-family:cuprum; float:left;">Visibility:</p>
              <apex:inputField value="{!EAMAttendee.Display_Ticket_Label__c}" onchange="update()" id="badgettypevisible"/> 
              </td>
              <td/>
              </tr>
              <tr>
              <td/>
              </tr>
              <tr style="border-top:thin solid;border-bottom:thin solid; border-left:thin solid;border-right:thin solid;border-color:#78DBE9;">
                <td ><apex:inputField value="{!EAMAttendee.GuestType__c}" onkeyup="update()" id="badgelabel" html-placeholder="Badge Ticket Category"/></td>
                <td style="font-size:14px; font-family:cuprum; line-height:none;"><div style="float:left; margin-right:4%;">Color:</div><span><input type='color' name='color' value="{!EAMAttendee.Badge_Color__c}" onchange="update()" id="badgecolor"/> 
  <apex:inputHidden value="{!EAMAttendee.Badge_Color__c}" id="myHiddenField"/></span></td>
           
              <td style=" "><p style="font-size:14px; font-family:cuprum; float:left;">Visibility:</p><span><apex:inputField value="{!EAMAttendee.Display_Badge_Label__c}" onchange="update()" id="badgevisible"/>
          </span></td>
              </tr>
              
              
              <tr id="printbadgebttnrow">
                <td  style=" padding:15px;">
                
                <!--<apex:commandLink style="text-decoration:none;" Onclick="return move();" action="{!PrintAttendee}" > 
    <apex:commandButton value="Print Badge" styleClass="printbadge"/>
    </apex:commandLink>-->
    <apex:commandLink style="text-decoration:none;" Onclick="if(!move()){return false;$('.loaderBackground').css('display','none');}" action="{!PrintAttendee}" rerender="renderhere" oncomplete="$('.loaderBackground').css('display','none');printPdf();">
    <apex:commandButton value="Print Badge" styleClass="printbadge" />
    </apex:commandLink>
                </td>
                <td colspan="2"  style=" padding:15px;">
                
               
    <apex:commandButton value="Cancel" styleClass="printbadge" action="{!cancel}"/>
    
                </td>
              </tr>
            </table>
          </div>
          <!--end of left div form--> 
          <div class="loaderBackground" style="display:none;text-align:center;">
    <img src="http://www.boothleads.com/badge_images/icons/ajax_loader.gif" id="loaderImg"  alt="Loading...."    />
  </div> 
          <!--start of  right div iframe-->
          <div  style="width:50%;  margin-top:50px; margin-right:0px; background-color:#eaeaea;border: #F6F6F6 10px solid; padding:10px; box-shadow: #999 1px 3px 10px 0px; float:right; text-align:center;">
          
             <iframe name="pdf" id="ifrmeSummary" frameborder="0" width="405" height="300"></iframe>
           
           
           </div>
     
    <apex:outputpanel id="renderhere">  
          <!--end of left div form--> 
          <script type="text/javascript">

$(document).ready(function(){
$("#Thepage\\:Theform\\:firstname").keyup(update);
$("#Thepage\\:Theform\\:lastname").keyup(update);
$("#Thepage\\:Theform\\:Company").keyup(update);
try{
$("#Thepage\\:Theform\\:atttypes").click(update);
}catch(e){}

$("#Thepage\\:Theform\\:firstname").focus();
try{
$('#Thepage\\:Theform\\:firstname').live("input", function(){ update();});
$('#Thepage\\:Theform\\:lastname').live("input", function(){ update();});
$('#Thepage\\:Theform\\:Company').live("input", function(){ update();});
$('#Thepage\\:Theform\\:title').live("input", function(){ update();});
$('#Thepage\\:Theform\\:city').live("input", function(){ update();});
$('#Thepage\\:Theform\\:badgettype').live("input", function(){ update();});
$('#Thepage\\:Theform\\:phone').live("input", function(){ update();});
$('#Thepage\\:Theform\\:badgelabel').live("input", function(){ update();});
}catch(e){}

});
  var statemap = {'None': 'None', 'Alabama': 'AL','Alaska': 'AK','Arizona': 'AZ','Arkansas': 'AR','California': 'CA','Colorado': 'CO','Connecticut': 'CT','Delaware': 'DE','District of Columbia': 'DC','Florida': 'FL','Georgia': 'GA','Hawaii': 'HI','Idaho': 'ID','Illinois': 'IL','Indiana': 'IN','Iowa': 'IA','Kansas': 'KS','Kentucky': 'KY','Louisiana': 'LA','Maine': 'ME','Maryland': 'MD','Massachusetts': 'MA','Michigan': 'MI','Minnesota': 'MN','Mississippi': 'MS','Missouri': 'MO','Montana': 'MT','Nebraska': 'NE','Nevada': 'NV','New Hampshire': 'NH','New Jersey': 'NJ','New Mexico': 'NM','New York': 'NY','North Carolina': 'NC','North Dakota': 'ND','Ohio': 'OH','Oklahoma': 'OK','Oregon': 'OR','Pennsylvania': 'PA','Rhode Island': 'RI','South Carolina': 'SC','South Dakota': 'SD','Tennessee': 'TN','Texas': 'TX','Utah': 'UT','Vermont': 'VT','Virginia': 'VA','Washington': 'WA','West Virginia': 'WV','Wisconsin': 'WI','Wyoming': 'WY','United States Of America': 'USA'};  
  update(); 
     
 function update(){ 
 
var atypes="{!EAMAttendee.EV_id__r.Attendee_Types__c}";


//show name
var fname= $("#Thepage\\:Theform\\:firstname").val();
var lname= $("#Thepage\\:Theform\\:lastname").val();
var company=$("#Thepage\\:Theform\\:Company").val();
var badgelabel=$("#Thepage\\:Theform\\:badgelabel").val();
var jobtitle=$("#Thepage\\:Theform\\:title").val();
if(badgelabel.toUpperCase()=='EXECUTIVE DURECTOR')
   $("#badgecolor").val('#792e2e');
   else if(badgelabel.toUpperCase()=='PRESIDENT')
   $("#badgecolor").val('#2e79ce');
   else if(badgelabel.toUpperCase()=='EXHIBITOR')
   $("#badgecolor").val('#008000');
   else if(badgelabel.toUpperCase()=='SECURITY')
   $("#badgecolor").val('#2e5c77');
   else if(badgelabel.toUpperCase()=='STAFF')
   $("#badgecolor").val('#a63032');
   else if(badgelabel.toUpperCase()=='SPONSOR')
   $("#badgecolor").val('#ff0000');
   else if(badgelabel.toUpperCase()=='SPEAKER')
   $("#badgecolor").val('#df3434');
   else if(badgelabel.toUpperCase()=='VIP')
   $("#badgecolor").val('#501f76');
   else if(badgelabel.toUpperCase()=='HOST')
   $("#badgecolor").val('#8a26d4');
   else if(badgelabel.toUpperCase()=='ATTENDEE')
   $("#badgecolor").val('#1b75bb');
   else if(badgelabel.toUpperCase()=='BOARD MEMBER')
   $("#badgecolor").val('#6e325c');
   else if(badgelabel.toUpperCase()=='MODERATOR')
   $("#badgecolor").val('#314542');


var badgecolor=$("#badgecolor").val();
document.getElementById('Thepage:Theform:myHiddenField').value=badgecolor;
var badgevisible=document.getElementById('Thepage:Theform:badgevisible').checked;
var badgettypevisible=document.getElementById('Thepage:Theform:badgettypevisible').checked;
var name=fname+' '+lname;

var atttype='';
//code for attendee type
try{
if(badgevisible==true)
atttype='<font style="valign:bottom;text-align:center;background-color:'+badgecolor+';display:block;font-size:26px;color:#ffffff;font-face:Arial-BoldMT;">'+badgelabel+'</font>';

}catch(e){}

//
//code for ticket type
var badgettype='';
try{
if(badgettypevisible==true)
badgettype=$("#Thepage\\:Theform\\:badgettype").val();
}catch(e){}

//

var abarcodeimage='';
abarcodeimage='<img src="https://chart.googleapis.com/chart?chs=125x125&cht=qr&chl={!EAMAttendee.EA_AttendeeBarcode__c }"/>';


 var evlogo='';
//var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
//if (isChrome)
//evlogo='<img src="/servlet/servlet.FileDownload?file={!EAMAttendee.EV_id__r.EV_EventLogo__c}" style="width:100%;height:auto;padding-left:3px;padding-top:3px">';
//else
evlogo='<object type="image/jpeg" data="/servlet/servlet.FileDownload?file={!EAMAttendee.EV_id__r.EV_EventLogo__c}" style="width:150px;height:100px;padding-left:3px;padding-top:3px">';

var statevar;

if(statemap[$("#Thepage\\:Theform\\:states").val()]==undefined)
statevar=$("#Thepage\\:Theform\\:states").val();
else
statevar=statemap[$("#Thepage\\:Theform\\:states").val()];

var comma='';
if(statevar!=''&&$("#Thepage\\:Theform\\:city").val()!='')
comma=',';


var fspan='';
var id='';
var ffamily='';
<apex:repeat var="el" value="{!elems}">
var id="{!el.id}";
try{
ffamily="{!el.fontFamily}";}catch(e){}
if(id=="firn"||id=="cfirn"||id=="badgeFirstName")
{

fspan=fspan+'<span class="atextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+fname+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".atextfill").textfill(newfonts, 11);</scr'+'ipt>';
}
if(id=="lstn"||id=="clstn"||id=="badgeLastName")
{

fspan=fspan+'<span class="btextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+lname+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".btextfill").textfill(newfonts, 11);</scr'+'ipt>';
}
if(id=="cfulln"||id=="fulln"||id=="badgeFullName")
{

fspan=fspan+'<span class="ctextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';"><apex:outputtext value="dr. " rendered="{!CONTAINS(UPPER(el.contentText), 'DR.')}"/>'+name+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".ctextfill").textfill(newfonts, 11);</scr'+'ipt>';
}
if(id=="cdline")
fspan=fspan+'<span style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">{!el.contentText}<\/span>';

if(id=="ccomn"||id=="comn"||id=="badgeCompanyName")
{

fspan=fspan+'<span class="dtextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+company+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".dtextfill").textfill(newfonts, 11);</scr'+'ipt>';
}
if(id=="ccity")
fspan=fspan+'<span class="cctextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+$("#Thepage\\:Theform\\:city").val()+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".cctextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(id=="cstate")
fspan=fspan+'<span class="sttextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+statevar+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".sttextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(id=="ccitystate")
fspan=fspan+'<span class="csttextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+$("#Thepage\\:Theform\\:city").val()+comma+' '+statevar+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".csttextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(id=="cstext")
fspan=fspan+'<span class="ltextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">{!el.contentText}<\/span>';

if(id=="cstext2")
fspan=fspan+'<span class="mtextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">{!el.contentText}<\/span>';

if(id=="cstext3")
fspan=fspan+'<span class="ntextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">{!el.contentText}<\/span>';

if(id=="uniqNo"||id=="cuniqNo")
fspan=fspan+'<span class="vtextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">{!EAMAttendee.UniqNo__c}<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".vtextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(badgettypevisible==true){
if(id=="ticketn"||id=="cticketn"||id=="badgeTicket")
fspan=fspan+'<span class="etextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+badgettype+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".etextfill").textfill(newfonts, 11);</scr'+'ipt>';
}

if(badgevisible==true){
if(id=="ticketCategory"||id=="cticketCategory"||id=="badgeExhibitor")
fspan=fspan+'<span class="ftextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+badgelabel+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".ftextfill").textfill(newfonts, 11);</scr'+'ipt>';
}
if(id=="jobTitle"||id=="cjobTitle"||id=="badgeJobTitle")
fspan=fspan+'<span class="gtextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+jobtitle+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".gtextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(id=="Logo"||id=="cclogo"||id=="badgeLogo")
fspan=fspan+'<div style="position:absolute;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};background-image:url(\'/servlet/servlet.FileDownload?file={!EAMAttendee.EV_id__r.EV_EventLogo__c}\');background-size:100% 100%"></div>';

if(id=="badgeLogof")
fspan=fspan+'<div style="position:absolute;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};background-image:url(\'{!el.urlResult}\');background-size:100% 100%"></div>';


if(id=="badgeQrCode"||id=="cqrcd"||id=="qrcode")
fspan=fspan+'<div style="position:absolute;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};background-image:url(\'https://chart.googleapis.com/chart?chs=125x125&cht=qr&chl={!EAMAttendee.EA_AttendeeBarcode__c}\');background-size: 100% 100%;"></div>';





</apex:repeat>
var y='';
var pgsz='';


if('{!btstyle.Badge_Type__c}'=='Brother')
pgsz='<style>@page{size:3.9in 2.4in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
if('{!btstyle.Badge_Type__c}'=='Zebra')
{
if(navigator.userAgent.indexOf("Chrome") != -1 ) 
    {
        pgsz='<style>@page{size:3.75in 3in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
    }
    
    else if(navigator.userAgent.indexOf("Firefox") != -1 ) 
    {
       
         pgsz='<style>@page{size:4in 3in;margin-top:0px;margin-left:-2px;margin-bottom:0px;margin-right:-2px;}</style>';
    }
    else
pgsz='<style>@page{size:3.75in 3in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
}
if('{!btstyle.Badge_Type__c}'=='Avery')
pgsz='<style>@page{size:3.375in 2.33in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
if('{!btstyle.Badge_Type__c}'=='Dymo')
pgsz='<style>@page{size:4.19in 2.44in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
if('{!btstyle.Badge_Type__c}'=='CustScanBadge')
pgsz='<style>@page{size:3.0in 2.25in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
var y='<html><head><scr'+'ipt type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></scr'+'ipt><scr'+'ipt type="text/javascript">(function($) {$.fn.textfill = function(maxFontSize, maxWords) {maxFontSize = parseInt(maxFontSize, 10);maxWords = parseInt(maxWords, 10) || 3;return this.each(function(){var self = $(this),orgText = self.text(),fontSize = parseInt(self.css("fontSize"), 10),lineHeight = parseInt(self.css("lineHeight"), 10),maxHeight = self.height(),maxWidth = self.width(),words = self.text().split(" ");function calcSize(text) {var ourText = $("<span>"+text+"</span>").appendTo(self),multiplier = maxWidth/ourText.width(),newSize = fontSize*(multiplier-0.1);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize );var scrollHeight = self[0].scrollHeight;if (scrollHeight  > maxHeight) {multiplier = maxHeight/scrollHeight;newSize = (newSize*multiplier);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize);}}self.empty();if (words.length > maxWords) {while (words.length > 0) {var newText = words.splice(0, maxWords).join(" ");calcSize(newText);elf.append("<br>");}} else {calcSize(orgText);}});};})(jQuery);$(function(){$(".textfill").textfill(0, 11);});</scr'+'ipt>'+pgsz+'</head><body bgcolor="white">'+fspan+'</body></html>';


//var y='<html><head><scr'+'ipt type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></scr'+'ipt><scr'+'ipt type="text/javascript">(function($) {$.fn.textfill = function(maxFontSize, maxWords) {maxFontSize = parseInt(maxFontSize, 10);maxWords = parseInt(maxWords, 10) || 3;return this.each(function(){var self = $(this),orgText = self.text(),fontSize = parseInt(self.css("fontSize"), 10),lineHeight = parseInt(self.css("lineHeight"), 10),maxHeight = self.height(),maxWidth = self.width(),words = self.text().split(" ");function calcSize(text) {var ourText = $("<span>"+text+"</span>").appendTo(self),multiplier = maxWidth/ourText.width(),newSize = fontSize*(multiplier-0.1);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize );var scrollHeight = self[0].scrollHeight;if (scrollHeight  > maxHeight) {multiplier = maxHeight/scrollHeight;newSize = (newSize*multiplier);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize);}}self.empty();if (words.length > maxWords) {while (words.length > 0) {var newText = words.splice(0, maxWords).join(" ");calcSize(newText);elf.append("<br>");}} else {calcSize(orgText);}});};})(jQuery);$(function(){$(".textfill").textfill(0, 11);});</scr'+'ipt>'+pgsz+'</head><body bgcolor="white">'+fspan+'</body></html>';
//var y='<html><head><style>@page{size:4.19in 2.44in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style><scr'+'ipt type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></scr'+'ipt><scr'+'ipt type="text/javascript">(function($) {$.fn.textfill = function(maxFontSize, maxWords) {maxFontSize = parseInt(maxFontSize, 10);maxWords = parseInt(maxWords, 10) || 3;return this.each(function(){var self = $(this),orgText = self.text(),fontSize = parseInt(self.css("fontSize"), 10),lineHeight = parseInt(self.css("lineHeight"), 10),maxHeight = self.height(),maxWidth = self.width(),words = self.text().split(" ");function calcSize(text) {var ourText = $("<span>"+text+"</span>").appendTo(self),multiplier = maxWidth/ourText.width(),newSize = fontSize*(multiplier-0.1);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize );var scrollHeight = self[0].scrollHeight;if (scrollHeight  > maxHeight) {multiplier = maxHeight/scrollHeight;newSize = (newSize*multiplier);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize);}}self.empty();if (words.length > maxWords) {while (words.length > 0) {var newText = words.splice(0, maxWords).join(" ");calcSize(newText);elf.append("<br>");}} else {calcSize(orgText);}});};})(jQuery);$(function(){$(".textfill").textfill(0, 11);});</scr'+'ipt></head><body bgcolor="white">'+fspan+'</body></html>';
if('{!btstyle.Badge_Type__c}'=='SwedenBadge'){
y='<html><head><meta charset="utf-8"></meta><title>Untitled Document</title><style >@page {size:A4 landscape;margin-left: 0.8cm;margin-right: 0.3cm;margin-top: 0.3cm;margin-bottom: 0.8cm;}</style><scr'+'ipt type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></scr'+'ipt><scr'+'ipt type="text/javascript">(function($) {$.fn.textfill = function(maxFontSize, maxWords) {maxFontSize = parseInt(maxFontSize, 10);maxWords = parseInt(maxWords, 10) || 3;return this.each(function(){var self = $(this),orgText = self.text(),fontSize = parseInt(self.css("fontSize"), 10),lineHeight = parseInt(self.css("lineHeight"), 10),maxHeight = self.height(),maxWidth = self.width(),words = self.text().split(" ");function calcSize(text) {var ourText = $("<span>"+text+"</span>").appendTo(self),multiplier = maxWidth/ourText.width(),newSize = fontSize*(multiplier-0.1);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize );var scrollHeight = self[0].scrollHeight;if (scrollHeight  > maxHeight) {multiplier = maxHeight/scrollHeight;newSize = (newSize*multiplier);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize);}}self.empty();if (words.length > maxWords) {while (words.length > 0) {var newText = words.splice(0, maxWords).join(" ");calcSize(newText);elf.append("<br>");}} else {calcSize(orgText);}});};})(jQuery);$(function(){$(".textfill").textfill(0, 11);});</scr'+'ipt></head><body bgcolor="white"><table width="100%" border="0" cellspacing="0" cellpadding="0" style="font-family:Verdana, Geneva, sans-serif;"><tr><td width="50%" align="left" valign="top" style="padding-top:50px;padding-right:10px;"><h3 style="font-family:Verdana, Geneva, sans-serif;">{!eve.EV_Title__c}</h3>Where:&nbsp;&nbsp;{!eve.AS_HostingCity__c}<br />When:&nbsp;&nbsp;<apex:outputText value="{0, date,d'rd of' MMMM yyyy}"><apex:param value="{!eve.EV_StartDate__c}" /> </apex:outputText>, {!eve.StartTime__c}-{!eve.EV_EndTime__c}<br /> <br /><font color="#FF0000" style="font-family:Verdana, Geneva, sans-serif;"><strong>IMPORTANT:</strong></font><br /><p style="font-family:Verdana, Geneva, sans-serif;">This is you entry ticket and badge to the Nordic IT Security Forum.The ticket is personal and the QR code includes your personal ticket details and gives you access when scanned at the entrance to the exhibition hall.</p><br /><strong>PLEASE PRINT AND BRING THE TICKET TO THE VENUE</strong></td><td width="50%" align="center"><!-- badge div start here --><div style="border:1px solid #F00; width:5.82in; height:4.13in;position:relative;">'+fspan+'</div><!-- badge div end here --></td></tr><tr><td colspan="2" align="center" valign="top"><table width="100%" border="0" cellspacing="0" cellpadding="5"><tr><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td></tr><tr><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/print.png')}" width="75" height="75" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/info-icon.png')}" width="75" height="75" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/cutter_icon.png')}" width="75" height="75" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/badger-cover.png')}" width="100" height="81" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/tag.jpg')}" width="100" height="100" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/scan.png')}" width="100" height="101" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/congratulations.png')}" width="75" height="75" /></td></tr><tr><td width="14%" align="left" valign="top">7. Print this  ticket in A4 and bring to the event on the 3rd of November</td><td width="14%">6. Find the  registration desk at the entrance of Section T (<em>near the Scandic hotel entrance</em>)</td><td width="14%" align="left" valign="top">5. If you have  not yet cut your badge out: Please go to our dedicated stations and cut it out</td><td width="14%" align="left" valign="top">4. Pick up a  plastic badge a<a name="_GoBack"></a>nd put your ticket in it</td><td width="14%" align="left" valign="top">3. Pick up a  lanyard</td><td width="14%" align="left" valign="top">2. Go to the  registration desk and get your badge scanned by one of our onsite staff members</td><td width="14%" align="left" valign="top" style="font-size:12px">1. CONGRATULATIONS <br/><strong>– you are in!</strong></td></tr></table></td></tr></table></body></html>';
$('iframe').attr('width','600px');
}
else
$('iframe').attr('width','405px');
$('iframe').attr('srcdoc',y );


}


function printPdf() {
  
var getMyFrame = document.getElementById('ifrmeSummary');
    getMyFrame.focus();
    getMyFrame.contentWindow.print();
   setTimeout(function(){cancel();}, 1000);
           
  
}


    
</script>
<script language="JavaScript">


function move() {
var x = document.getElementById('{!$Component.Thepage:Theform:firstname}').value;
var y = document.getElementById('{!$Component.Thepage:Theform:lastname}').value;
var z = document.getElementById('{!$Component.Thepage:Theform:title}').value;
var p = document.getElementById('{!$Component.Thepage:Theform:phone}').value;
var c = document.getElementById('{!$Component.Thepage:Theform:Company}').value;
x =x.trim();
y =y.trim();
z =z.trim();
c =c.trim();
p =p.trim();



if(x == "" || x == null)
{
alert('Please enter First name');
return false;
}else
if(y == "" || y == null)
{
alert('Please enter Last name');
return false;
}
else{

$(".loaderBackground").css("display","block");
return true;
}
}
</script>
   </apex:outputpanel>          
        </div>
        <!--end of promocodebox--> 
       
      </div>
      <!--close of-grid1--> 
      
      <!----------------------------------->
      
      <div class="clear"></div>
      
      
      
    </div>
    <!-- #content--> 
  </div>
  <!-- #container-->
  <footer style="width:100%; padding:0px;">
    <div class="info-footer" style="margin:0px;" >
      <div id="left">
        <p>Copyright &copy; 2014  Global Nest.</p>
      </div>
      <div id="right">
        <p>Booth Leads </p>
      </div>
    </div>
  </footer>
  
</section>
<div class="clear"></div>
    </apex:outputpanel>
    
   <apex:outputpanel rendered="{!noatt==2}" layout="none"><!--For new attendee-->
   <section id="middle" style=" border:0px #000000 solid;padding:0px;" class="res" >
  <div id="container" style="border:0px #ccc solid; background-color: #EFEFEF; margin-top:0px;border-top:0px;">
    <div id="content" style="padding:0px; margin-top:x    0px;">
      
      <!----------------------------------------->
      <div class="grid-1">
        
        
        <!------------------------------------------> 
        
        <!--start of promocodebox-->
       
        <div id="promocodebox" style="width:95%; margin:0px auto; margin-top:30px;"> 
          
          <!--start of left div form-->
          <div style="width:35%; border:2px solid #78DBE9; height:auto; padding-bottom:20px; margin-top:-10px; margin-right:20px; background-color:#efefef; background: url(images/timer-component-bg.jpg); box-shadow: #999 1px 3px 10px 0px; float:left;">
            <div style="width:100%; height:30px; background-color:#78DBE9"></div>
            <table width="95%" id="formfield" border="0"  style="margin:0px auto; margin-top:20px; border-collapse:collapse;" >
              <tr>
                <td width="42%" style="text-align:left; width:50%"><apex:inputText value="{!att.AS_FirstName__c}" html-placeholder="First Name"  style=""  id="firstnames"/></td>
                <td colspan="2" style="text-align:right;"><apex:inputText value="{!att.AS_LastName__c}" html-placeholder="Last Name" style="" id="lastnames"/></td>
              </tr>
              <tr>
                <td colspan="3"><div style="width: 100%;box-shadow: #F4F4F4 1px 4px 10px 0px;background: none;background-color: #FCFCFC;color: #999;border: 1px solid #e3e3e3;text-indent: 5px;padding-left:2px;height: 40px;border-radius: 3px;padding: 0px;margin: 0px;outline: none;"><apex:outputText value="{!email}" /></div></td>
              </tr>
              <tr>
                <td colspan="3" width="100%">
                
            <apex:inputText html-placeholder="Company" value="{!att.AS_Company__c}"  id="searchValue" style=""/>
            
    <div class="loaderBackground" style="display:none;text-align:center;">
    <img src="http://www.boothleads.com/badge_images/icons/ajax_loader.gif" id="loaderImg"  alt="Loading...."    />
  </div>
 
   
                </td>
              </tr>
              <tr>
                <td colspan="3"><apex:inputfield id="titles" html-placeholder="Title" value="{!att.AS_Title__c}" style=""/></td>
              </tr>
              <tr>
                <td colspan="3"><apex:inputField value="{!att.AS_WorkPhone__c}" html-placeholder="Phone" style="" onkeyup="javascript:keyUP(this,event);" onblur="javascript:validatePhone(this);"   id="phones"/></td>
              </tr>
               <tr>
                <td colspan="3">Country</td>
              </tr>
               <tr>
              <td colspan="3"><apex:inputField value="{!att.AS_Work_Country__c}" styleClass="selectlist" onchange="updatenew()" id="countrys"/></td>
              </tr>
              <tr>
                <td colspan="3">State</td>
              </tr>
               <tr>
                <td colspan="3"><apex:inputField value="{!att.AS_Work_States__c}" styleClass="selectlist"  onchange="updatenew()" onfocus="update()"  id="statess"/></td>
              </tr>
               <tr>
                <td colspan="3"><apex:inputField value="{!att.AS_WorkCity__c}" html-placeholder="City" onkeyup="updatenew()" style=""   id="citys"/></td>
              </tr>
              <tr style="border-top:thin solid;border-bottom:thin solid; border-left:thin solid;border-right:thin solid;border-color:#78DBE9;">
              <td>
              <apex:inputText value="{!badgettype}" onkeyup="update()" id="badgettypes" html-placeholder="Badge Ticket Type"/>
              </td>
              <td>
              <p style="font-size:14px; font-family:cuprum; float:left;">Visibility:</p>
              <apex:inputCheckbox value="{!displaybadgettype}" onchange="updatenew()" id="displaybadgettype"/> 
              </td>
              <td/>
              </tr>
              <tr><td colspan="3"></td></tr>
              <tr style="border-top:thin solid; border-left:thin solid;border-right:thin solid;border-color:#78DBE9;">
              <td colspan="3">
              <apex:selectlist value="{!selectedattendeetypes}" id="typeselect" size="1" styleclass="selectlist" style="width:50%">
    <apex:actionSupport event="onchange" 
                            action="{!changeother}" rerender="gotolabel"  oncomplete="updatenew()"/>
    <apex:selectOptions value="{!Attoptions}"/>
    </apex:selectlist>
              </td>
             </tr>
             <tr style="border-bottom:thin solid; border-left:thin solid;border-right:thin solid;border-color:#78DBE9;">
                <td ><apex:outputpanel id="gotolabel"><apex:inputtext value="{!othervalue}" html-placeholder="Badge Label"   id="othervalue" onkeyup="updatenew()"/></apex:outputpanel></td>
                <td  style="font-size:14px; font-family:cuprum; line-height:none;"><div style="float:left; margin-right:4%;">Color:</div><span><input type='color' name='color' value="{!colorvalue}" onchange="updatenew()" id="color" style=""/></span></td>
           <td ><p style="font-size:14px; font-family:cuprum; float:left;">Visibility:</p><span><apex:inputCheckbox value="{!displaybadgelabel}" id="visibility" onchange="updatenew()" style="margin-left:2%;"/>
<apex:inputHidden value="{!colorvalue}" id="myHiddenFields"/></span></td>
              </tr>
              <tr>
              <td></td></tr>
              
              <tr>
              
                <td colspan="2" style="font-size:12px;"><span><p style=" font-size:14px; font-family:cuprum; float:left; margin-right:2%; margin-top:5px;">Payment:</p></span><!--<img src="{!URLFOR($Resource.quickregistrationnew, 'quickregistrationnew/images/paypal-logo-transparent1.png')}" style="margin-left:-3px; margin-bottom:-10px; margin-right:3%;" width="60" height="30"/>--><span><apex:inputCheckbox value="{!paymode}" id="paypal" onClick="paymentmode()" style="margin-top:2%"/></span></td>
            
             
              </tr>
              

              <tr id="printbadgebttnrow">
                <td  style=" padding:15px;">
                
     <apex:commandLink action="{!SaveAndPrint}"  style="text-decoration:none;" reRender="renderheres" Onclick="if(!movenew()) return false;" oncomplete="getnewdata();">
    <apex:commandButton value="Save & Print" styleClass="printbadge" />
    </apex:commandLink>
   
    
                </td>
                <td colspan="2"  style=" padding:15px;">
                
                <apex:commandLink style="text-decoration:none;" action="{!cancel}"  > 
    <apex:commandButton value="Cancel" styleClass="printbadge" />
    </apex:commandLink>
                </td>
              </tr>
            </table>
          </div>
          <!--end of left div form--> 
          
          <!--start of  right div iframe-->
          <div  style="width:50%;  margin-top:50px; margin-right:0px; background-color:#eaeaea;border: #F6F6F6 10px solid; padding:10px; box-shadow: #999 1px 3px 10px 0px; float:right; text-align:center;">
          
             <iframe name="pdf" id="ifrmeSummary" frameborder="0" width="405" height="300"/>
           
           </div>
            <apex:outputpanel id="renderheres">
 <script>
function getnewdata()
{

   if('{!attexist}'=='true'){
   alert('Email Id already exist');
   $(".loaderBackground").css("display","none");
   saveclick=0;
   return;
   }
   BLN_QUICKREGISTRATIONNEWCON.getnewdata('{!email}','{!EventId}', function(result, event){
   if (event.status) {
   
               var combinedcode=result.split('~');
               abarcode=combinedcode[0];
               abaruniqueno=combinedcode[1];
               
               updatenew();
               
                $(".loaderBackground").css("display","none");
                saveclick=0;
                }
                else if (event.type === 'exception') {
                 $(".loaderBackground").css("display","none");
                 alert('Data Not Saved/Payment Credentials Not Correct');
                saveclick=0;
            } else {
            $(".loaderBackground").css("display","none");
                alert('Payment Not Successful');
                saveclick=0;
                 
            }
               
            });
}
</script>
</apex:outputpanel>
          
          <!--end of left div form--> 
          <script>
          
 
  //Adding Logo
$("#Thepage\\:Theform\\:firstnames").focus();
$("#Thepage\\:Theform\\:firstnames").keyup(updatenew);
$("#Thepage\\:Theform\\:lastnames").keyup(updatenew);
//$("#Thepage\\:Theform\\:othervalue").keyup(updatenew);
$("#Thepage\\:Theform\\:searchValue").keyup(updatenew);
try{
$('#Thepage\\:Theform\\:firstnames').live("input", function(){ updatenew();});
$('#Thepage\\:Theform\\:lastnames').live("input", function(){ updatenew();});
$('#Thepage\\:Theform\\:searchValue').live("input", function(){ updatenew();});
$('#Thepage\\:Theform\\:titles').live("input", function(){ updatenew();});
$('#Thepage\\:Theform\\:citys').live("input", function(){ updatenew();});
$('#Thepage\\:Theform\\:badgettypes').live("input", function(){ updatenew();});
$('#Thepage\\:Theform\\:phones').live("input", function(){ updatenew();});
$('#Thepage\\:Theform\\:othervalue').live("input", function(){ updatenew();});
}catch(e){}
var abarcode='';
var abaruniqueno='';
var statemap = {'None': 'None', 'Alabama': 'AL','Alaska': 'AK','Arizona': 'AZ','Arkansas': 'AR','California': 'CA','Colorado': 'CO','Connecticut': 'CT','Delaware': 'DE','District of Columbia': 'DC','Florida': 'FL','Georgia': 'GA','Hawaii': 'HI','Idaho': 'ID','Illinois': 'IL','Indiana': 'IN','Iowa': 'IA','Kansas': 'KS','Kentucky': 'KY','Louisiana': 'LA','Maine': 'ME','Maryland': 'MD','Massachusetts': 'MA','Michigan': 'MI','Minnesota': 'MN','Mississippi': 'MS','Missouri': 'MO','Montana': 'MT','Nebraska': 'NE','Nevada': 'NV','New Hampshire': 'NH','New Jersey': 'NJ','New Mexico': 'NM','New York': 'NY','North Carolina': 'NC','North Dakota': 'ND','Ohio': 'OH','Oklahoma': 'OK','Oregon': 'OR','Pennsylvania': 'PA','Rhode Island': 'RI','South Carolina': 'SC','South Dakota': 'SD','Tennessee': 'TN','Texas': 'TX','Utah': 'UT','Vermont': 'VT','Virginia': 'VA','Washington': 'WA','West Virginia': 'WV','Wisconsin': 'WI','Wyoming': 'WY','United States Of America': 'USA'};  
 

 
 try{
 if($("#Thepage\\:Theform\\:othervalue").val()=='')
$("#Thepage\\:Theform\\:othervalue").val(document.getElementById('{!$Component.Thepage:Theform:typeselect}').value);
$("#Thepage\\:Theform\\:countrys").val('United States of America').change();
document.getElementById('Thepage:Theform:displaybadgettype').checked=true;
document.getElementById('Thepage:Theform:visibility').checked=true;

}catch(e){}
 
 


function updatenew(){ 

try{
//show name
var fname= $("#Thepage\\:Theform\\:firstnames").val();
var lname= $("#Thepage\\:Theform\\:lastnames").val();
var company= $("#Thepage\\:Theform\\:searchValue").val();

var badgelabel= $("#Thepage\\:Theform\\:othervalue").val();

var name=fname+' '+lname;
var jobtitle=$("#Thepage\\:Theform\\:titles").val();

var atypes="{!eve.Attendee_Types__c}";

var visible=document.getElementById('Thepage:Theform:visibility').checked;
var badgettypevisible=document.getElementById('Thepage:Theform:displaybadgettype').checked;

if(badgelabel.toUpperCase()=='EXECUTIVE DURECTOR')
   $("#color").val('#792e2e');
   else if(badgelabel.toUpperCase()=='PRESIDENT')
   $("#color").val('#2e79ce');
   else if(badgelabel.toUpperCase()=='EXHIBITOR')
   $("#color").val('#008000');
   else if(badgelabel.toUpperCase()=='SECURITY')
   $("#color").val('#2e5c77');
   else if(badgelabel.toUpperCase()=='STAFF')
   $("#color").val('#a63032');
   else if(badgelabel.toUpperCase()=='SPONSOR')
   $("#color").val('#ff0000');
   else if(badgelabel.toUpperCase()=='SPEAKER')
   $("#color").val('#df3434');
   else if(badgelabel.toUpperCase()=='VIP')
   $("#color").val('#501f76');
   else if(badgelabel.toUpperCase()=='HOST')
   $("#color").val('#8a26d4');
   else if(badgelabel.toUpperCase()=='ATTENDEE')
   $("#color").val('#1b75bb');
   else if(badgelabel.toUpperCase()=='BOARD MEMBER')
   $("#color").val('#6e325c');
   else if(badgelabel.toUpperCase()=='MODERATOR')
   $("#color").val('#314542');
var color= $("#color").val();
document.getElementById('Thepage:Theform:myHiddenFields').value=color;
var name=fname+' '+lname;

var atttype='';

//code for attendee type
try{
if(visible==true)
atttype='<font style="valign:bottom;text-align:center;background-color:'+color+';display:block;font-size:26px;color:#ffffff;font-face:Arial-BoldMT;">'+badgelabel+'</font>';

}catch(e){}

var badgettype='';
//code for ticket type
try{
if(badgettypevisible==true)
badgettype=$("#Thepage\\:Theform\\:badgettypes").val();
}catch(e){}

//

var abarcodeimage='';

if(abarcode!='')
{
abarcodeimage='<img src="https://chart.googleapis.com/chart?chs=125x125&cht=qr&chl='+abarcode+'"/>';
}





 var evlogo='';
//var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
//if (isChrome)
//evlogo='<img src="/servlet/servlet.FileDownload?file={!eve.EV_EventLogo__c}" style="width:100%;height:auto;padding-left:3px;padding-top:3px">';
//else
evlogo='<object type="image/jpeg" data="/servlet/servlet.FileDownload?file={!eve.EV_EventLogo__c}" style="width:150px;height:100px;height:auto;padding-left:3px;padding-top:3px">';

var statevar;
if(statemap[$("#Thepage\\:Theform\\:statess").val()]==undefined)
statevar=$("#Thepage\\:Theform\\:statess").val();
else
statevar=statemap[$("#Thepage\\:Theform\\:statess").val()];
var comma='';
if(statevar!=''&&$("#Thepage\\:Theform\\:citys").val()!='')
comma=',';
var fspan='';
var id='';
var ffamily='';

<apex:repeat var="el" value="{!elems}">
var id="{!el.id}";

try{
ffamily="{!el.fontFamily}";}catch(e){}
if(id=="firn"||id=="cfirn"||id=="badgeFirstName")
{

fspan=fspan+'<span class="atextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+fname+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".atextfill").textfill(newfonts, 11);</scr'+'ipt>';
}
if(id=="lstn"||id=="clstn"||id=="badgeLastName")
{

fspan=fspan+'<span class="btextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+lname+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".btextfill").textfill(newfonts, 11);</scr'+'ipt>';
}
if(id=="cfulln"||id=="fulln"||id=="badgeFullName")
{

fspan=fspan+'<span class="ctextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';"><apex:outputtext value="dr. " rendered="{!CONTAINS(UPPER(el.contentText), 'DR.')}"/>'+name+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".ctextfill").textfill(newfonts, 11);</scr'+'ipt>';
}
if(id=="cdline")
fspan=fspan+'<span style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">{!el.contentText}<\/span>';


if(id=="ccomn"||id=="comn"||id=="badgeCompanyName")
{

fspan=fspan+'<span class="dtextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+company+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".dtextfill").textfill(newfonts, 11);</scr'+'ipt>';
}
if(id=="ccity")
fspan=fspan+'<span class="cctextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+$("#Thepage\\:Theform\\:citys").val()+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".cctextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(id=="cstate")
fspan=fspan+'<span class="sttextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+statevar+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".sttextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(id=="ccitystate")
fspan=fspan+'<span class="csttextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+$("#Thepage\\:Theform\\:citys").val()+comma+' '+statevar+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".csttextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(id=="cstext")
fspan=fspan+'<span class="ltextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">{!el.contentText}<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".ltextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(id=="cstext2")
fspan=fspan+'<span class="mtextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">{!el.contentText}<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".mtextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(id=="cstext3")
fspan=fspan+'<span class="ntextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">{!el.contentText}<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".ntextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(id=="uniqNo"||id=="cuniqNo")
fspan=fspan+'<span class="vtextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+abaruniqueno+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".vtextfill").textfill(newfonts, 11);</scr'+'ipt>';


if(badgettypevisible==true){
if(id=="ticketn"||id=="cticketn"||id=="badgeTicket")
fspan=fspan+'<span class="etextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+badgettype+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".etextfill").textfill(newfonts, 11);</scr'+'ipt>';
}

if(visible==true){
if(id=="ticketCategory"||id=="cticketCategory"||id=="badgeExhibitor")
fspan=fspan+'<span class="ftextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+badgelabel+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".ftextfill").textfill(newfonts, 11);</scr'+'ipt>';
}
if(id=="jobTitle"||id=="cjobTitle"||id=="badgeJobTitle")
fspan=fspan+'<span class="gtextfill" style="line-height:{!el.height}px;position:absolute;white-space:nowrap;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};font-family:'+ffamily+';">'+jobtitle+'<\/span><scr'+'ipt>var fonts="{!el.fontSize}";var newfonts = fonts.substring(0,fonts.length-2);$(".gtextfill").textfill(newfonts, 11);</scr'+'ipt>';

if(id=="badgeLogof")
fspan=fspan+'<div style="position:absolute;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};background-image:url(\'{!el.urlResult}\');background-size:100% 100%"></div>';

if(id=="Logo"||id=="cclogo"||id=="badgeLogo")
fspan=fspan+'<div style="position:absolute;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};background-image:url(\'/servlet/servlet.FileDownload?file={!eve.EV_EventLogo__c}\');background-size:100% 100%"></div>';

if(abarcode!='')
{
if(id=="badgeQrCode"||id=="cqrcd"||id=="qrcode")
fspan=fspan+'<div style="position:absolute;height:{!el.height}px;width:{!el.width}px;top:{!el.positionTop}px;left:{!el.positionLeft}px;margin-top:{!el.marginTop};margin-right:{!el.marginRight};margin-bottom:{!el.marginBottom};margin-left:{!el.marginLeft};padding-top:{!el.paddingTop};padding-right:{!el.paddingRight};padding-bottom:{!el.paddingBottom};padding-left:{!el.paddingLeft};text-align:{!el.textAlign};font-size:{!el.fontSize};text-transform:{!el.textTransform};background-color:{!el.backgroundColor};opacity:{!el.opacity};color:{!el.textcolor};background-image:url(\'https://chart.googleapis.com/chart?chs=125x125&cht=qr&chl='+abarcode+'\');background-size: 100% 100%;"></div>';
}




</apex:repeat>

var pgsz='';
if('{!btstyle.Badge_Type__c}'=='Brother')
pgsz='<style>@page{size:3.9in 2.4in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
if('{!btstyle.Badge_Type__c}'=='Zebra')
{
if(navigator.userAgent.indexOf("Chrome") != -1 ) 
    {
        pgsz='<style>@page{size:3.75in 3in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
    }
    
    else if(navigator.userAgent.indexOf("Firefox") != -1 ) 
    {
       
         pgsz='<style>@page{size:4in 3in;margin-top:0px;margin-left:-2px;margin-bottom:0px;margin-right:-2px;}</style>';
    }
    else
pgsz='<style>@page{size:3.75in 3in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
}
if('{!btstyle.Badge_Type__c}'=='Avery')
pgsz='<style>@page{size:3.375in 2.33in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
if('{!btstyle.Badge_Type__c}'=='Dymo')
pgsz='<style>@page{size:4.19in 2.44in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
if('{!btstyle.Badge_Type__c}'=='CustScanBadge')
pgsz='<style>@page{size:3.0in 2.25in;margin-top:-5px;margin-left:-5px;margin-bottom:-5px;margin-right:-5px;}</style>';
var y='<html><head><scr'+'ipt type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></scr'+'ipt><scr'+'ipt type="text/javascript">(function($) {$.fn.textfill = function(maxFontSize, maxWords) {maxFontSize = parseInt(maxFontSize, 10);maxWords = parseInt(maxWords, 10) || 3;return this.each(function(){var self = $(this),orgText = self.text(),fontSize = parseInt(self.css("fontSize"), 10),lineHeight = parseInt(self.css("lineHeight"), 10),maxHeight = self.height(),maxWidth = self.width(),words = self.text().split(" ");function calcSize(text) {var ourText = $("<span>"+text+"</span>").appendTo(self),multiplier = maxWidth/ourText.width(),newSize = fontSize*(multiplier-0.1);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize );var scrollHeight = self[0].scrollHeight;if (scrollHeight  > maxHeight) {multiplier = maxHeight/scrollHeight;newSize = (newSize*multiplier);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize);}}self.empty();if (words.length > maxWords) {while (words.length > 0) {var newText = words.splice(0, maxWords).join(" ");calcSize(newText);elf.append("<br>");}} else {calcSize(orgText);}});};})(jQuery);$(function(){$(".textfill").textfill(0, 11);});</scr'+'ipt>'+pgsz+'</head><body bgcolor="white">'+fspan+'</body></html>';


if('{!btstyle.Badge_Type__c}'=='SwedenBadge'){
y='<html><head><meta charset="utf-8"></meta><title>Untitled Document</title><style >@page {size:A4 landscape;margin-left: 0.8cm;margin-right: 0.3cm;margin-top: 0.3cm;margin-bottom: 0.8cm;}</style><scr'+'ipt type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.3.0/jquery.min.js"></scr'+'ipt><scr'+'ipt type="text/javascript">(function($) {$.fn.textfill = function(maxFontSize, maxWords) {maxFontSize = parseInt(maxFontSize, 10);maxWords = parseInt(maxWords, 10) || 3;return this.each(function(){var self = $(this),orgText = self.text(),fontSize = parseInt(self.css("fontSize"), 10),lineHeight = parseInt(self.css("lineHeight"), 10),maxHeight = self.height(),maxWidth = self.width(),words = self.text().split(" ");function calcSize(text) {var ourText = $("<span>"+text+"</span>").appendTo(self),multiplier = maxWidth/ourText.width(),newSize = fontSize*(multiplier-0.1);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize );var scrollHeight = self[0].scrollHeight;if (scrollHeight  > maxHeight) {multiplier = maxHeight/scrollHeight;newSize = (newSize*multiplier);ourText.css("fontSize",(maxFontSize > 0 && newSize > maxFontSize) ?maxFontSize :newSize);}}self.empty();if (words.length > maxWords) {while (words.length > 0) {var newText = words.splice(0, maxWords).join(" ");calcSize(newText);elf.append("<br>");}} else {calcSize(orgText);}});};})(jQuery);$(function(){$(".textfill").textfill(0, 11);});</scr'+'ipt></head><body bgcolor="white"><table width="100%" border="0" cellspacing="0" cellpadding="0" style="font-family:Verdana, Geneva, sans-serif;"><tr><td width="50%" align="left" valign="top" style="padding-top:50px;padding-right:10px;"><h3 style="font-family:Verdana, Geneva, sans-serif;">{!eve.EV_Title__c}</h3>Where:&nbsp;&nbsp;{!eve.AS_HostingCity__c}<br />When:&nbsp;&nbsp;<apex:outputText value="{0, date,d'rd of' MMMM yyyy}"><apex:param value="{!eve.EV_StartDate__c}" /> </apex:outputText>, {!eve.StartTime__c}-{!eve.EV_EndTime__c}<br /> <br /><font color="#FF0000" style="font-family:Verdana, Geneva, sans-serif;"><strong>IMPORTANT:</strong></font><br /><p style="font-family:Verdana, Geneva, sans-serif;">This is you entry ticket and badge to the Nordic IT Security Forum.The ticket is personal and the QR code includes your personal ticket details and gives you access when scanned at the entrance to the exhibition hall.</p><br /><strong>PLEASE PRINT AND BRING THE TICKET TO THE VENUE</strong></td><td width="50%" align="center"><!-- badge div start here --><div style="border:1px solid #F00; width:5.82in; height:4.13in;position:relative;">'+fspan+'</div><!-- badge div end here --></td></tr><tr><td colspan="2" align="center" valign="top"><table width="100%" border="0" cellspacing="0" cellpadding="5"><tr><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td><td align="center" valign="top">&nbsp;</td></tr><tr><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/print.png')}" width="75" height="75" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/info-icon.png')}" width="75" height="75" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/cutter_icon.png')}" width="75" height="75" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/badger-cover.png')}" width="100" height="81" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/tag.jpg')}" width="100" height="100" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/scan.png')}" width="100" height="101" /></td><td width="14%" align="center" valign="top"><img src="{!URLFOR($Resource.nordicitimages,'images/congratulations.png')}" width="75" height="75" /></td></tr><tr><td width="14%" align="left" valign="top">7. Print this  ticket in A4 and bring to the event on the 3rd of November</td><td width="14%">6. Find the  registration desk at the entrance of Section T (<em>near the Scandic hotel entrance</em>)</td><td width="14%" align="left" valign="top">5. If you have  not yet cut your badge out: Please go to our dedicated stations and cut it out</td><td width="14%" align="left" valign="top">4. Pick up a  plastic badge a<a name="_GoBack"></a>nd put your ticket in it</td><td width="14%" align="left" valign="top">3. Pick up a  lanyard</td><td width="14%" align="left" valign="top">2. Go to the  registration desk and get your badge scanned by one of our onsite staff members</td><td width="14%" align="left" valign="top" style="font-size:12px">1. CONGRATULATIONS <br/><strong>– you are in!</strong></td></tr></table></td></tr></table></body></html>';
$('iframe').attr('width','600px');
}
else
$('iframe').attr('width','405px');
$('iframe').attr('srcdoc',y );



if(abarcode!='')
{
setTimeout(function(){ printPdf()},1000);


}
}catch(e){}
}

var y='';
function printPdf() {
                
            var getMyFrame = document.getElementById('ifrmeSummary');
    getMyFrame.focus();
     getMyFrame.contentWindow.print();
      setTimeout(function(){cancel();}, 1000);
  
}


               function paymentmode() {
    if(document.getElementById('Thepage:Theform:paypal').checked){
   
        document.getElementById("printbadgebttnrow").style.display="none";
        document.getElementById("payment").style.display="";

        }else{
       
            document.getElementById("printbadgebttnrow").style.display="";
        document.getElementById("payment").style.display="none";
    }
}
              
             

</script>

          
        </div>
        <!--end of promocodebox--> 
        
      </div>
      <!--close of-grid1--> 
      
      <!----------------------------------->
      
      <div class="clear"></div>
      
       <!--------start of payment hide and show------------->
            <style>
            #ordersummarytitles{
                border-collapse:collapse;
                font-size: 22px;
color: #5283cc;
margin-right: 10px;
letter-spacing: .5px;
font-family: Bebas Neue;
font-weight: normal;
                }
                
            #ordersummarytitles td{ padding:0px 5px ;}
            #ordersummarycontent table { border-collapse:collapse;}
            #ordersummarycontent table tr{ border-bottom:1px solid #ffffff;}
            #ordersummarycontent table td{ padding:5px; text-align:center; font-size:14px;} 
            #paymentwrapper{width:90%;  margin:0px auto; padding:10px; border: 4px solid #ffffff; background-image:url({!URLFOR($Resource.quickregistrationnew, 'quickregistrationnew/images/background.gif')});box-shadow: 0 1px 3px 0 #b5b5b5;-moz-box-shadow: 0 1px 3px 0 #b5b5b5;-webkit-box-shadow: 0 1px 3px 0 #b5b5b5;}
            #ordersummarytitle{ font-size:16px; font-family:cuprum; background-color:#D7D7D7;} 
                   #stripe-line{
          background:url({!URLFOR($Resource.quickregistrationnew, 'quickregistrationnew/images/stripe.png')}); 
          overflow:hidden; 
          height:12px; 
          margin-top:5px; 
           }
 </style>
            
            <div id="payment" style="width:100%; display:none;padding-bottom:30px; margin-top:20px;">
            <div id="paymentwrapper" style="">
           <!---Start of titles----------->
            <table id="ordersummarytitles" width="100%" border="0">
  <tr> 
    <td width="11%" style=" text-align:left; color:#6bbed2;" >Ticket Details</td>
    <td width="34%"> <div id="stripe-line" style="margin-top:0px;"></div><!--close fo stripe-line--></td>
    <td width="19%" style=" text-indent:2%;color:#6bbed2;" id="pinfotd">Payment Information</td>
    <td width="" id="pinfotd1"> <div id="stripe-line" style="margin-top:0px;"></div><!--close fo stripe-line--></td>
  </tr>
</table>
 <!---close of titles----------->
            <div id="paymentcontentwrapper" style="width:99%; display:inline-block; padding:5px 5px 0px 5px; margin-top:0px;">
            <div id="ordersummarycontent" style="width:44%; display:inline-block; height:232px; background-color:#f8f8f8; border: 1px solid #ffffff;">
            <table width="100%" border="0" style="background-color:#F8F8F8;">
 <!-- <tr id="ordersummarytitle">
    <td style="text-align:center;">Item</td>
    <td style="text-align:center;">Quantity</td>
    <td style="text-align:center;">Price</td>
  </tr>-->
  <tr>
    <td style="color:#6bbed2; font-size:14px; font-weight:700; text-align:right;">Select Ticket</td>
    <td style="text-align:left;">
    <apex:selectList value="{!ticketitem}" size="1" styleclass="selectlist">
            <apex:selectOptions value="{!tickets}"/>
            <apex:actionSupport event="onchange" rerender="tamountsection,tamoutnscript" oncomplete="displayorhide();"/>
        </apex:selectList></td>
 
  </tr>

   <tr>
  <td style=" font-size:14px; text-align:left; color:#6bbed2; font-weight:700; text-align:right;">Amount</td>
  <td  style="text-align:left;">
  <apex:outputpanel id="tamountsection">
 <apex:outputText value="{!tckamtmap[ticketitem]}" rendered="{!if(tickets.size==0,false,true)}"/>
 
 </apex:outputpanel>
  <apex:outputpanel id="tamoutnscript" rendered="{!if(tickets.size==0,false,true)}">
  <script>
 
    function displayorhide()
    {
    
     try{
      if('{!tickets.size}'!='0')
      {
        
         if('{!tckamtmap[ticketitem]}'=='0')
         {
         
          document.getElementById('popt').style.display='none';
          document.getElementById('pinfotd').style.display='none';
          document.getElementById('pinfotd1').style.display='none';
          document.getElementById('paymentdetailscontent').style.display='none';
          document.getElementById('paymentdetailscontentcheck').style.display='none';
         }
         else
         {
          document.getElementById('popt').style.display='';
           document.getElementById('pinfotd').style.display='';
          document.getElementById('pinfotd1').style.display='';
          document.getElementById('paymentdetailscontent').style.display='';
          document.getElementById('paymentdetailscontentcheck').style.display='none';
          document.getElementById('Thepage:Theform:paymentoptions').value='Credit Card';
         }
        
      }
     }catch(e){}
    }
  try{
      
      displayorhide();
         }catch(e){}
  </script>
  </apex:outputpanel>
  </td>
  </tr>
  
  <tr id="popt">
    <td style="color:#6bbed2; font-size:14px; font-weight:700; text-align:right;">Payment Type</td>
    <td style="text-align:left;">
    <apex:selectList value="{!paymentopt}" size="1" styleclass="selectlist" onchange="showwhichbox()" id="paymentoptions">
            <apex:selectOptions value="{!PaymentOptions}"/>
            <!--<apex:selectOption itemValue="Visa" itemLabel="VISA/MASTER"/>
            <apex:selectOption itemValue="Amex" itemLabel="AMERICAN EXPRESS"/>-->
        </apex:selectList></td>
 
  </tr>          
  
</table>

<script>
function showwhichbox()
{
if(document.getElementById('Thepage:Theform:paymentoptions').value=='Check')
{
document.getElementById('paymentdetailscontent').style.display='none';
document.getElementById('paymentdetailscontentcheck').style.display='';
document.getElementById('pinfotd').style.display='';
document.getElementById('pinfotd1').style.display='';
 
}
else if(document.getElementById('Thepage:Theform:paymentoptions').value=='Cash')
{
document.getElementById('paymentdetailscontent').style.display='none';
document.getElementById('paymentdetailscontentcheck').style.display='none';
document.getElementById('pinfotd').style.display='none';
document.getElementById('pinfotd1').style.display='none';
          
}
else if(document.getElementById('Thepage:Theform:paymentoptions').value=='Credit Card')
{
document.getElementById('paymentdetailscontent').style.display='';
document.getElementById('paymentdetailscontentcheck').style.display='none';
document.getElementById('pinfotd').style.display='';
 document.getElementById('pinfotd1').style.display='';
          
}
}
</script>
            
            </div><!--close of ordersummary content-->
           
           
           <div id="paymentdetailscontentcheck" style="width:52%; border:1px solid #ffffff; display:inline-block; padding:5px ; margin-bottom:5px; background-color:#f8f8f7; float:right;display:none">
           <apex:inputText id="checknumber" value="{!checkNo}" html-placeholder="Enter Check Number" style=" width:80%;outline:none; font-size:14px; color:#999; border-radius:3px; margin:0px auto;height:38px; border:none"/> 
         </div>
           
           
            <div id="paymentdetailscontent" style="background-color:#CCCCCC; border:1px solid #ffffff; display:inline-block; padding:8px ; 
            margin-bottom:5px; background-color:#f8f8f7; float:left; height:168px;border-radius:8px; border:1px solid #eaeaea;margin-top:15px; padding:5px;float:right;">
            
           <div  id="cardholder" style="margin-left:0%; ">
            <div style="width:98%; margin:0px auto;">
            
            <ul style="list-style:none;display:inline;">
                <li style="list-style:none;display:inline; fon-size:32px; margin-bottom:15px;">Enter Details</li>
                <li style="list-style:none;display:inline;"><apex:image url="{!URLFOR($Resource.cardimages, 'mastercard_straight.png')}" width="50" height="31"/></li>
                <li style="list-style:none;display:inline;"><apex:image url="{!URLFOR($Resource.cardimages, 'visa_electron_straight.png')}" width="50" height="31"/></li>
                <li style="list-style:none;display:inline;"><apex:image url="{!URLFOR($Resource.cardimages, 'discover_straight.png')}" width="50" height="31"/></li>
                <li style="list-style:none;display:inline;"><apex:image url="{!URLFOR($Resource.cardimages, 'american_express_straight.png')}" width="50" height="31"/></li>
            </ul>
            
            </div>
             <div id="cardno" style="width:95%; margin:0px auto;">
             
             <apex:inputText html-placeholder="Enter Card Number" value="{!cardNo}" id="creditcardnumber" style="margin-top:10px;width:100%;border:1px solid #ccc;outline:none;font-size:14px; color:#999; border-radius:3px; margin:0px auto;height:38px; border:none"/>
             
             </div><!--close of cardno-->
             
             <div style="width:100%; height:15px; "></div>
              <div style="width:34%; height:37px; float:left; padding-left:4%;">
              Expiration
              <apex:selectList value="{!expMonth}" size="1" styleclass="selectoption" style=" outline:none;  font-size:14px; color:#999; border-radius:3px; margin:0px auto;height:38px; border:none;width:70%; margin-top:2px; height:100%; background:none;border:1px solid #ccc;">
           <apex:selectOptions value="{!months}" />
                </apex:selectList>
             
             </div>
             
             <!-------------------------------------------->
              <div style="width:15%; height:37px; float:left;">
              <br />
              
                    <!--       <input type="date" placeholder="January (01)" style="width:99%;background:none; margin-left:3%;   font-size:9px; color:#999; border-radius:3px; margin:0px auto;height:38px; border:none"/>-->
                    <apex:selectList value="{!expYear}" size="1" styleclass="selectoption" style="outline:none;  font-size:14px; color:#999; border-radius:3px; margin:0px auto;height:38px; border:none;width:100%; margin-top:2px; height:100%; background:none;border:1px solid #ccc;">
            <apex:selectOptions value="{!years}" />
                </apex:selectList>
               
              </div>
             <!-------------------------------------------->
             <!------------------------------------------->
             <div style="width:16%; height:39px; float:left; margin-left:15%;">
             CVV/CVC
                    <!--       <input type="date" placeholder="January (01)" style="width:99%;background:none; margin-left:3%;   font-size:9px; color:#999; border-radius:3px; margin:0px auto;height:38px; border:none"/>-->
                 <apex:inputText value="{!cardCvv}" html-placeholder="ABC" id="CVVNumberId" style="outline:none;padding:-2px;padding-left:5px; margin-left:0px;width:100%;border:1px solid #ccc; height:35px;outline:none;width:100%; font-size:14px; color:#999; border-radius:3px; margin:0px auto;height:38px; border:none"/>
              </div>
             <!----------------------------------------------->
           </div><!--close of cardholder-->
         
            </div><!--close of paymentetailscontent-->
           
            </div><!--close of paymentcontentwrapper-->
            
            
            <apex:commandLink id="printbadge" action="{!SaveAndPrint}" reRender="renderheres"  Onclick="if(!movenew()) return false;" oncomplete="getnewdata();"> 
    <apex:commandButton value="Pay & Print" styleClass="printbadge" style=" width:30%; margin-left:20%; margin-top:5px;"/>
    </apex:commandLink>
    
    
                
                <apex:commandLink action="{!cancel}"  > 
    <apex:commandButton value="Cancel" styleClass="printbadge" style=" width:30%; margin-top:5px;margin-left:20px;"/>
    </apex:commandLink>
                
            </div><!--close of paymentwrapper-->
            
            
            </div><!--close of payment-------->
      
    </div>
    <!-- #content--> 
  </div>
  <!-- #container-->
 <footer style="width:100%; padding:0px;">
    <div class="info-footer" style="margin:0px;z-index:-1000" >
      <div id="left">
        <p>Copyright &copy; 2014  Global Nest.</p>
      </div>
      <div id="right">
        <p>Booth Leads </p>
      </div>
    </div>
  </footer> 
  
</section>
<!-- #middle-->

<div class="clear"></div>
<script>
 
 
var saveclick=0;
function movenew() {
if(saveclick==1)
return false;
    var selvalue='';      
    /*var myradios = document.getElementsByName('{!$Component.Thepage:Theform:typeselect}');
for(i = 0; i < myradios.length; i++) 
    if(myradios[i].checked) {
        // now we now the selected index
        selvalue=myradios[i].value;
    }*/
     
  selvalue = document.getElementById('{!$Component.Thepage:Theform:typeselect}').value;   
 

var x = document.getElementById('{!$Component.Thepage:Theform:firstnames}').value;
var y = document.getElementById('{!$Component.Thepage:Theform:lastnames}').value;
var z = document.getElementById('{!$Component.Thepage:Theform:phones}').value;

var c = document.getElementById('{!$Component.Thepage:Theform:searchValue}').value;

x =x.trim();
y =y.trim();
z=z.trim();
c =c.trim();
     

if(x == "" || x == null)
{
alert('Please enter First name');
return false;
}

if(y == "" || y == null)
{
alert('Please enter Last name');
return false;
}

 if(selvalue=='')
 {
   alert('Please select an Attendee Type');
   return false;
 } 
 
 if(document.getElementById('Thepage:Theform:paypal').checked==true)
 {
  
    var amt=document.getElementById('Thepage:Theform:tamountsection').innerHTML.trim();
    if(amt!="0"&&document.getElementById('Thepage:Theform:creditcardnumber').value==""&&document.getElementById('Thepage:Theform:paymentoptions').value=='Credit Card'){
    alert('Please Enter Your Credit Card Number');
    return false;
    }
    if(amt!="0"&&document.getElementById('Thepage:Theform:checknumber').value==""&&document.getElementById('Thepage:Theform:paymentoptions').value=='Check'){
    alert('Please Enter Your Check Number');
    return false;
    }
 }

if((selvalue.toUpperCase()=='SPONSOR'||selvalue.toUpperCase()=='EXHIBITOR')&&(c==''))
{
  
alert('Please enter Company');
return false;
}
else
{
  $(".loaderBackground").css("display","block");
   saveclick=1;
 return true;
}

}


</script>
   </apex:outputpanel> 
    
    
    
    
    
    
     </apex:outputpanel>   
   </div>
   
   <apex:actionFunction action="{!CheckAttendee}" name="choosenValueFromJS" reRender="mainpanel" status="AjaxLoader" oncomplete="checkagain();">
               <apex:param value="" name="choose"/>
           </apex:actionFunction>
   <apex:actionFunction action="{!settemplate}" name="settemplate" reRender="mainpanel" status="AjaxLoader">
               <apex:param value="" name="btstyleid"/>
           </apex:actionFunction> 
           <apex:actionFunction action="{!cancel}" name="cancel" >
                </apex:actionFunction>   
     
   </apex:form>
  
</apex:page>